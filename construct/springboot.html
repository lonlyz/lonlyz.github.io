<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="VuePress"><meta name="apple-mobile-web-app-title" content="VuePress"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>Spring Boot 入门 | lz's blog</title><meta name="description" content="不积跬步无以至千里">
    <link rel="modulepreload" href="/assets/app.2d179ac6.js"><link rel="modulepreload" href="/assets/springboot.html.89f6a9b4.js"><link rel="modulepreload" href="/assets/springboot.html.19e6846c.js"><link rel="prefetch" href="/assets/index.html.ce922e96.js"><link rel="prefetch" href="/assets/contributing.html.3a411a07.js"><link rel="prefetch" href="/assets/architecture.html.4e6b8544.js"><link rel="prefetch" href="/assets/plugin.html.2478fd40.js"><link rel="prefetch" href="/assets/theme.html.0b332550.js"><link rel="prefetch" href="/assets/ArrayList.html.b1c78bb4.js"><link rel="prefetch" href="/assets/HashMap.html.183c3b82.js"><link rel="prefetch" href="/assets/LinkedList.html.6345d9c4.js"><link rel="prefetch" href="/assets/deploy.html.920f8ab9.js"><link rel="prefetch" href="/assets/design.html.022867f6.js"><link rel="prefetch" href="/assets/docker.html.cf8f042b.js"><link rel="prefetch" href="/assets/jvm.html.b9c03646.js"><link rel="prefetch" href="/assets/linux.html.6d4fd70c.js"><link rel="prefetch" href="/assets/maven.html.61a6d70e.js"><link rel="prefetch" href="/assets/securityManager.html.8a98cf93.js"><link rel="prefetch" href="/assets/dubbo.html.5711a22c.js"><link rel="prefetch" href="/assets/mybatis_analyse.html.026ce764.js"><link rel="prefetch" href="/assets/spring_analyse.html.190cb23c.js"><link rel="prefetch" href="/assets/springcloud.html.8e65ac04.js"><link rel="prefetch" href="/assets/zookeeper.html.8965cbc3.js"><link rel="prefetch" href="/assets/elasticsearch.html.b4a652db.js"><link rel="prefetch" href="/assets/mycat.html.efc17ef6.js"><link rel="prefetch" href="/assets/mysql.html.e58b924c.js"><link rel="prefetch" href="/assets/redis.html.c8fd5471.js"><link rel="prefetch" href="/assets/index.html.144e86d9.js"><link rel="prefetch" href="/assets/assets.html.6149a9cd.js"><link rel="prefetch" href="/assets/bundler.html.41d883e3.js"><link rel="prefetch" href="/assets/configuration.html.569fcb10.js"><link rel="prefetch" href="/assets/deployment.html.2e87e1d3.js"><link rel="prefetch" href="/assets/getting-started.html.ee18f05f.js"><link rel="prefetch" href="/assets/i18n.html.4876761d.js"><link rel="prefetch" href="/assets/markdown.html.1608d7fe.js"><link rel="prefetch" href="/assets/migration.html.758299a9.js"><link rel="prefetch" href="/assets/page.html.9eda836b.js"><link rel="prefetch" href="/assets/plugin.html.6f7595db.js"><link rel="prefetch" href="/assets/theme.html.af5fe1f9.js"><link rel="prefetch" href="/assets/cli.html.7cc9ace8.js"><link rel="prefetch" href="/assets/client-api.html.43c5721d.js"><link rel="prefetch" href="/assets/components.html.b203dc2e.js"><link rel="prefetch" href="/assets/config.html.5d675754.js"><link rel="prefetch" href="/assets/frontmatter.html.cb7902b9.js"><link rel="prefetch" href="/assets/node-api.html.e1ac08d3.js"><link rel="prefetch" href="/assets/plugin-api.html.acd6adb1.js"><link rel="prefetch" href="/assets/theme-api.html.dec36e8b.js"><link rel="prefetch" href="/assets/index.html.75cad36a.js"><link rel="prefetch" href="/assets/adding-extra-pages.html.f27ac48d.js"><link rel="prefetch" href="/assets/making-a-theme-extendable.html.01558906.js"><link rel="prefetch" href="/assets/markdown-and-vue-sfc.html.961fdf5e.js"><link rel="prefetch" href="/assets/passing-data-to-client-code.html.ca69bb2e.js"><link rel="prefetch" href="/assets/usage-of-client-config.html.b76cce07.js"><link rel="prefetch" href="/assets/vite.html.d4303ee4.js"><link rel="prefetch" href="/assets/webpack.html.b0d629df.js"><link rel="prefetch" href="/assets/components.html.16fce079.js"><link rel="prefetch" href="/assets/config.html.79325d15.js"><link rel="prefetch" href="/assets/extending.html.d14a33d7.js"><link rel="prefetch" href="/assets/frontmatter.html.c97d0d05.js"><link rel="prefetch" href="/assets/markdown.html.1a13cc02.js"><link rel="prefetch" href="/assets/styles.html.ea86aa59.js"><link rel="prefetch" href="/assets/active-header-links.html.45b9bd02.js"><link rel="prefetch" href="/assets/back-to-top.html.af6ff50c.js"><link rel="prefetch" href="/assets/container.html.bef91a8d.js"><link rel="prefetch" href="/assets/docsearch.html.16f4c15e.js"><link rel="prefetch" href="/assets/external-link-icon.html.76af1764.js"><link rel="prefetch" href="/assets/git.html.247e0ffd.js"><link rel="prefetch" href="/assets/google-analytics.html.9c016e93.js"><link rel="prefetch" href="/assets/medium-zoom.html.1dc25251.js"><link rel="prefetch" href="/assets/nprogress.html.893a0104.js"><link rel="prefetch" href="/assets/palette.html.729169ee.js"><link rel="prefetch" href="/assets/prismjs.html.f6a4ae7c.js"><link rel="prefetch" href="/assets/pwa-popup.html.b3d39037.js"><link rel="prefetch" href="/assets/pwa.html.adb71ea8.js"><link rel="prefetch" href="/assets/register-components.html.de3ea1e4.js"><link rel="prefetch" href="/assets/search.html.cf5783e8.js"><link rel="prefetch" href="/assets/shiki.html.a1abdee1.js"><link rel="prefetch" href="/assets/theme-data.html.c90a70db.js"><link rel="prefetch" href="/assets/toc.html.bbb10448.js"><link rel="prefetch" href="/assets/404.html.265028f6.js"><link rel="prefetch" href="/assets/index.html.f7b63dec.js"><link rel="prefetch" href="/assets/contributing.html.fcaafa92.js"><link rel="prefetch" href="/assets/architecture.html.05debc79.js"><link rel="prefetch" href="/assets/plugin.html.a0cb5d5b.js"><link rel="prefetch" href="/assets/theme.html.69728f0b.js"><link rel="prefetch" href="/assets/ArrayList.html.e25ef4ab.js"><link rel="prefetch" href="/assets/HashMap.html.ca40b73f.js"><link rel="prefetch" href="/assets/LinkedList.html.591b0937.js"><link rel="prefetch" href="/assets/deploy.html.510dc198.js"><link rel="prefetch" href="/assets/design.html.2d9ceaf2.js"><link rel="prefetch" href="/assets/docker.html.664d5f64.js"><link rel="prefetch" href="/assets/jvm.html.98ed9d7f.js"><link rel="prefetch" href="/assets/linux.html.5b144f58.js"><link rel="prefetch" href="/assets/maven.html.ab0caf1a.js"><link rel="prefetch" href="/assets/securityManager.html.bba423da.js"><link rel="prefetch" href="/assets/dubbo.html.8f6fe996.js"><link rel="prefetch" href="/assets/mybatis_analyse.html.67db7a70.js"><link rel="prefetch" href="/assets/spring_analyse.html.25b362df.js"><link rel="prefetch" href="/assets/springcloud.html.bd3c2463.js"><link rel="prefetch" href="/assets/zookeeper.html.53b5dc84.js"><link rel="prefetch" href="/assets/elasticsearch.html.4d9b533d.js"><link rel="prefetch" href="/assets/mycat.html.e8bce3fc.js"><link rel="prefetch" href="/assets/mysql.html.9341c39e.js"><link rel="prefetch" href="/assets/redis.html.ef4e78a8.js"><link rel="prefetch" href="/assets/index.html.db16eed3.js"><link rel="prefetch" href="/assets/assets.html.2314c7eb.js"><link rel="prefetch" href="/assets/bundler.html.24e5be97.js"><link rel="prefetch" href="/assets/configuration.html.259cd78e.js"><link rel="prefetch" href="/assets/deployment.html.b7d3dd68.js"><link rel="prefetch" href="/assets/getting-started.html.fa9442a2.js"><link rel="prefetch" href="/assets/i18n.html.52274ece.js"><link rel="prefetch" href="/assets/markdown.html.05711a31.js"><link rel="prefetch" href="/assets/migration.html.2be0c1c9.js"><link rel="prefetch" href="/assets/page.html.300f104e.js"><link rel="prefetch" href="/assets/plugin.html.385c351b.js"><link rel="prefetch" href="/assets/theme.html.576cac10.js"><link rel="prefetch" href="/assets/cli.html.f9cb9f61.js"><link rel="prefetch" href="/assets/client-api.html.943d4e52.js"><link rel="prefetch" href="/assets/components.html.21454798.js"><link rel="prefetch" href="/assets/config.html.32d4906f.js"><link rel="prefetch" href="/assets/frontmatter.html.4d600b76.js"><link rel="prefetch" href="/assets/node-api.html.96f0e82c.js"><link rel="prefetch" href="/assets/plugin-api.html.df57c385.js"><link rel="prefetch" href="/assets/theme-api.html.40f0e433.js"><link rel="prefetch" href="/assets/index.html.75050212.js"><link rel="prefetch" href="/assets/adding-extra-pages.html.95427f8d.js"><link rel="prefetch" href="/assets/making-a-theme-extendable.html.ccf8a50a.js"><link rel="prefetch" href="/assets/markdown-and-vue-sfc.html.db584977.js"><link rel="prefetch" href="/assets/passing-data-to-client-code.html.82aa0df7.js"><link rel="prefetch" href="/assets/usage-of-client-config.html.c9ad052e.js"><link rel="prefetch" href="/assets/vite.html.27fa01f8.js"><link rel="prefetch" href="/assets/webpack.html.f864ac5e.js"><link rel="prefetch" href="/assets/components.html.d57f6f9c.js"><link rel="prefetch" href="/assets/config.html.83041e14.js"><link rel="prefetch" href="/assets/extending.html.17dc183d.js"><link rel="prefetch" href="/assets/frontmatter.html.1b196089.js"><link rel="prefetch" href="/assets/markdown.html.a51c4b7b.js"><link rel="prefetch" href="/assets/styles.html.2ed7c337.js"><link rel="prefetch" href="/assets/active-header-links.html.fd52a36b.js"><link rel="prefetch" href="/assets/back-to-top.html.c3457ba9.js"><link rel="prefetch" href="/assets/container.html.fefb86b8.js"><link rel="prefetch" href="/assets/docsearch.html.5efe2d39.js"><link rel="prefetch" href="/assets/external-link-icon.html.7a8e229f.js"><link rel="prefetch" href="/assets/git.html.9b12fda6.js"><link rel="prefetch" href="/assets/google-analytics.html.d08ec2de.js"><link rel="prefetch" href="/assets/medium-zoom.html.462f60a6.js"><link rel="prefetch" href="/assets/nprogress.html.87cc8a65.js"><link rel="prefetch" href="/assets/palette.html.2f488465.js"><link rel="prefetch" href="/assets/prismjs.html.e4cc4ad1.js"><link rel="prefetch" href="/assets/pwa-popup.html.b4fb4e5c.js"><link rel="prefetch" href="/assets/pwa.html.08d0a52e.js"><link rel="prefetch" href="/assets/register-components.html.9e785502.js"><link rel="prefetch" href="/assets/search.html.0d386121.js"><link rel="prefetch" href="/assets/shiki.html.7cf16601.js"><link rel="prefetch" href="/assets/theme-data.html.f1478668.js"><link rel="prefetch" href="/assets/toc.html.c3c80b86.js"><link rel="prefetch" href="/assets/404.html.d344f66d.js"><link rel="prefetch" href="/assets/404.14d2f7d4.js"><link rel="prefetch" href="/assets/Layout.32917280.js"><link rel="prefetch" href="/assets/NpmBadge.6b229c37.js">
    <link rel="stylesheet" href="/assets/style.a0deccd5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/hero.png" alt="lz&#39;s blog"><span class="site-name can-hide">lz&#39;s blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础"><span class="title">基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础"><span class="title">基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>集合</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/basic/ArrayList.html" class="" aria-label="ArrayList"><!--[--><!--]--> ArrayList <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/HashMap.html" class="" aria-label="HashMap"><!--[--><!--]--> HashMap <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/LinkedList.html" class="" aria-label="LinkedList"><!--[--><!--]--> LinkedList <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其它</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/basic/deploy.html" class="" aria-label="服务器部署"><!--[--><!--]--> 服务器部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/design.html" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/jvm.html" class="" aria-label="JVM内存管理"><!--[--><!--]--> JVM内存管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/securityManager.html" class="" aria-label="SecurityManager"><!--[--><!--]--> SecurityManager <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/docker.html" class="" aria-label="Docker 使用和各个软件的安装"><!--[--><!--]--> Docker 使用和各个软件的安装 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/linux.html" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/maven.html" class="" aria-label="Maven"><!--[--><!--]--> Maven <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>常用</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/construct/dubbo.html" class="" aria-label="Dubbo"><!--[--><!--]--> Dubbo <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/construct/mybatis_analyse.html" class="" aria-label="Mybatis源码分析"><!--[--><!--]--> Mybatis源码分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/construct/spring_analyse.html" class="" aria-label="Spring IOC源码分析"><!--[--><!--]--> Spring IOC源码分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/construct/springboot.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Spring Boot 入门"><!--[--><!--]--> Spring Boot 入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/construct/springcloud.html" class="" aria-label="Spring Cloud 入门"><!--[--><!--]--> Spring Cloud 入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/construct/zookeeper.html" class="" aria-label="Zookeeper"><!--[--><!--]--> Zookeeper <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>常用</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/db/elasticsearch.html" class="" aria-label="ElasticSearch"><!--[--><!--]--> ElasticSearch <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/db/mycat.html" class="" aria-label="Mycat"><!--[--><!--]--> Mycat <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/db/mysql.html" class="" aria-label="MYSQL"><!--[--><!--]--> MYSQL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/db/redis.html" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="在线文档"><span class="title">在线文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="在线文档"><span class="title">在线文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端文档</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://cn.vuejs.org/v2/guide/" rel="noopener noreferrer" target="_blank" aria-label="Vue"><!--[--><!--]--> Vue <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://www.antdv.com/docs/vue/introduce-cn/" rel="noopener noreferrer" target="_blank" aria-label="Vue ant design"><!--[--><!--]--> Vue ant design <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://www.kancloud.cn/yunye/axios/234845" rel="noopener noreferrer" target="_blank" aria-label="Axios"><!--[--><!--]--> Axios <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="参考"><span class="title">参考</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="参考"><span class="title">参考</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>VuePress</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/cli.html" class="" aria-label="命令行接口"><!--[--><!--]--> 命令行接口 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/config.html" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/frontmatter.html" class="" aria-label="Frontmatter"><!--[--><!--]--> Frontmatter <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/components.html" class="" aria-label="内置组件"><!--[--><!--]--> 内置组件 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin-api.html" class="" aria-label="插件 API"><!--[--><!--]--> 插件 API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/theme-api.html" class="" aria-label="主题 API"><!--[--><!--]--> 主题 API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/client-api.html" class="" aria-label="客户端 API"><!--[--><!--]--> 客户端 API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/node-api.html" class="" aria-label="Node API"><!--[--><!--]--> Node API <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>打包工具</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/bundler/vite.html" class="" aria-label="Vite"><!--[--><!--]--> Vite <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/bundler/webpack.html" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>默认主题</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/config.html" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/frontmatter.html" class="" aria-label="Frontmatter"><!--[--><!--]--> Frontmatter <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/components.html" class="" aria-label="内置组件"><!--[--><!--]--> 内置组件 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/markdown.html" class="" aria-label="Markdown"><!--[--><!--]--> Markdown <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/styles.html" class="" aria-label="样式"><!--[--><!--]--> 样式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/extending.html" class="" aria-label="继承"><!--[--><!--]--> 继承 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="插件"><span class="title">插件</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="插件"><span class="title">插件</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>常用功能</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/back-to-top.html" class="" aria-label="back-to-top"><!--[--><!--]--> back-to-top <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/container.html" class="" aria-label="container"><!--[--><!--]--> container <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/external-link-icon.html" class="" aria-label="external-link-icon"><!--[--><!--]--> external-link-icon <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/google-analytics.html" class="" aria-label="google-analytics"><!--[--><!--]--> google-analytics <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/medium-zoom.html" class="" aria-label="medium-zoom"><!--[--><!--]--> medium-zoom <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/nprogress.html" class="" aria-label="nprogress"><!--[--><!--]--> nprogress <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/register-components.html" class="" aria-label="register-components"><!--[--><!--]--> register-components <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>内容搜索</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/docsearch.html" class="" aria-label="docsearch"><!--[--><!--]--> docsearch <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/search.html" class="" aria-label="search"><!--[--><!--]--> search <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>PWA</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/pwa.html" class="" aria-label="pwa"><!--[--><!--]--> pwa <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/pwa-popup.html" class="" aria-label="pwa-popup"><!--[--><!--]--> pwa-popup <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法高亮</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/prismjs.html" class="" aria-label="prismjs"><!--[--><!--]--> prismjs <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/shiki.html" class="" aria-label="shiki"><!--[--><!--]--> shiki <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>主题开发</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/active-header-links.html" class="" aria-label="active-header-links"><!--[--><!--]--> active-header-links <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/git.html" class="" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/palette.html" class="" aria-label="palette"><!--[--><!--]--> palette <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/theme-data.html" class="" aria-label="theme-data"><!--[--><!--]--> theme-data <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/toc.html" class="" aria-label="toc"><!--[--><!--]--> toc <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="了解更多"><span class="title">了解更多</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="了解更多"><span class="title">了解更多</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>深入</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/advanced/architecture.html" class="" aria-label="架构"><!--[--><!--]--> 架构 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/plugin.html" class="" aria-label="开发插件"><!--[--><!--]--> 开发插件 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/theme.html" class="" aria-label="开发主题"><!--[--><!--]--> 开发主题 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/cookbook/" class="" aria-label="Cookbook"><!--[--><!--]--> Cookbook <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其他资源</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/contributing.html" class="" aria-label="贡献指南"><!--[--><!--]--> 贡献指南 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/vuepress/awesome-vuepress" rel="noopener noreferrer" target="_blank" aria-label="Awesome VuePress"><!--[--><!--]--> Awesome VuePress <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="v2.0.0-beta.49"><span class="title">v2.0.0-beta.49</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="v2.0.0-beta.49"><span class="title">v2.0.0-beta.49</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/vuepress/vuepress-next/blob/main/CHANGELOG.md" rel="noopener noreferrer" target="_blank" aria-label="更新日志"><!--[--><!--]--> 更新日志 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://v1.vuepress.vuejs.org/zh/" rel="noopener noreferrer" target="_blank" aria-label="v1.x"><!--[--><!--]--> v1.x <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://v0.vuepress.vuejs.org/zh/" rel="noopener noreferrer" target="_blank" aria-label="v0.x"><!--[--><!--]--> v0.x <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/lonlyz/blog" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础"><span class="title">基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础"><span class="title">基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>集合</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/basic/ArrayList.html" class="" aria-label="ArrayList"><!--[--><!--]--> ArrayList <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/HashMap.html" class="" aria-label="HashMap"><!--[--><!--]--> HashMap <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/LinkedList.html" class="" aria-label="LinkedList"><!--[--><!--]--> LinkedList <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其它</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/basic/deploy.html" class="" aria-label="服务器部署"><!--[--><!--]--> 服务器部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/design.html" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/jvm.html" class="" aria-label="JVM内存管理"><!--[--><!--]--> JVM内存管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/securityManager.html" class="" aria-label="SecurityManager"><!--[--><!--]--> SecurityManager <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/docker.html" class="" aria-label="Docker 使用和各个软件的安装"><!--[--><!--]--> Docker 使用和各个软件的安装 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/linux.html" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/basic/maven.html" class="" aria-label="Maven"><!--[--><!--]--> Maven <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>常用</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/construct/dubbo.html" class="" aria-label="Dubbo"><!--[--><!--]--> Dubbo <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/construct/mybatis_analyse.html" class="" aria-label="Mybatis源码分析"><!--[--><!--]--> Mybatis源码分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/construct/spring_analyse.html" class="" aria-label="Spring IOC源码分析"><!--[--><!--]--> Spring IOC源码分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/construct/springboot.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Spring Boot 入门"><!--[--><!--]--> Spring Boot 入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/construct/springcloud.html" class="" aria-label="Spring Cloud 入门"><!--[--><!--]--> Spring Cloud 入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/construct/zookeeper.html" class="" aria-label="Zookeeper"><!--[--><!--]--> Zookeeper <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>常用</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/db/elasticsearch.html" class="" aria-label="ElasticSearch"><!--[--><!--]--> ElasticSearch <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/db/mycat.html" class="" aria-label="Mycat"><!--[--><!--]--> Mycat <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/db/mysql.html" class="" aria-label="MYSQL"><!--[--><!--]--> MYSQL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/db/redis.html" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="在线文档"><span class="title">在线文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="在线文档"><span class="title">在线文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端文档</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://cn.vuejs.org/v2/guide/" rel="noopener noreferrer" target="_blank" aria-label="Vue"><!--[--><!--]--> Vue <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://www.antdv.com/docs/vue/introduce-cn/" rel="noopener noreferrer" target="_blank" aria-label="Vue ant design"><!--[--><!--]--> Vue ant design <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://www.kancloud.cn/yunye/axios/234845" rel="noopener noreferrer" target="_blank" aria-label="Axios"><!--[--><!--]--> Axios <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="参考"><span class="title">参考</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="参考"><span class="title">参考</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>VuePress</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/cli.html" class="" aria-label="命令行接口"><!--[--><!--]--> 命令行接口 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/config.html" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/frontmatter.html" class="" aria-label="Frontmatter"><!--[--><!--]--> Frontmatter <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/components.html" class="" aria-label="内置组件"><!--[--><!--]--> 内置组件 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin-api.html" class="" aria-label="插件 API"><!--[--><!--]--> 插件 API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/theme-api.html" class="" aria-label="主题 API"><!--[--><!--]--> 主题 API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/client-api.html" class="" aria-label="客户端 API"><!--[--><!--]--> 客户端 API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/node-api.html" class="" aria-label="Node API"><!--[--><!--]--> Node API <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>打包工具</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/bundler/vite.html" class="" aria-label="Vite"><!--[--><!--]--> Vite <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/bundler/webpack.html" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>默认主题</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/config.html" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/frontmatter.html" class="" aria-label="Frontmatter"><!--[--><!--]--> Frontmatter <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/components.html" class="" aria-label="内置组件"><!--[--><!--]--> 内置组件 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/markdown.html" class="" aria-label="Markdown"><!--[--><!--]--> Markdown <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/styles.html" class="" aria-label="样式"><!--[--><!--]--> 样式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/default-theme/extending.html" class="" aria-label="继承"><!--[--><!--]--> 继承 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="插件"><span class="title">插件</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="插件"><span class="title">插件</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>常用功能</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/back-to-top.html" class="" aria-label="back-to-top"><!--[--><!--]--> back-to-top <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/container.html" class="" aria-label="container"><!--[--><!--]--> container <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/external-link-icon.html" class="" aria-label="external-link-icon"><!--[--><!--]--> external-link-icon <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/google-analytics.html" class="" aria-label="google-analytics"><!--[--><!--]--> google-analytics <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/medium-zoom.html" class="" aria-label="medium-zoom"><!--[--><!--]--> medium-zoom <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/nprogress.html" class="" aria-label="nprogress"><!--[--><!--]--> nprogress <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/register-components.html" class="" aria-label="register-components"><!--[--><!--]--> register-components <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>内容搜索</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/docsearch.html" class="" aria-label="docsearch"><!--[--><!--]--> docsearch <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/search.html" class="" aria-label="search"><!--[--><!--]--> search <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>PWA</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/pwa.html" class="" aria-label="pwa"><!--[--><!--]--> pwa <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/pwa-popup.html" class="" aria-label="pwa-popup"><!--[--><!--]--> pwa-popup <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法高亮</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/prismjs.html" class="" aria-label="prismjs"><!--[--><!--]--> prismjs <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/shiki.html" class="" aria-label="shiki"><!--[--><!--]--> shiki <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>主题开发</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/reference/plugin/active-header-links.html" class="" aria-label="active-header-links"><!--[--><!--]--> active-header-links <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/git.html" class="" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/palette.html" class="" aria-label="palette"><!--[--><!--]--> palette <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/theme-data.html" class="" aria-label="theme-data"><!--[--><!--]--> theme-data <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/reference/plugin/toc.html" class="" aria-label="toc"><!--[--><!--]--> toc <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="了解更多"><span class="title">了解更多</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="了解更多"><span class="title">了解更多</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>深入</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/advanced/architecture.html" class="" aria-label="架构"><!--[--><!--]--> 架构 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/plugin.html" class="" aria-label="开发插件"><!--[--><!--]--> 开发插件 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/theme.html" class="" aria-label="开发主题"><!--[--><!--]--> 开发主题 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/cookbook/" class="" aria-label="Cookbook"><!--[--><!--]--> Cookbook <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其他资源</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/contributing.html" class="" aria-label="贡献指南"><!--[--><!--]--> 贡献指南 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/vuepress/awesome-vuepress" rel="noopener noreferrer" target="_blank" aria-label="Awesome VuePress"><!--[--><!--]--> Awesome VuePress <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="v2.0.0-beta.49"><span class="title">v2.0.0-beta.49</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="v2.0.0-beta.49"><span class="title">v2.0.0-beta.49</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/vuepress/vuepress-next/blob/main/CHANGELOG.md" rel="noopener noreferrer" target="_blank" aria-label="更新日志"><!--[--><!--]--> 更新日志 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://v1.vuepress.vuejs.org/zh/" rel="noopener noreferrer" target="_blank" aria-label="v1.x"><!--[--><!--]--> v1.x <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://v0.vuepress.vuejs.org/zh/" rel="noopener noreferrer" target="_blank" aria-label="v0.x"><!--[--><!--]--> v0.x <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/lonlyz/blog" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">框架 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/construct/dubbo.html" class="sidebar-item" aria-label="Dubbo"><!--[--><!--]--> Dubbo <!--[--><!--]--></a><!----></li><li><a href="/construct/mybatis_analyse.html" class="sidebar-item" aria-label="Mybatis源码分析"><!--[--><!--]--> Mybatis源码分析 <!--[--><!--]--></a><!----></li><li><a href="/construct/spring_analyse.html" class="sidebar-item" aria-label="Spring IOC源码分析"><!--[--><!--]--> Spring IOC源码分析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Spring Boot 入门"><!--[--><!--]--> Spring Boot 入门 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、spring-boot-简介" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、Spring Boot 简介"><!--[--><!--]--> 1、Spring Boot 简介 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、微服务" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、微服务"><!--[--><!--]--> 2、微服务 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、环境准备" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、环境准备"><!--[--><!--]--> 3、环境准备 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、maven设置" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、MAVEN设置；"><!--[--><!--]--> 1、MAVEN设置； <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、idea设置" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、IDEA设置"><!--[--><!--]--> 2、IDEA设置 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_4、spring-boot-helloworld" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、Spring Boot HelloWorld"><!--[--><!--]--> 4、Spring Boot HelloWorld <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、创建一个maven工程-jar" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、创建一个maven工程；（jar）"><!--[--><!--]--> 1、创建一个maven工程；（jar） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、导入spring-boot相关的依赖" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、导入spring boot相关的依赖"><!--[--><!--]--> 2、导入spring boot相关的依赖 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、编写一个主程序-启动spring-boot应用" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、编写一个主程序；启动Spring Boot应用"><!--[--><!--]--> 3、编写一个主程序；启动Spring Boot应用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_4、编写相关的controller、service" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、编写相关的Controller、Service"><!--[--><!--]--> 4、编写相关的Controller、Service <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_5、运行主程序测试" class="router-link-active router-link-exact-active sidebar-item" aria-label="5、运行主程序测试"><!--[--><!--]--> 5、运行主程序测试 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_6、简化部署" class="router-link-active router-link-exact-active sidebar-item" aria-label="6、简化部署"><!--[--><!--]--> 6、简化部署 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_5、hello-world探究" class="router-link-active router-link-exact-active sidebar-item" aria-label="5、Hello World探究"><!--[--><!--]--> 5、Hello World探究 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、pom文件" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、POM文件"><!--[--><!--]--> 1、POM文件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、主程序类-主入口类" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、主程序类，主入口类"><!--[--><!--]--> 2、主程序类，主入口类 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_6、使用spring-initializer快速创建spring-boot项目" class="router-link-active router-link-exact-active sidebar-item" aria-label="6、使用Spring Initializer快速创建Spring Boot项目"><!--[--><!--]--> 6、使用Spring Initializer快速创建Spring Boot项目 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、idea-使用-spring-initializer快速创建项目" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、IDEA：使用 Spring Initializer快速创建项目"><!--[--><!--]--> 1、IDEA：使用 Spring Initializer快速创建项目 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、sts使用-spring-starter-project快速创建项目" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、STS使用 Spring Starter Project快速创建项目"><!--[--><!--]--> 2、STS使用 Spring Starter Project快速创建项目 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_1、配置文件" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、配置文件"><!--[--><!--]--> 1、配置文件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#重要" class="router-link-active router-link-exact-active sidebar-item" aria-label="重要："><!--[--><!--]--> 重要： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、yaml语法" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、YAML语法："><!--[--><!--]--> 2、YAML语法： <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、基本语法" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、基本语法"><!--[--><!--]--> 1、基本语法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、值的写法" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、值的写法"><!--[--><!--]--> 2、值的写法 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_3、配置文件值注入" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、配置文件值注入"><!--[--><!--]--> 3、配置文件值注入 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、随机数" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、随机数"><!--[--><!--]--> 1、随机数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、占位符获取之前配置的值-如果没有可以是用-指定默认值" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、占位符获取之前配置的值，如果没有可以是用:指定默认值"><!--[--><!--]--> 2、占位符获取之前配置的值，如果没有可以是用:指定默认值 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_5、profile" class="router-link-active router-link-exact-active sidebar-item" aria-label="5、Profile"><!--[--><!--]--> 5、Profile <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、多profile文件" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、多Profile文件"><!--[--><!--]--> 1、多Profile文件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、yml支持多文档块方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、yml支持多文档块方式"><!--[--><!--]--> 2、yml支持多文档块方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、激活指定profile" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、激活指定profile"><!--[--><!--]--> 3、激活指定profile <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_6、配置文件加载位置" class="router-link-active router-link-exact-active sidebar-item" aria-label="6、配置文件加载位置"><!--[--><!--]--> 6、配置文件加载位置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_7、外部配置加载顺序" class="router-link-active router-link-exact-active sidebar-item" aria-label="7、外部配置加载顺序"><!--[--><!--]--> 7、外部配置加载顺序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_8、自动配置原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="8、自动配置原理"><!--[--><!--]--> 8、自动配置原理 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、自动配置原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、自动配置原理："><!--[--><!--]--> 1、自动配置原理： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、细节" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、细节"><!--[--><!--]--> 2、细节 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_1、日志框架" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、日志框架"><!--[--><!--]--> 1、日志框架 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、slf4j使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、SLF4j使用"><!--[--><!--]--> 2、SLF4j使用 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、如何在系统中使用slf4j-https-www-slf4j-org" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、如何在系统中使用SLF4j   https://www.slf4j.org"><!--[--><!--]--> 1、如何在系统中使用SLF4j   https://www.slf4j.org <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、遗留问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、遗留问题"><!--[--><!--]--> 2、遗留问题 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_3、springboot日志关系" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、SpringBoot日志关系"><!--[--><!--]--> 3、SpringBoot日志关系 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_4、日志使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、日志使用；"><!--[--><!--]--> 4、日志使用； <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、默认配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、默认配置"><!--[--><!--]--> 1、默认配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、指定配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、指定配置"><!--[--><!--]--> 2、指定配置 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_5、切换日志框架" class="router-link-active router-link-exact-active sidebar-item" aria-label="5、切换日志框架"><!--[--><!--]--> 5、切换日志框架 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_1、简介" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、简介"><!--[--><!--]--> 1、简介 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、springboot对静态资源的映射规则" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、SpringBoot对静态资源的映射规则；"><!--[--><!--]--> 2、SpringBoot对静态资源的映射规则； <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、模板引擎" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、模板引擎"><!--[--><!--]--> 3、模板引擎 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1、引入thymeleaf" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、引入thymeleaf；"><!--[--><!--]--> 1、引入thymeleaf； <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、thymeleaf使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、Thymeleaf使用"><!--[--><!--]--> 2、Thymeleaf使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、语法规则" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、语法规则"><!--[--><!--]--> 3、语法规则 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#springmvc-没有配置默认的国际化-需要自己配置basename-使用resourcebundlemessagesource" class="router-link-active router-link-exact-active sidebar-item" aria-label="springmvc 没有配置默认的国际化，需要自己配置baseName,使用ResourceBundleMessageSource"><!--[--><!--]--> springmvc 没有配置默认的国际化，需要自己配置baseName,使用ResourceBundleMessageSource <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_4、springmvc自动配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、SpringMVC自动配置"><!--[--><!--]--> 4、SpringMVC自动配置 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1-spring-mvc-auto-configuration" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. Spring MVC auto-configuration"><!--[--><!--]--> 1. Spring MVC auto-configuration <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、扩展springmvc" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、扩展SpringMVC"><!--[--><!--]--> 2、扩展SpringMVC <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、全面接管springmvc" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、全面接管SpringMVC；"><!--[--><!--]--> 3、全面接管SpringMVC； <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_5、如何修改springboot的默认配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="5、如何修改SpringBoot的默认配置"><!--[--><!--]--> 5、如何修改SpringBoot的默认配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_6、restfulcrud" class="router-link-active router-link-exact-active sidebar-item" aria-label="6、RestfulCRUD"><!--[--><!--]--> 6、RestfulCRUD <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1-、默认访问首页" class="router-link-active router-link-exact-active sidebar-item" aria-label="1）、默认访问首页"><!--[--><!--]--> 1）、默认访问首页 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2-、国际化" class="router-link-active router-link-exact-active sidebar-item" aria-label="2）、国际化"><!--[--><!--]--> 2）、国际化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3-、登陆" class="router-link-active router-link-exact-active sidebar-item" aria-label="3）、登陆"><!--[--><!--]--> 3）、登陆 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_4-、拦截器进行登陆检查" class="router-link-active router-link-exact-active sidebar-item" aria-label="4）、拦截器进行登陆检查"><!--[--><!--]--> 4）、拦截器进行登陆检查 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_5-、crud-员工列表" class="router-link-active router-link-exact-active sidebar-item" aria-label="5）、CRUD-员工列表"><!--[--><!--]--> 5）、CRUD-员工列表 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_6-、crud-员工添加" class="router-link-active router-link-exact-active sidebar-item" aria-label="6）、CRUD-员工添加"><!--[--><!--]--> 6）、CRUD-员工添加 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_7-、crud-员工修改" class="router-link-active router-link-exact-active sidebar-item" aria-label="7）、CRUD-员工修改"><!--[--><!--]--> 7）、CRUD-员工修改 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_8-、crud-员工删除" class="router-link-active router-link-exact-active sidebar-item" aria-label="8）、CRUD-员工删除"><!--[--><!--]--> 8）、CRUD-员工删除 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_7、错误处理机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="7、错误处理机制"><!--[--><!--]--> 7、错误处理机制 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1-、springboot默认的错误处理机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="1）、SpringBoot默认的错误处理机制"><!--[--><!--]--> 1）、SpringBoot默认的错误处理机制 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2-、如果定制错误响应" class="router-link-active router-link-exact-active sidebar-item" aria-label="2）、如果定制错误响应："><!--[--><!--]--> 2）、如果定制错误响应： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_8、配置嵌入式servlet容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="8、配置嵌入式Servlet容器"><!--[--><!--]--> 8、配置嵌入式Servlet容器 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1-、如何定制和修改servlet容器的相关配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="1）、如何定制和修改Servlet容器的相关配置；"><!--[--><!--]--> 1）、如何定制和修改Servlet容器的相关配置； <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2-、注册servlet三大组件【servlet、filter、listener】" class="router-link-active router-link-exact-active sidebar-item" aria-label="2）、注册Servlet三大组件【Servlet、Filter、Listener】"><!--[--><!--]--> 2）、注册Servlet三大组件【Servlet、Filter、Listener】 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3-、替换为其他嵌入式servlet容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="3）、替换为其他嵌入式Servlet容器"><!--[--><!--]--> 3）、替换为其他嵌入式Servlet容器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_4-、嵌入式servlet容器自动配置原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="4）、嵌入式Servlet容器自动配置原理；"><!--[--><!--]--> 4）、嵌入式Servlet容器自动配置原理； <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_9、使用外置的servlet容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="9、使用外置的Servlet容器"><!--[--><!--]--> 9、使用外置的Servlet容器 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#步骤" class="router-link-active router-link-exact-active sidebar-item" aria-label="步骤"><!--[--><!--]--> 步骤 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="原理"><!--[--><!--]--> 原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#validated" class="router-link-active router-link-exact-active sidebar-item" aria-label="@Validated"><!--[--><!--]--> @Validated <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#initbuilder-对请求的参数可以进行转换。" class="router-link-active router-link-exact-active sidebar-item" aria-label="@InitBuilder: 对请求的参数可以进行转换。"><!--[--><!--]--> @InitBuilder: 对请求的参数可以进行转换。 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_1、简介-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、简介"><!--[--><!--]--> 1、简介 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、核心概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、核心概念"><!--[--><!--]--> 2、核心概念 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、安装docker" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、安装Docker"><!--[--><!--]--> 3、安装Docker <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_4、docker常用命令-操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、Docker常用命令&amp;操作"><!--[--><!--]--> 4、Docker常用命令&amp;操作 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1-、镜像操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="1）、镜像操作"><!--[--><!--]--> 1）、镜像操作 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2-、容器操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="2）、容器操作"><!--[--><!--]--> 2）、容器操作 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3-、安装mysql示例" class="router-link-active router-link-exact-active sidebar-item" aria-label="3）、安装MySQL示例"><!--[--><!--]--> 3）、安装MySQL示例 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_1、jdbc" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、JDBC"><!--[--><!--]--> 1、JDBC <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、整合druid数据源" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、整合Druid数据源"><!--[--><!--]--> 2、整合Druid数据源 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、整合mybatis" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、整合MyBatis"><!--[--><!--]--> 3、整合MyBatis <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_4-、注解版" class="router-link-active router-link-exact-active sidebar-item" aria-label="4）、注解版"><!--[--><!--]--> 4）、注解版 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_5-、配置文件版" class="router-link-active router-link-exact-active sidebar-item" aria-label="5）、配置文件版"><!--[--><!--]--> 5）、配置文件版 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_4、整合springdata-jpa" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、整合SpringData JPA"><!--[--><!--]--> 4、整合SpringData JPA <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#_1-、springdata简介" class="router-link-active router-link-exact-active sidebar-item" aria-label="1）、SpringData简介"><!--[--><!--]--> 1）、SpringData简介 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2-、整合springdata-jpa" class="router-link-active router-link-exact-active sidebar-item" aria-label="2）、整合SpringData JPA"><!--[--><!--]--> 2）、整合SpringData JPA <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#_1、创建springapplication对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、创建SpringApplication对象"><!--[--><!--]--> 1、创建SpringApplication对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_2、运行run方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、运行run方法"><!--[--><!--]--> 2、运行run方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#_3、事件监听机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、事件监听机制"><!--[--><!--]--> 3、事件监听机制 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#spring在容器中注册组建" class="router-link-active router-link-exact-active sidebar-item" aria-label="Spring在容器中注册组建"><!--[--><!--]--> Spring在容器中注册组建 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#缓存注解" class="router-link-active router-link-exact-active sidebar-item" aria-label="缓存注解："><!--[--><!--]--> 缓存注解： <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/construct/springboot.html#步骤-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="步骤："><!--[--><!--]--> 步骤： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/construct/springboot.html#整合redis" class="router-link-active router-link-exact-active sidebar-item" aria-label="整合redis："><!--[--><!--]--> 整合redis： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/construct/springboot.html#注意" class="router-link-active router-link-exact-active sidebar-item" aria-label="注意："><!--[--><!--]--> 注意： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/construct/springcloud.html" class="sidebar-item" aria-label="Spring Cloud 入门"><!--[--><!--]--> Spring Cloud 入门 <!--[--><!--]--></a><!----></li><li><a href="/construct/zookeeper.html" class="sidebar-item" aria-label="Zookeeper"><!--[--><!--]--> Zookeeper <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="spring-boot-入门" tabindex="-1"><a class="header-anchor" href="#spring-boot-入门" aria-hidden="true">#</a> Spring Boot 入门</h1><h2 id="_1、spring-boot-简介" tabindex="-1"><a class="header-anchor" href="#_1、spring-boot-简介" aria-hidden="true">#</a> 1、Spring Boot 简介</h2><blockquote><p>简化Spring应用开发的一个框架；</p><p>整个Spring技术栈的一个大整合；</p><p>J2EE开发的一站式解决方案；</p></blockquote><h2 id="_2、微服务" tabindex="-1"><a class="header-anchor" href="#_2、微服务" aria-hidden="true">#</a> 2、微服务</h2><p>2014，martin fowler</p><p>微服务：架构风格（服务微化）</p><p>一个应用应该是一组小型服务；可以通过HTTP的方式进行互通；</p><p>单体应用：ALL IN ONE</p><p>微服务：每一个功能元素最终都是一个可独立替换和独立升级的软件单元；</p><p><a href="https://martinfowler.com/articles/microservices.html#MicroservicesAndSoa" target="_blank" rel="noopener noreferrer">详细参照微服务文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><h2 id="_3、环境准备" tabindex="-1"><a class="header-anchor" href="#_3、环境准备" aria-hidden="true">#</a> 3、环境准备</h2><p>http://www.gulixueyuan.com/ 谷粒学院</p><p>环境约束</p><p>–jdk1.8：Spring Boot 推荐jdk1.7及以上；java version &quot;1.8.0_112&quot;</p><p>–maven3.x：maven 3.3以上版本；Apache Maven 3.3.9</p><p>–IntelliJIDEA2017：IntelliJ IDEA 2017.2.2 x64、STS</p><p>–SpringBoot 1.5.9.RELEASE：1.5.9；</p><p>统一环境；</p><h3 id="_1、maven设置" tabindex="-1"><a class="header-anchor" href="#_1、maven设置" aria-hidden="true">#</a> 1、MAVEN设置；</h3><p>给maven 的settings.xml配置文件的profiles标签添加</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">profile</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">id</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">jdk-1.8</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">id</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">activation</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">activeByDefault</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">true</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">activeByDefault</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">jdk</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.8</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">jdk</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">activation</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">properties</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">maven.compiler.source</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.8</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">maven.compiler.source</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">maven.compiler.target</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.8</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">maven.compiler.target</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">maven.compiler.compilerVersion</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.8</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">maven.compiler.compilerVersion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">properties</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">profile</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、idea设置" tabindex="-1"><a class="header-anchor" href="#_2、idea设置" aria-hidden="true">#</a> 2、IDEA设置</h3><p>整合maven进来；</p><p><img src="/construct/springboot/搜狗截图20180129151045.png" alt="idea设置"></p><p><img src="/construct/springboot/搜狗截图20180129151112.png" alt="images/"></p><h2 id="_4、spring-boot-helloworld" tabindex="-1"><a class="header-anchor" href="#_4、spring-boot-helloworld" aria-hidden="true">#</a> 4、Spring Boot HelloWorld</h2><p>一个功能：</p><p>浏览器发送hello请求，服务器接受请求并处理，响应Hello World字符串；</p><h3 id="_1、创建一个maven工程-jar" tabindex="-1"><a class="header-anchor" href="#_1、创建一个maven工程-jar" aria-hidden="true">#</a> 1、创建一个maven工程；（jar）</h3><h3 id="_2、导入spring-boot相关的依赖" tabindex="-1"><a class="header-anchor" href="#_2、导入spring-boot相关的依赖" aria-hidden="true">#</a> 2、导入spring boot相关的依赖</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">parent</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-parent</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.5.9.RELEASE</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">parent</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependencies</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-web</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependencies</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、编写一个主程序-启动spring-boot应用" tabindex="-1"><a class="header-anchor" href="#_3、编写一个主程序-启动spring-boot应用" aria-hidden="true">#</a> 3、编写一个主程序；启动Spring Boot应用</h3><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"></span>
<span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;"> *  @SpringBootApplication 来标注一个主程序类，说明这是一个Spring Boot应用</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">SpringBootApplication</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloWorldMainApplication</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">main</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">[] </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">// Spring应用启动起来</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">SpringApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">HelloWorldMainApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">,args);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、编写相关的controller、service" tabindex="-1"><a class="header-anchor" href="#_4、编写相关的controller、service" aria-hidden="true">#</a> 4、编写相关的Controller、Service</h3><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Controller</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloController</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">ResponseBody</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">RequestMapping</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/hello&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">hello</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;Hello World!&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、运行主程序测试" tabindex="-1"><a class="header-anchor" href="#_5、运行主程序测试" aria-hidden="true">#</a> 5、运行主程序测试</h3><h3 id="_6、简化部署" tabindex="-1"><a class="header-anchor" href="#_6、简化部署" aria-hidden="true">#</a> 6、简化部署</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">&lt;!-- 这个插件，可以将应用打包成一个可执行的jar包；--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">build</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">plugins</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">plugin</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-maven-plugin</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">plugin</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">plugins</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">build</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将这个应用打成jar包，直接使用java -jar的命令进行执行；</p><h2 id="_5、hello-world探究" tabindex="-1"><a class="header-anchor" href="#_5、hello-world探究" aria-hidden="true">#</a> 5、Hello World探究</h2><h3 id="_1、pom文件" tabindex="-1"><a class="header-anchor" href="#_1、pom文件" aria-hidden="true">#</a> 1、POM文件</h3><h4 id="_1、父项目" tabindex="-1"><a class="header-anchor" href="#_1、父项目" aria-hidden="true">#</a> 1、父项目</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">parent</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-parent</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.5.9.RELEASE</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">parent</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">他的父项目是</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">parent</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-dependencies</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.5.9.RELEASE</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">relativePath</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">../../spring-boot-dependencies</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">relativePath</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">parent</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">他来真正管理Spring Boot应用里面的所有依赖版本；</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Spring Boot的版本仲裁中心；</p><p>以后我们导入依赖默认是不需要写版本；（没有在dependencies里面管理的依赖自然需要声明版本号）</p><h4 id="_2、启动器" tabindex="-1"><a class="header-anchor" href="#_2、启动器" aria-hidden="true">#</a> 2、启动器</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-web</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>spring-boot-starter</strong>-==web==：</p><p>​ spring-boot-starter：spring-boot场景启动器；帮我们导入了web模块正常运行所依赖的组件；</p><p>Spring Boot将所有的功能场景都抽取出来，做成一个个的starters（启动器），只需要在项目里面引入这些starter相关场景的所有依赖都会导入进来。要用什么功能就导入什么场景的启动器</p><h3 id="_2、主程序类-主入口类" tabindex="-1"><a class="header-anchor" href="#_2、主程序类-主入口类" aria-hidden="true">#</a> 2、主程序类，主入口类</h3><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;"> *  @SpringBootApplication 来标注一个主程序类，说明这是一个Spring Boot应用</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">SpringBootApplication</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloWorldMainApplication</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">main</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">[] </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">// Spring应用启动起来</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">SpringApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">HelloWorldMainApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">,args);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>@<strong>SpringBootApplication</strong>: Spring Boot应用标注在某个类上说明这个类是SpringBoot的主配置类，SpringBoot就应该运行这个类的main方法来启动SpringBoot应用；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Target</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">ElementType</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">TYPE</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Retention</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">RetentionPolicy</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">RUNTIME</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Documented</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Inherited</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">SpringBootConfiguration</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">EnableAutoConfiguration</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ComponentScan</span><span style="color:#D4D4D4;">(excludeFilters = {</span></span>
<span class="line"><span style="color:#D4D4D4;">      @</span><span style="color:#4EC9B0;">Filter</span><span style="color:#D4D4D4;">(type = </span><span style="color:#9CDCFE;">FilterType</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">CUSTOM</span><span style="color:#D4D4D4;">, classes = </span><span style="color:#9CDCFE;">TypeExcludeFilter</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;">      @</span><span style="color:#4EC9B0;">Filter</span><span style="color:#D4D4D4;">(type = </span><span style="color:#9CDCFE;">FilterType</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">CUSTOM</span><span style="color:#D4D4D4;">, classes = </span><span style="color:#9CDCFE;">AutoConfigurationExcludeFilter</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">) })</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> @</span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">SpringBootApplication</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>@<strong>SpringBootConfiguration</strong>:Spring Boot的配置类；</p><p>​ 标注在某个类上，表示这是一个Spring Boot的配置类；</p><p>​ @<strong>Configuration</strong>:配置类上来标注这个注解；</p><p>​ 配置类 ----- 配置文件；配置类也是容器中的一个组件；@Component</p><p>@<strong>EnableAutoConfiguration</strong>：开启自动配置功能；</p><p>​ 以前我们需要配置的东西，Spring Boot帮我们自动配置；@<strong>EnableAutoConfiguration</strong>告诉SpringBoot开启自动配置功能；这样自动配置才能生效；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">AutoConfigurationPackage</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Import</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">EnableAutoConfigurationImportSelector</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> @</span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EnableAutoConfiguration</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ @<strong>AutoConfigurationPackage</strong>：自动配置包</p><p>​ @<strong>Import</strong>(AutoConfigurationPackages.Registrar.class)：</p><p>​ Spring的底层注解@Import，给容器中导入一个组件；导入的组件由AutoConfigurationPackages.Registrar.class；</p><p>==将主配置类（@SpringBootApplication标注的类）的所在包及下面所有子包里面的所有组件扫描到Spring容器；==</p><p>​ @<strong>Import</strong>(EnableAutoConfigurationImportSelector.class)；</p><p>​ 给容器中导入组件？</p><p>​ <strong>EnableAutoConfigurationImportSelector</strong>：导入哪些组件的选择器；</p><p>​ 将所有需要导入的组件以全类名的方式返回；这些组件就会被添加到容器中；</p><p>​ 会给容器中导入非常多的自动配置类（xxxAutoConfiguration）；就是给容器中导入这个场景需要的所有组件，并配置好这些组件； <img src="/construct/springboot/搜狗截图20180129224104.png" alt="自动配置类"></p><p>有了自动配置类，免去了我们手动编写配置注入功能组件等的工作；</p><p>​ SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class,classLoader)；</p><p>==Spring Boot在启动的时候从类路径下的META-INF/spring.factories中获取EnableAutoConfiguration指定的值，将这些值作为自动配置类导入到容器中，自动配置类就生效，帮我们进行自动配置工作；==以前我们需要自己配置的东西，自动配置类都帮我们；</p><p>J2EE的整体整合解决方案和自动配置都在spring-boot-autoconfigure-1.5.9.RELEASE.jar；</p><p>​</p><p>==Spring注解版（谷粒学院）==</p><h2 id="_6、使用spring-initializer快速创建spring-boot项目" tabindex="-1"><a class="header-anchor" href="#_6、使用spring-initializer快速创建spring-boot项目" aria-hidden="true">#</a> 6、使用Spring Initializer快速创建Spring Boot项目</h2><h3 id="_1、idea-使用-spring-initializer快速创建项目" tabindex="-1"><a class="header-anchor" href="#_1、idea-使用-spring-initializer快速创建项目" aria-hidden="true">#</a> 1、IDEA：使用 Spring Initializer快速创建项目</h3><p>IDE都支持使用Spring的项目创建向导快速创建一个Spring Boot项目；</p><p>选择我们需要的模块；向导会联网创建Spring Boot项目；</p><p>默认生成的Spring Boot项目；</p><ul><li>主程序已经生成好了，我们只需要我们自己的逻辑</li><li>resources文件夹中目录结构 <ul><li>static：保存所有的静态资源； js css images；</li><li>templates：保存所有的模板页面；（Spring Boot默认jar包使用嵌入式的Tomcat，默认不支持JSP页面）；可以使用模板引擎（freemarker、thymeleaf）；</li><li>application.properties：Spring Boot应用的配置文件；可以修改一些默认设置；</li></ul></li></ul><h3 id="_2、sts使用-spring-starter-project快速创建项目" tabindex="-1"><a class="header-anchor" href="#_2、sts使用-spring-starter-project快速创建项目" aria-hidden="true">#</a> 2、STS使用 Spring Starter Project快速创建项目</h3><hr><h1 id="二、配置文件" tabindex="-1"><a class="header-anchor" href="#二、配置文件" aria-hidden="true">#</a> 二、配置文件</h1><h2 id="_1、配置文件" tabindex="-1"><a class="header-anchor" href="#_1、配置文件" aria-hidden="true">#</a> 1、配置文件</h2><h2 id="重要" tabindex="-1"><a class="header-anchor" href="#重要" aria-hidden="true">#</a> <strong>重要：</strong></h2><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># properties</span></span>
<span class="line"><span style="color:#D4D4D4;"># 切换profile</span></span>
<span class="line"><span style="color:#D4D4D4;">  # yml有文档块的   ---回车</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 1. 配置文件配置： program argument: spring.profiles.active=dev</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 2. 虚拟机参数：   vm options: -Dspring.profiles.active=dev</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 3. 命令行方式：    java -jar xxx.jar --spring.profiles.active=dev</span></span>
<span class="line"><span style="color:#D4D4D4;"># spring 配置文件的优先级顺序  从高到低  优先级高的会覆盖优先级低的配置文件(会有互补配置，高优先级只覆盖已有的内容)</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 1. file:/config</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 2. file:/</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 3. classpath:/config</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 4. classpath:</span></span>
<span class="line"><span style="color:#D4D4D4;">  # *: 可以使用spring.config.location: 可以是本地磁盘的路径(命令行的方式进行启动)</span></span>
<span class="line"><span style="color:#D4D4D4;">  #     java -jar xxx.jar --spring.config.location=D:/xx.properties</span></span>
<span class="line"><span style="color:#D4D4D4;"># spring 外部配置文件：</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 1. 可以使用命令行的方式对spring的配置进行修改(多个参数用空格隔开)  java -jar xxx.jar --server.port=8088</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 2. 带profiles的比不带profiles的优先级高，jar外的配置文件比jar内的配置优先级高</span></span>
<span class="line"><span style="color:#D4D4D4;"># 日志框架    选用一个日志门面在选用一个日志实现</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 日志门面：slf4j √  jcl(commons-logging) jboss-logging</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 日志实现：</span></span>
<span class="line"><span style="color:#D4D4D4;">          # log4j 存在性能问题</span></span>
<span class="line"><span style="color:#D4D4D4;">          # log4j2 适配的框架比较少(比较强大)</span></span>
<span class="line"><span style="color:#D4D4D4;">          # logback log4j的升级版    选用</span></span>
<span class="line"><span style="color:#D4D4D4;">          # jul(java-utils-logging) 简单实现   logging.properties</span></span>
<span class="line"><span style="color:#D4D4D4;">  # spring 使用jcl springboot使用slf4j+logback</span></span>
<span class="line"><span style="color:#D4D4D4;">  #slf4j的使用 配置文件还是使用日志实现配置文件   log4j 和 jcl 需要引用适配包，适配slf4j的实现。</span></span>
<span class="line"><span style="color:#D4D4D4;">  # 如果系统使用很多不同类型的日志框架  可以查看slf4j的官方文档 找到替换包 替换 其它的日志框架。在pom中移除。</span></span>
<span class="line"><span style="color:#D4D4D4;">  # springboot日志整合： springboot已经引入了中间包去统一日志框架。如果需要引入其它框架，需要excustions 掉包含日志的依赖。</span></span>
<span class="line"><span style="color:#D4D4D4;">  # springboot默认的日志级别是info及以上高级别。   日志级别由低到高：</span></span>
<span class="line"><span style="color:#D4D4D4;">  # trace(跟踪)&lt;debug&lt;info&lt;warn&lt;error   可以在配置文件中logging.level.包名=trace 没设置的使用默认(root)</span></span>
<span class="line"><span style="color:#D4D4D4;">    # 只设置logging-file: (文件名)当前项目下生成日志文件   也可以使用完整路径</span></span>
<span class="line"><span style="color:#D4D4D4;">    # 只设置logging-path: /spring/log (当前项目的此版根路径创建spring和log文件夹，名称默认为spring.log) 常用</span></span>
<span class="line"><span style="color:#D4D4D4;">    # 如果同时设置logging-file和logging-path，logging-file起作用</span></span>
<span class="line"><span style="color:#D4D4D4;">    # logging.pattern.console=/logging.pattern.console=  设置日志的输出格式   </span><span style="color:#6A9955;">%-5从左显示5个字符</span></span>
<span class="line"><span style="color:#D4D4D4;">      #</span><span style="color:#6A9955;">%m 输出代码中指定的消息</span></span>
<span class="line"><span style="color:#D4D4D4;">      #</span><span style="color:#6A9955;">%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL</span></span>
<span class="line"><span style="color:#D4D4D4;">      #</span><span style="color:#6A9955;">%r 输出自应用启动到输出该log信息耗费的毫秒数</span></span>
<span class="line"><span style="color:#D4D4D4;">      #</span><span style="color:#6A9955;">%c 输出所属的类目，通常就是所在类的全名</span></span>
<span class="line"><span style="color:#D4D4D4;">      #</span><span style="color:#6A9955;">%t 输出产生该日志事件的线程名</span></span>
<span class="line"><span style="color:#D4D4D4;">      #</span><span style="color:#6A9955;">%n 输出一个回车换行符，Windows平台为“\r\n”，Unix平台为“\n”</span></span>
<span class="line"><span style="color:#D4D4D4;">      #</span><span style="color:#6A9955;">%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy MMM dd HH:mm:ss,SSS}，</span></span>
<span class="line"><span style="color:#D4D4D4;">      # 输出类似：2002年10月18日 22：10：28，921</span></span>
<span class="line"><span style="color:#D4D4D4;">      #</span><span style="color:#6A9955;">%l 输出日志事件的发生位置，包括类目名、发生的线程，以及在代码中的行数。举例：Testlog4.main(TestLog4.java:10)</span></span>
<span class="line"><span style="color:#D4D4D4;">    # 指定配置文件：</span></span>
<span class="line"><span style="color:#D4D4D4;">      # logback.xml： 直接被日志框架识别，绕过springboot。</span></span>
<span class="line"><span style="color:#D4D4D4;">      # logback-spring.xml：由springboot加载。可以使用高级功能，在配置文件中可以使用&lt;springProfile name=&#39;dev/prod&#39;&gt; 配置环境下不同的日志级别</span></span>
<span class="line"><span style="color:#D4D4D4;">    # 切换日志框架： 可以根据日志适配图，将其它的日志框架移除，引入新的日志框架。</span></span>
<span class="line"><span style="color:#D4D4D4;">      # 切换log4j2。 排除掉start-web的start-logging,引入start-log4j2   配置文件：log4j2.xml/log4j2-spring.xml</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot使用一个全局的配置文件，配置文件名是固定的；</p><p>•application.properties</p><p>•application.yml</p><p>配置文件的作用：修改SpringBoot自动配置的默认值；SpringBoot在底层都给我们自动配置好；</p><p>YAML（YAML Ain&#39;t Markup Language）</p><p>​ YAML A Markup Language：是一个标记语言</p><p>​ YAML isn&#39;t Markup Language：不是一个标记语言；</p><p>标记语言：</p><p>​ 以前的配置文件；大多都使用的是 <strong>xxxx.xml</strong>文件；</p><p>​ YAML：<strong>以数据为中心</strong>，比json、xml等更适合做配置文件；</p><p>​ YAML：配置例子</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">port</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">8081</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>​ XML：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">server</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">port</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">8081</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">port</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">server</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2、yaml语法" tabindex="-1"><a class="header-anchor" href="#_2、yaml语法" aria-hidden="true">#</a> 2、YAML语法：</h2><h3 id="_1、基本语法" tabindex="-1"><a class="header-anchor" href="#_1、基本语法" aria-hidden="true">#</a> 1、基本语法</h3><p>k:(空格)v：表示一对键值对（空格必须有）；</p><p>以<strong>空格</strong>的缩进来控制层级关系；只要是左对齐的一列数据，都是同一个层级的</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">port</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">8081</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">path</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">/hello</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>属性和值也是大小写敏感；</p><h3 id="_2、值的写法" tabindex="-1"><a class="header-anchor" href="#_2、值的写法" aria-hidden="true">#</a> 2、值的写法</h3><h4 id="字面量-普通的值-数字-字符串-布尔" tabindex="-1"><a class="header-anchor" href="#字面量-普通的值-数字-字符串-布尔" aria-hidden="true">#</a> 字面量：普通的值（数字，字符串，布尔）</h4><p>​ k: v：字面直接来写；</p><p>​ 字符串默认不用加上单引号或者双引号；</p><p>​ &quot;&quot;：双引号；不会转义字符串里面的特殊字符；特殊字符会作为本身想表示的意思</p><p>​ name: &quot;zhangsan \n lisi&quot;：输出；zhangsan 换行 lisi</p><p>​ &#39;&#39;：单引号；会转义特殊字符，特殊字符最终只是一个普通的字符串数据</p><p>​ name: ‘zhangsan \n lisi’：输出；zhangsan \n lisi</p><h4 id="对象、map-属性和值-键值对" tabindex="-1"><a class="header-anchor" href="#对象、map-属性和值-键值对" aria-hidden="true">#</a> 对象、Map（属性和值）（键值对）：</h4><p>​ k: v：在下一行来写对象的属性和值的关系；注意缩进</p><p>​ 对象还是k: v的方式</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">friends</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">lastName</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">zhangsan</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">age</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">20</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>行内写法：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">friends</span><span style="color:#D4D4D4;">: {</span><span style="color:#569CD6;">lastName</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">zhangsan</span><span style="color:#D4D4D4;">,</span><span style="color:#569CD6;">age</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">18</span><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="数组-list、set" tabindex="-1"><a class="header-anchor" href="#数组-list、set" aria-hidden="true">#</a> 数组（List、Set）：</h4><p>用- 值表示数组中的一个元素</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">pets</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;"> - </span><span style="color:#CE9178;">cat</span></span>
<span class="line"><span style="color:#D4D4D4;"> - </span><span style="color:#CE9178;">dog</span></span>
<span class="line"><span style="color:#D4D4D4;"> - </span><span style="color:#CE9178;">pig</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>行内写法</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">pets</span><span style="color:#D4D4D4;">: [</span><span style="color:#CE9178;">cat</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">dog</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">pig</span><span style="color:#D4D4D4;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3、配置文件值注入" tabindex="-1"><a class="header-anchor" href="#_3、配置文件值注入" aria-hidden="true">#</a> 3、配置文件值注入</h2><p>配置文件</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">person</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">lastName</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">hello</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">age</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">18</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">boss</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">false</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">birth</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">2017/12/12</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">maps</span><span style="color:#D4D4D4;">: {</span><span style="color:#569CD6;">k1</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">v1</span><span style="color:#D4D4D4;">,</span><span style="color:#569CD6;">k2</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">12</span><span style="color:#D4D4D4;">}</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">lists</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">lisi</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">zhaoliu</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">dog</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">name</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">小狗</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">age</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">12</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>javaBean：</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;"> * 将配置文件中配置的每一个属性的值，映射到这个组件中</span></span>
<span class="line"><span style="color:#6A9955;"> * @ConfigurationProperties：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定；</span></span>
<span class="line"><span style="color:#6A9955;"> *      prefix = &quot;person&quot;：配置文件中哪个下面的所有属性进行一一映射</span></span>
<span class="line"><span style="color:#6A9955;"> *</span></span>
<span class="line"><span style="color:#6A9955;"> * 只有这个组件是容器中的组件，才能容器提供的@ConfigurationProperties功能；</span></span>
<span class="line"><span style="color:#6A9955;"> *</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Component</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;person&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Person</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">lastName</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Integer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">age</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Boolean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">boss</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Date</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">birth</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">,</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">maps</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">List</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">lists</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Dog</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">dog</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以导入配置文件处理器，以后编写配置就有提示了</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">&lt;!--导入配置文件处理器，配置文件进行绑定就会有提示--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-configuration-processor</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">optional</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">true</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">optional</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1、properties配置文件在idea中默认utf-8可能会乱码" tabindex="-1"><a class="header-anchor" href="#_1、properties配置文件在idea中默认utf-8可能会乱码" aria-hidden="true">#</a> 1、properties配置文件在idea中默认utf-8可能会乱码</h4><p>调整</p><p><img src="/construct/springboot/搜狗截图20180130161620.png" alt="idea配置乱码"></p><h4 id="_2、-value获取值和-configurationproperties获取值比较" tabindex="-1"><a class="header-anchor" href="#_2、-value获取值和-configurationproperties获取值比较" aria-hidden="true">#</a> 2、@Value获取值和@ConfigurationProperties获取值比较</h4><table><thead><tr><th></th><th>@ConfigurationProperties</th><th>@Value</th></tr></thead><tbody><tr><td>功能</td><td>批量注入配置文件中的属性</td><td>一个个指定</td></tr><tr><td>松散绑定（松散语法）</td><td>支持</td><td>不支持</td></tr><tr><td>SpEL</td><td>不支持</td><td>支持</td></tr><tr><td>JSR303数据校验</td><td>支持</td><td>不支持</td></tr><tr><td>复杂类型封装</td><td>支持</td><td>不支持</td></tr></tbody></table><p>配置文件yml还是properties他们都能获取到值；</p><p>如果说，我们只是在某个业务逻辑中需要获取一下配置文件中的某项值，使用@Value；</p><p>如果说，我们专门编写了一个javaBean来和配置文件进行映射，我们就直接使用@ConfigurationProperties；</p><h4 id="_3、配置文件注入值数据校验" tabindex="-1"><a class="header-anchor" href="#_3、配置文件注入值数据校验" aria-hidden="true">#</a> 3、配置文件注入值数据校验</h4><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Component</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;person&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Validated</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Person</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;">     * &lt;bean class=&quot;Person&quot;&gt;</span></span>
<span class="line"><span style="color:#6A9955;">     *      &lt;property name=&quot;lastName&quot; value=&quot;字面量/${key}从环境变量、配置文件中获取值/#{SpEL}&quot;&gt;&lt;/property&gt;</span></span>
<span class="line"><span style="color:#6A9955;">     * &lt;bean/&gt;</span></span>
<span class="line"><span style="color:#6A9955;">     */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">//lastName必须是邮箱格式</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Email</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//@Value(&quot;${person.last-name}&quot;)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">lastName</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//@Value(&quot;#{11*2}&quot;)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Integer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">age</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//@Value(&quot;true&quot;)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Boolean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">boss</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Date</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">birth</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">,</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">maps</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">List</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">lists</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Dog</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">dog</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4、-propertysource-importresource-bean" tabindex="-1"><a class="header-anchor" href="#_4、-propertysource-importresource-bean" aria-hidden="true">#</a> 4、@PropertySource&amp;@ImportResource&amp;@Bean</h4><p>@<strong>PropertySource</strong>：加载指定的配置文件；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;"> * 将配置文件中配置的每一个属性的值，映射到这个组件中</span></span>
<span class="line"><span style="color:#6A9955;"> * @ConfigurationProperties：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定；</span></span>
<span class="line"><span style="color:#6A9955;"> *      prefix = &quot;person&quot;：配置文件中哪个下面的所有属性进行一一映射</span></span>
<span class="line"><span style="color:#6A9955;"> *</span></span>
<span class="line"><span style="color:#6A9955;"> * 只有这个组件是容器中的组件，才能容器提供的@ConfigurationProperties功能；</span></span>
<span class="line"><span style="color:#6A9955;"> *  @ConfigurationProperties(prefix = &quot;person&quot;)默认从全局配置文件中获取值；</span></span>
<span class="line"><span style="color:#6A9955;"> *</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">PropertySource</span><span style="color:#D4D4D4;">(value = {</span><span style="color:#CE9178;">&quot;classpath:person.properties&quot;</span><span style="color:#D4D4D4;">})</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Component</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;person&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#6A9955;">//@Validated</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Person</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;">     * &lt;bean class=&quot;Person&quot;&gt;</span></span>
<span class="line"><span style="color:#6A9955;">     *      &lt;property name=&quot;lastName&quot; value=&quot;字面量/${key}从环境变量、配置文件中获取值/#{SpEL}&quot;&gt;&lt;/property&gt;</span></span>
<span class="line"><span style="color:#6A9955;">     * &lt;bean/&gt;</span></span>
<span class="line"><span style="color:#6A9955;">     */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">//lastName必须是邮箱格式</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">// @Email</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//@Value(&quot;${person.last-name}&quot;)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">lastName</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//@Value(&quot;#{11*2}&quot;)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Integer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">age</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//@Value(&quot;true&quot;)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Boolean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">boss</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>@<strong>ImportResource</strong>：导入Spring的配置文件，让配置文件里面的内容生效；</p><p>Spring Boot里面没有Spring的配置文件，我们自己编写的配置文件，也不能自动识别；</p><p>想让Spring的配置文件生效，加载进来；@<strong>ImportResource</strong>标注在一个配置类上</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ImportResource</span><span style="color:#D4D4D4;">(locations = {</span><span style="color:#CE9178;">&quot;classpath:beans.xml&quot;</span><span style="color:#D4D4D4;">})</span></span>
<span class="line"><span style="color:#D4D4D4;">导入Spring的配置文件让其生效</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>不来编写Spring的配置文件</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;?</span><span style="color:#569CD6;">xml</span><span style="color:#9CDCFE;"> version</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;1.0&quot;</span><span style="color:#9CDCFE;"> encoding</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;UTF-8&quot;</span><span style="color:#808080;">?&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">beans</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">xmlns</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.springframework.org/schema/beans&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#9CDCFE;">xmlns:xsi</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#9CDCFE;">xsi:schemaLocation</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">bean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;helloService&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;com.atguigu.springboot.service.HelloService&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">bean</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">beans</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot推荐给容器中添加组件的方式；推荐使用全注解的方式</p><p>1、配置类**@Configuration**------&gt;Spring配置文件</p><p>2、使用**@Bean**给容器中添加组件</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;"> * @Configuration：指明当前类是一个配置类；就是来替代之前的Spring配置文件</span></span>
<span class="line"><span style="color:#6A9955;"> *</span></span>
<span class="line"><span style="color:#6A9955;"> * 在配置文件中用&lt;bean&gt;&lt;bean/&gt;标签添加组件</span></span>
<span class="line"><span style="color:#6A9955;"> *</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyAppConfig</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//将方法的返回值添加到容器中；容器中这个组件默认的id就是方法名</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloService</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">helloService02</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;配置类@Bean给容器中添加组件了...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">HelloService</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>##4、配置文件占位符</p><h3 id="_1、随机数" tabindex="-1"><a class="header-anchor" href="#_1、随机数" aria-hidden="true">#</a> 1、随机数</h3><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">${</span><span style="color:#9CDCFE;">random</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">}、${</span><span style="color:#9CDCFE;">random</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">int</span><span style="color:#D4D4D4;">}、${</span><span style="color:#9CDCFE;">random</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">long</span><span style="color:#D4D4D4;">}</span></span>
<span class="line"><span style="color:#D4D4D4;">${</span><span style="color:#9CDCFE;">random</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">int</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;">)}、${</span><span style="color:#9CDCFE;">random</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">int</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">1024</span><span style="color:#D4D4D4;">,</span><span style="color:#B5CEA8;">65536</span><span style="color:#D4D4D4;">]}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、占位符获取之前配置的值-如果没有可以是用-指定默认值" tabindex="-1"><a class="header-anchor" href="#_2、占位符获取之前配置的值-如果没有可以是用-指定默认值" aria-hidden="true">#</a> 2、占位符获取之前配置的值，如果没有可以是用:指定默认值</h3><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># properties</span></span>
<span class="line"><span style="color:#D4D4D4;">person.last-name=张三</span><span style="color:#4EC9B0;">$</span><span style="color:#4EC9B0;">{random.uuid}</span></span>
<span class="line"><span style="color:#4EC9B0;">person.age=</span><span style="color:#4EC9B0;">$</span><span style="color:#D4D4D4;">{random.int}</span></span>
<span class="line"><span style="color:#D4D4D4;">person.birth=2017/12/15</span></span>
<span class="line"><span style="color:#D4D4D4;">person.boss=false</span></span>
<span class="line"><span style="color:#D4D4D4;">person.maps.k1=v1</span></span>
<span class="line"><span style="color:#D4D4D4;">person.maps.k2=14</span></span>
<span class="line"><span style="color:#D4D4D4;">person.lists=a,b,c</span></span>
<span class="line"><span style="color:#D4D4D4;">person.dog.name=</span><span style="color:#4EC9B0;">$</span><span style="color:#4EC9B0;">{person.hello:hello}_dog</span></span>
<span class="line"><span style="color:#4EC9B0;">person.dog.age=</span><span style="color:#B5CEA8;">15</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5、profile" tabindex="-1"><a class="header-anchor" href="#_5、profile" aria-hidden="true">#</a> 5、Profile</h2><h3 id="_1、多profile文件" tabindex="-1"><a class="header-anchor" href="#_1、多profile文件" aria-hidden="true">#</a> 1、多Profile文件</h3><p>我们在主配置文件编写的时候，文件名可以是 application-{profile}.properties/yml</p><p>默认使用application.properties的配置；</p><h3 id="_2、yml支持多文档块方式" tabindex="-1"><a class="header-anchor" href="#_2、yml支持多文档块方式" aria-hidden="true">#</a> 2、yml支持多文档块方式</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"></span>
<span class="line"><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">port</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">8081</span></span>
<span class="line"><span style="color:#569CD6;">spring</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">profiles</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">active</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">prod</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">---</span></span>
<span class="line"><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">port</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">8083</span></span>
<span class="line"><span style="color:#569CD6;">spring</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">profiles</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">dev</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">---</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">port</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">8084</span></span>
<span class="line"><span style="color:#569CD6;">spring</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">profiles</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">prod</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">#指定属于哪个环境</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、激活指定profile" tabindex="-1"><a class="header-anchor" href="#_3、激活指定profile" aria-hidden="true">#</a> 3、激活指定profile</h3><p>​ 1、在配置文件中指定 spring.profiles.active=dev</p><p>​ 2、命令行：</p><p>​ java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev；</p><p>​ 可以直接在测试的时候，配置传入命令行参数</p><p>​ 3、虚拟机参数；</p><p>​ -Dspring.profiles.active=dev</p><h2 id="_6、配置文件加载位置" tabindex="-1"><a class="header-anchor" href="#_6、配置文件加载位置" aria-hidden="true">#</a> 6、配置文件加载位置</h2><p>springboot 启动会扫描以下位置的application.properties或者application.yml文件作为Spring boot的默认配置文件</p><p>–file:./config/</p><p>–file:./</p><p>–classpath:/config/</p><p>–classpath:/</p><p>优先级由高到底，高优先级的配置会覆盖低优先级的配置；</p><p>SpringBoot会从这四个位置全部加载主配置文件；<strong>互补配置</strong>；</p><p>==我们还可以通过spring.config.location来改变默认的配置文件位置==</p><p><strong>项目打包好以后，我们可以使用命令行参数的形式，启动项目的时候来指定配置文件的新位置；指定配置文件和默认加载的这些配置文件共同起作用形成互补配置；</strong></p><p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --spring.config.location=G:/application.properties</p><h2 id="_7、外部配置加载顺序" tabindex="-1"><a class="header-anchor" href="#_7、外部配置加载顺序" aria-hidden="true">#</a> 7、外部配置加载顺序</h2><p><strong>==SpringBoot也可以从以下位置加载配置； 优先级从高到低；高优先级的配置覆盖低优先级的配置，所有的配置会形成互补配置==</strong></p><p><strong>1.命令行参数</strong></p><p>所有的配置都可以在命令行上进行指定</p><p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --server.port=8087 --server.context-path=/abc</p><p>多个配置用空格分开； --配置项=值</p><p>2.来自java:comp/env的JNDI属性</p><p>3.Java系统属性（System.getProperties()）</p><p>4.操作系统环境变量</p><p>5.RandomValuePropertySource配置的random.*属性值</p><p>==<strong>由jar包外向jar包内进行寻找；</strong>==</p><p>==<strong>优先加载带profile</strong>==</p><p><strong>6.jar包外部的application-{profile}.properties或application.yml(带spring.profile)配置文件</strong></p><p><strong>7.jar包内部的application-{profile}.properties或application.yml(带spring.profile)配置文件</strong></p><p>==<strong>再来加载不带profile</strong>==</p><p><strong>8.jar包外部的application.properties或application.yml(不带spring.profile)配置文件</strong></p><p><strong>9.jar包内部的application.properties或application.yml(不带spring.profile)配置文件</strong></p><p>10.@Configuration注解类上的@PropertySource</p><p>11.通过SpringApplication.setDefaultProperties指定的默认属性</p><p>所有支持的配置加载来源；</p><p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#boot-features-external-config" target="_blank" rel="noopener noreferrer">参考官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><h2 id="_8、自动配置原理" tabindex="-1"><a class="header-anchor" href="#_8、自动配置原理" aria-hidden="true">#</a> 8、自动配置原理</h2><p>配置文件到底能写什么？怎么写？自动配置原理；</p><p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#common-application-properties" target="_blank" rel="noopener noreferrer">配置文件能配置的属性参照<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><h3 id="_1、自动配置原理" tabindex="-1"><a class="header-anchor" href="#_1、自动配置原理" aria-hidden="true">#</a> 1、<strong>自动配置原理：</strong></h3><p>1）、SpringBoot启动的时候加载主配置类，开启了自动配置功能 ==@EnableAutoConfiguration==</p><p><strong>2）、@EnableAutoConfiguration 作用：</strong></p><ul><li><p>利用EnableAutoConfigurationImportSelector给容器中导入一些组件？</p></li><li><p>可以查看selectImports()方法的内容；</p></li><li><p><code>List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);</code>获取候选的配置</p><ul><li><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#9CDCFE;">SpringFactoriesLoader</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">loadFactoryNames</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;">扫描所有jar包类路径下  META-INF/</span><span style="color:#9CDCFE;">spring</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">factories</span></span>
<span class="line"><span style="color:#D4D4D4;">把扫描到的这些文件的内容包装成properties对象</span></span>
<span class="line"><span style="color:#D4D4D4;">从properties中获取到EnableAutoConfiguration.</span><span style="color:#9CDCFE;">class类</span><span style="color:#D4D4D4;">（类名）对应的值，然后把他们添加在容器中</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><p><strong>==将 类路径下 META-INF/spring.factories 里面配置的所有EnableAutoConfiguration的值加入到了容器中；==</strong></p><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># properties</span></span>
<span class="line"><span style="color:#D4D4D4;"># Auto Configure</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.EnableAutoConfiguration=</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.mobile.DeviceResolverAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.mobile.DeviceDelegatingViewResolverAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.mobile.SitePreferenceAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.reactor.ReactorAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.security.FallbackWebSecurityAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.security.oauth2.OAuth2AutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.social.SocialWebAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.social.FacebookAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.social.LinkedInAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.social.TwitterAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每一个这样的 xxxAutoConfiguration类都是容器中的一个组件，都加入到容器中；用他们来做自动配置；</p><p>3）、每一个自动配置类进行自动配置功能；</p><p>4）、以**HttpEncodingAutoConfiguration（Http编码自动配置）**为例解释自动配置原理；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">//表示这是一个配置类，以前编写的配置文件一样，也可以给容器中添加组件</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">EnableConfigurationProperties</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">HttpEncodingProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)  </span><span style="color:#6A9955;">//启动指定类的ConfigurationProperties功能；将配置文件中对应的值和HttpEncodingProperties绑定起来；并把HttpEncodingProperties加入到ioc容器中</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnWebApplication</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">//Spring底层@Conditional注解（Spring注解版），根据不同的条件，如果满足指定的条件，整个配置类里面的配置就会生效；    判断当前应用是否是web应用，如果是，当前配置类生效</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnClass</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">CharacterEncodingFilter</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)  </span><span style="color:#6A9955;">//判断当前项目有没有这个类CharacterEncodingFilter；SpringMVC中进行乱码解决的过滤器；</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnProperty</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;spring.http.encoding&quot;</span><span style="color:#D4D4D4;">, value = </span><span style="color:#CE9178;">&quot;enabled&quot;</span><span style="color:#D4D4D4;">, matchIfMissing = </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">)  </span><span style="color:#6A9955;">//判断配置文件中是否存在某个配置  spring.http.encoding.enabled；如果不存在，判断也是成立的</span></span>
<span class="line"><span style="color:#6A9955;">//即使我们配置文件中不配置pring.http.encoding.enabled=true，也是默认生效的；</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HttpEncodingAutoConfiguration</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span></span>
<span class="line"><span style="color:#D4D4D4;">  	</span><span style="color:#6A9955;">//他已经和SpringBoot的配置文件映射了</span></span>
<span class="line"><span style="color:#D4D4D4;">  	</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HttpEncodingProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">//只有一个有参构造器的情况下，参数的值就会从容器中拿 	     //使用@EnableConfigurationProperties(HttpEncodingProperties.class)</span></span>
<span class="line"><span style="color:#D4D4D4;">  	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">HttpEncodingAutoConfiguration</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpEncodingProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;"> = properties;</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">//给容器中添加一个组件，这个组件的某些值需要从properties中获取</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ConditionalOnMissingBean</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">CharacterEncodingFilter</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">) </span><span style="color:#6A9955;">//判断容器没有这个组件？</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">CharacterEncodingFilter</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">characterEncodingFilter</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">CharacterEncodingFilter</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">filter</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">OrderedCharacterEncodingFilter</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">filter</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setEncoding</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getCharset</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">name</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">filter</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setForceRequestEncoding</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">shouldForce</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Type</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">REQUEST</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">filter</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setForceResponseEncoding</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">shouldForce</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Type</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">RESPONSE</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> filter;</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>根据当前不同的条件判断，决定这个配置类是否生效？</p><p>一但这个配置类生效；这个配置类就会给容器中添加各种组件；这些组件的属性是从对应的properties类中获取的，这些类里面的每一个属性又是和配置文件绑定的；</p><p>5）、所有在配置文件中能配置的属性都是在xxxxProperties类中封装者‘；配置文件能配置什么就可以参照某个功能对应的这个属性类</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;spring.http.encoding&quot;</span><span style="color:#D4D4D4;">)  </span><span style="color:#6A9955;">//从配置文件中获取指定的值和bean的属性进行绑定</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HttpEncodingProperties</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Charset</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">DEFAULT_CHARSET</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">Charset</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">forName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;UTF-8&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>精髓：</strong></p><p>​ <strong>1）、SpringBoot启动会加载大量的自动配置类</strong></p><p>​ <strong>2）、我们看我们需要的功能有没有SpringBoot默认写好的自动配置类；</strong></p><p>​ <strong>3）、我们再来看这个自动配置类中到底配置了哪些组件；（只要我们要用的组件有，我们就不需要再来配置了）</strong></p><p>​ <strong>4）、给容器中自动配置类添加组件的时候，会从properties类中获取某些属性。我们就可以在配置文件中指定这些属性的值；</strong></p><p>xxxxAutoConfigurartion：自动配置类；</p><p>给容器中添加组件</p><p>xxxxProperties:封装配置文件中相关属性；</p><h3 id="_2、细节" tabindex="-1"><a class="header-anchor" href="#_2、细节" aria-hidden="true">#</a> 2、细节</h3><h4 id="_1、-conditional派生注解-spring注解版原生的-conditional作用" tabindex="-1"><a class="header-anchor" href="#_1、-conditional派生注解-spring注解版原生的-conditional作用" aria-hidden="true">#</a> 1、@Conditional派生注解（Spring注解版原生的@Conditional作用）</h4><p>作用：必须是@Conditional指定的条件成立，才给容器中添加组件，配置配里面的所有内容才生效；</p><table><thead><tr><th>@Conditional扩展注解</th><th>作用（判断是否满足当前指定条件）</th></tr></thead><tbody><tr><td>@ConditionalOnJava</td><td>系统的java版本是否符合要求</td></tr><tr><td>@ConditionalOnBean</td><td>容器中存在指定Bean；</td></tr><tr><td>@ConditionalOnMissingBean</td><td>容器中不存在指定Bean；</td></tr><tr><td>@ConditionalOnExpression</td><td>满足SpEL表达式指定</td></tr><tr><td>@ConditionalOnClass</td><td>系统中有指定的类</td></tr><tr><td>@ConditionalOnMissingClass</td><td>系统中没有指定的类</td></tr><tr><td>@ConditionalOnSingleCandidate</td><td>容器中只有一个指定的Bean，或者这个Bean是首选Bean</td></tr><tr><td>@ConditionalOnProperty</td><td>系统中指定的属性是否有指定的值</td></tr><tr><td>@ConditionalOnResource</td><td>类路径下是否存在指定资源文件</td></tr><tr><td>@ConditionalOnWebApplication</td><td>当前是web环境</td></tr><tr><td>@ConditionalOnNotWebApplication</td><td>当前不是web环境</td></tr><tr><td>@ConditionalOnJndi</td><td>JNDI存在指定项</td></tr></tbody></table><p><strong>自动配置类必须在一定的条件下才能生效；</strong></p><p>我们怎么知道哪些自动配置类生效；</p><p><strong>==我们可以通过启用 debug=true属性；来让控制台打印自动配置报告==</strong>，这样我们就可以很方便的知道哪些自动配置类生效；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">=========================</span></span>
<span class="line"><span style="color:#D4D4D4;">AUTO-</span><span style="color:#4EC9B0;">CONFIGURATION</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">REPORT</span></span>
<span class="line"><span style="color:#D4D4D4;">=========================</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#4EC9B0;">Positive</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">matches</span><span style="color:#C586C0;">:</span><span style="color:#D4D4D4;">（自动配置类启用的）</span></span>
<span class="line"><span style="color:#D4D4D4;">-----------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">DispatcherServletAutoConfiguration</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">matched</span><span style="color:#C586C0;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      - @</span><span style="color:#4EC9B0;">ConditionalOnClass</span><span style="color:#D4D4D4;"> found required class </span><span style="color:#CE9178;">&#39;org.springframework.web.servlet.DispatcherServlet&#39;</span><span style="color:#D4D4D4;">; @</span><span style="color:#4EC9B0;">ConditionalOnMissingClass</span><span style="color:#D4D4D4;"> did not find unwanted </span><span style="color:#DCDCAA;">class</span><span style="color:#D4D4D4;"> (OnClassCondition)</span></span>
<span class="line"><span style="color:#D4D4D4;">      - @</span><span style="color:#4EC9B0;">ConditionalOnWebApplication</span><span style="color:#D4D4D4;"> (required) found </span><span style="color:#DCDCAA;">StandardServletEnvironment</span><span style="color:#D4D4D4;"> (OnWebApplicationCondition)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#4EC9B0;">Negative</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">matches</span><span style="color:#C586C0;">:</span><span style="color:#D4D4D4;">（没有启动，没有匹配成功的自动配置类）</span></span>
<span class="line"><span style="color:#D4D4D4;">-----------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   ActiveMQAutoConfiguration</span><span style="color:#C586C0;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">Did</span><span style="color:#D4D4D4;"> not </span><span style="color:#9CDCFE;">match</span><span style="color:#C586C0;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">         - @</span><span style="color:#4EC9B0;">ConditionalOnClass</span><span style="color:#D4D4D4;"> did not find required classes </span><span style="color:#CE9178;">&#39;javax.jms.ConnectionFactory&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;org.apache.activemq.ActiveMQConnectionFactory&#39;</span><span style="color:#D4D4D4;"> (OnClassCondition)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   AopAutoConfiguration</span><span style="color:#C586C0;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">Did</span><span style="color:#D4D4D4;"> not </span><span style="color:#9CDCFE;">match</span><span style="color:#C586C0;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">         - @</span><span style="color:#4EC9B0;">ConditionalOnClass</span><span style="color:#D4D4D4;"> did not find required classes </span><span style="color:#CE9178;">&#39;org.aspectj.lang.annotation.Aspect&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;org.aspectj.lang.reflect.Advice&#39;</span><span style="color:#D4D4D4;"> (OnClassCondition)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="三、日志" tabindex="-1"><a class="header-anchor" href="#三、日志" aria-hidden="true">#</a> 三、日志</h1><h2 id="_1、日志框架" tabindex="-1"><a class="header-anchor" href="#_1、日志框架" aria-hidden="true">#</a> 1、日志框架</h2><p>小张；开发一个大型系统；</p><p>​ 1、System.out.println(&quot;&quot;)；将关键数据打印在控制台；去掉？写在一个文件？</p><p>​ 2、框架来记录系统的一些运行时信息；日志框架 ； zhanglogging.jar；</p><p>​ 3、高大上的几个功能？异步模式？自动归档？xxxx？ zhanglogging-good.jar？</p><p>​ 4、将以前框架卸下来？换上新的框架，重新修改之前相关的API；zhanglogging-prefect.jar；</p><p>​ 5、JDBC---数据库驱动；</p><p>​ 写了一个统一的接口层；日志门面（日志的一个抽象层）；logging-abstract.jar；</p><p>​ 给项目中导入具体的日志实现就行了；我们之前的日志框架都是实现的抽象层；</p><p><strong>市面上的日志框架；</strong></p><p>JUL、JCL、Jboss-logging、logback、log4j、log4j2、slf4j....</p><table><thead><tr><th>日志门面 （日志的抽象层）</th><th>日志实现</th></tr></thead><tbody><tr><td><s>JCL（Jakarta Commons Logging）</s> SLF4j（Simple Logging Facade for Java） <strong><s>jboss-logging</s></strong></td><td>Log4j JUL（java.util.logging） Log4j2 <strong>Logback</strong></td></tr></tbody></table><p>左边选一个门面（抽象层）、右边来选一个实现；</p><p>日志门面： SLF4J；</p><p>日志实现：Logback；</p><p>SpringBoot：底层是Spring框架，Spring框架默认是用JCL；‘</p><p>​ <strong>==SpringBoot选用 SLF4j和logback；==</strong></p><h2 id="_2、slf4j使用" tabindex="-1"><a class="header-anchor" href="#_2、slf4j使用" aria-hidden="true">#</a> 2、SLF4j使用</h2><h3 id="_1、如何在系统中使用slf4j-https-www-slf4j-org" tabindex="-1"><a class="header-anchor" href="#_1、如何在系统中使用slf4j-https-www-slf4j-org" aria-hidden="true">#</a> 1、如何在系统中使用SLF4j https://www.slf4j.org</h3><p>以后开发的时候，日志记录方法的调用，不应该来直接调用日志的实现类，而是调用日志抽象层里面的方法；</p><p>给系统里面导入slf4j的jar和 logback的实现jar</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.slf4j.Logger;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.slf4j.LoggerFactory;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloWorld</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">main</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">[] </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#4EC9B0;">Logger</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">LoggerFactory</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getLogger</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">HelloWorld</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">info</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Hello World&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>图示；</p><p><img src="/construct/springboot/concrete-bindings.png" alt="images/concrete-bindings.png"></p><p>每一个日志的实现框架都有自己的配置文件。使用slf4j以后，<strong>配置文件还是做成日志实现框架自己本身的配置文件；</strong></p><h3 id="_2、遗留问题" tabindex="-1"><a class="header-anchor" href="#_2、遗留问题" aria-hidden="true">#</a> 2、遗留问题</h3><p>a（slf4j+logback）: Spring（commons-logging）、Hibernate（jboss-logging）、MyBatis、xxxx</p><p>统一日志记录，即使是别的框架和我一起统一使用slf4j进行输出？</p><p><img src="/construct/springboot/legacy.png" alt="legacy"></p><p><strong>如何让系统中所有的日志都统一到slf4j；</strong></p><p>==1、将系统中其他日志框架先排除出去；==</p><p>==2、用中间包来替换原有的日志框架；==</p><p>==3、我们导入slf4j其他的实现==</p><h2 id="_3、springboot日志关系" tabindex="-1"><a class="header-anchor" href="#_3、springboot日志关系" aria-hidden="true">#</a> 3、SpringBoot日志关系</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot使用它来做日志功能；</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-logging</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>底层依赖关系</p><p><img src="/construct/springboot/搜狗截图20180131220946.png" alt=""></p><p>总结：</p><p>​ 1）、SpringBoot底层也是使用slf4j+logback的方式进行日志记录</p><p>​ 2）、SpringBoot也把其他的日志都替换成了slf4j；</p><p>​ 3）、中间替换包？</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">SuppressWarnings</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;rawtypes&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">abstract</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">LogFactory</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">LogFactory</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">logFactory</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">SLF4JLogFactory</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/construct/springboot/搜狗截图20180131221411.png" alt=""></p><p>​ 4）、如果我们要引入其他框架？一定要把这个框架的默认日志依赖移除掉？</p><p>​ Spring框架用的是commons-logging；</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-core</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">					</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">commons-logging</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">					</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">commons-logging</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>==SpringBoot能自动适配所有的日志，而且底层使用slf4j+logback的方式记录日志，引入其他框架的时候，只需要把这个框架依赖的日志框架排除掉即可；==</strong></p><h2 id="_4、日志使用" tabindex="-1"><a class="header-anchor" href="#_4、日志使用" aria-hidden="true">#</a> 4、日志使用；</h2><h3 id="_1、默认配置" tabindex="-1"><a class="header-anchor" href="#_1、默认配置" aria-hidden="true">#</a> 1、默认配置</h3><p>SpringBoot默认帮我们配置好了日志；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#6A9955;">//记录器</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#4EC9B0;">Logger</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">LoggerFactory</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getLogger</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">getClass</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">Test</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">contextLoads</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">//System.out.println();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">//日志的级别；</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">//由低到高   trace&lt;debug&lt;info&lt;warn&lt;error</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">//可以调整输出的日志级别；日志就只会在这个级别以以后的高级别生效</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">trace</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;这是trace日志...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">debug</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;这是debug日志...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">//SpringBoot默认给我们使用的是info级别的，没有指定级别的就用SpringBoot默认规定的级别；root级别</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">info</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;这是info日志...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">warn</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;这是warn日志...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">error</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;这是error日志...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>    日志输出格式：
		%d表示日期时间，
		%thread表示线程名，
		%-5level：级别从左显示5个字符宽度
		%logger{50} 表示logger名字最长50个字符，否则按照句点分割。 
		%msg：日志消息，
		%n是换行符
    --&gt;
    %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n
</code></pre><p>SpringBoot修改日志的默认配置</p><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># properties</span></span>
<span class="line"><span style="color:#D4D4D4;">logging.level.com.atguigu=trace  #指定包名的缓存级别</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">#logging.path=</span></span>
<span class="line"><span style="color:#D4D4D4;"># 不指定路径在当前项目下生成springboot.log日志</span></span>
<span class="line"><span style="color:#D4D4D4;"># 可以指定完整的路径；</span></span>
<span class="line"><span style="color:#D4D4D4;">#logging.file=G:/springboot.log</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;"># 在当前磁盘的根路径下创建spring文件夹和里面的log文件夹；使用 spring.log 作为默认文件</span></span>
<span class="line"><span style="color:#D4D4D4;">logging.path=/spring/log</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">#  在控制台输出的日志的格式</span></span>
<span class="line"><span style="color:#D4D4D4;">logging.pattern.console=</span><span style="color:#6A9955;">%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n</span></span>
<span class="line"><span style="color:#D4D4D4;"># 指定文件中日志输出的格式</span></span>
<span class="line"><span style="color:#D4D4D4;">logging.pattern.file=</span><span style="color:#6A9955;">%d{yyyy-MM-dd} === [%thread] === %-5level === %logger{50} ==== %msg%n</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>logging.file</th><th>logging.path</th><th>Example</th><th>Description</th></tr></thead><tbody><tr><td>(none)</td><td>(none)</td><td></td><td>只在控制台输出</td></tr><tr><td>指定文件名</td><td>(none)</td><td>my.log</td><td>输出日志到my.log文件</td></tr><tr><td>(none)</td><td>指定目录</td><td>/var/log</td><td>输出到指定目录的 spring.log 文件中</td></tr></tbody></table><h3 id="_2、指定配置" tabindex="-1"><a class="header-anchor" href="#_2、指定配置" aria-hidden="true">#</a> 2、指定配置</h3><p>给类路径下放上每个日志框架自己的配置文件即可；SpringBoot就不使用他默认配置的了</p><table><thead><tr><th>Logging System</th><th>Customization</th></tr></thead><tbody><tr><td>Logback</td><td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td></tr><tr><td>Log4j2</td><td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td></tr><tr><td>JDK (Java Util Logging)</td><td><code>logging.properties</code></td></tr></tbody></table><p>logback.xml：直接就被日志框架识别了；</p><p><strong>logback-spring.xml</strong>：日志框架就不直接加载日志的配置项，由SpringBoot解析日志配置，可以使用SpringBoot的高级Profile功能</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">springProfile</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;staging&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">&lt;!-- configuration to be enabled when the &quot;staging&quot; profile is active --&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  	可以指定某段配置只在某个环境下生效</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">springProfile</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">appender</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;stdout&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">&lt;!--</span></span>
<span class="line"><span style="color:#6A9955;">        日志输出格式：</span></span>
<span class="line"><span style="color:#6A9955;">			%d表示日期时间，</span></span>
<span class="line"><span style="color:#6A9955;">			%thread表示线程名，</span></span>
<span class="line"><span style="color:#6A9955;">			%-5level：级别从左显示5个字符宽度</span></span>
<span class="line"><span style="color:#6A9955;">			%logger{50} 表示logger名字最长50个字符，否则按照句点分割。 </span></span>
<span class="line"><span style="color:#6A9955;">			%msg：日志消息，</span></span>
<span class="line"><span style="color:#6A9955;">			%n是换行符</span></span>
<span class="line"><span style="color:#6A9955;">        --&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">layout</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;ch.qos.logback.classic.PatternLayout&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">springProfile</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;dev&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">pattern</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">%d{yyyy-MM-dd HH:mm:ss.SSS} ----&gt; [%thread] ---&gt; %-5level %logger{50} - %msg%n</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">pattern</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">springProfile</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">springProfile</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;!dev&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">pattern</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">%d{yyyy-MM-dd HH:mm:ss.SSS} ==== [%thread] ==== %-5level %logger{50} - %msg%n</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">pattern</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">springProfile</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">layout</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">appender</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果使用logback.xml作为日志配置文件，还要使用profile功能，会有以下错误</p><p><code>no applicable action for [springProfile]</code></p><h2 id="_5、切换日志框架" tabindex="-1"><a class="header-anchor" href="#_5、切换日志框架" aria-hidden="true">#</a> 5、切换日志框架</h2><p>可以按照slf4j的日志适配图，进行相关的切换；</p><p>slf4j+log4j的方式；</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-web</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">logback-classic</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">ch.qos.logback</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">log4j-over-slf4j</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.slf4j</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.slf4j</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">slf4j-log4j12</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>切换为log4j2</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-web</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-logging</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-log4j2</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h1 id="四、web开发" tabindex="-1"><a class="header-anchor" href="#四、web开发" aria-hidden="true">#</a> 四、Web开发</h1><h2 id="_1、简介" tabindex="-1"><a class="header-anchor" href="#_1、简介" aria-hidden="true">#</a> 1、简介</h2><p>使用SpringBoot；</p><p><strong>1）、创建SpringBoot应用，选中我们需要的模块；</strong></p><p><strong>2）、SpringBoot已经默认将这些场景配置好了，只需要在配置文件中指定少量配置就可以运行起来</strong></p><p><strong>3）、自己编写业务代码；</strong></p><p><strong>自动配置原理？</strong></p><p>这个场景SpringBoot帮我们配置了什么？能不能修改？能修改哪些配置？能不能扩展？xxx</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">xxxxAutoConfiguration：帮我们给容器中自动配置组件；</span></span>
<span class="line"><span style="color:#D4D4D4;">xxxxProperties:配置类来封装配置文件的内容；</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2、springboot对静态资源的映射规则" tabindex="-1"><a class="header-anchor" href="#_2、springboot对静态资源的映射规则" aria-hidden="true">#</a> 2、SpringBoot对静态资源的映射规则；</h2><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;spring.resources&quot;</span><span style="color:#D4D4D4;">, ignoreUnknownFields = </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ResourceProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">implements</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ResourceLoaderAware</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">//可以设置和静态资源有关的参数，缓存时间等</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">	WebMvcAuotConfiguration：</span></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">addResourceHandlers</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ResourceHandlerRegistry</span><span style="color:#D4D4D4;"> registry) {</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">resourceProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">isAddMappings</span><span style="color:#D4D4D4;">()) {</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">debug</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Default resource handling disabled&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">			}</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#4EC9B0;">Integer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">cachePeriod</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">resourceProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getCachePeriod</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">hasMappingForPattern</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/webjars/**&quot;</span><span style="color:#D4D4D4;">)) {</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#DCDCAA;">customizeResourceHandlerRegistration</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">						</span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addResourceHandler</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/webjars/**&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">								.</span><span style="color:#DCDCAA;">addResourceLocations</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">										</span><span style="color:#CE9178;">&quot;classpath:/META-INF/resources/webjars/&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">						.</span><span style="color:#DCDCAA;">setCachePeriod</span><span style="color:#D4D4D4;">(cachePeriod));</span></span>
<span class="line"><span style="color:#D4D4D4;">			}</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">staticPathPattern</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mvcProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getStaticPathPattern</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">          	</span><span style="color:#6A9955;">//静态资源文件夹映射</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">hasMappingForPattern</span><span style="color:#D4D4D4;">(staticPathPattern)) {</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#DCDCAA;">customizeResourceHandlerRegistration</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">						</span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addResourceHandler</span><span style="color:#D4D4D4;">(staticPathPattern)</span></span>
<span class="line"><span style="color:#D4D4D4;">								.</span><span style="color:#DCDCAA;">addResourceLocations</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">										</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">resourceProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getStaticLocations</span><span style="color:#D4D4D4;">())</span></span>
<span class="line"><span style="color:#D4D4D4;">						.</span><span style="color:#DCDCAA;">setCachePeriod</span><span style="color:#D4D4D4;">(cachePeriod));</span></span>
<span class="line"><span style="color:#D4D4D4;">			}</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//配置欢迎页映射</span></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WelcomePageHandlerMapping</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">welcomePageHandlerMapping</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#4EC9B0;">ResourceProperties</span><span style="color:#D4D4D4;"> resourceProperties) {</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">WelcomePageHandlerMapping</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">resourceProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getWelcomePage</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">					</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mvcProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getStaticPathPattern</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//配置喜欢的图标</span></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">ConditionalOnProperty</span><span style="color:#D4D4D4;">(value = </span><span style="color:#CE9178;">&quot;spring.mvc.favicon.enabled&quot;</span><span style="color:#D4D4D4;">, matchIfMissing = </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">FaviconConfiguration</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ResourceProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">resourceProperties</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">FaviconConfiguration</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ResourceProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">resourceProperties</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">resourceProperties</span><span style="color:#D4D4D4;"> = resourceProperties;</span></span>
<span class="line"><span style="color:#D4D4D4;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">			@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">SimpleUrlHandlerMapping</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">faviconHandlerMapping</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#4EC9B0;">SimpleUrlHandlerMapping</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">mapping</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">SimpleUrlHandlerMapping</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#9CDCFE;">mapping</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setOrder</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Ordered</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">HIGHEST_PRECEDENCE</span><span style="color:#D4D4D4;"> + </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">              	</span><span style="color:#6A9955;">//所有  **/favicon.ico </span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#9CDCFE;">mapping</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setUrlMap</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Collections</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">singletonMap</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;**/favicon.ico&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">						</span><span style="color:#DCDCAA;">faviconRequestHandler</span><span style="color:#D4D4D4;">()));</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> mapping;</span></span>
<span class="line"><span style="color:#D4D4D4;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">			@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ResourceHttpRequestHandler</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">faviconRequestHandler</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#4EC9B0;">ResourceHttpRequestHandler</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">requestHandler</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ResourceHttpRequestHandler</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">				requestHandler</span></span>
<span class="line"><span style="color:#D4D4D4;">						.</span><span style="color:#DCDCAA;">setLocations</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">resourceProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getFaviconLocations</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> requestHandler;</span></span>
<span class="line"><span style="color:#D4D4D4;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==1）、所有 /webjars/** ，都去 classpath:/META-INF/resources/webjars/ 找资源；==</p><p>​ webjars：以jar包的方式引入静态资源；</p><p>http://www.webjars.org/</p><p><img src="/construct/springboot/搜狗截图20180203181751.png" alt=""></p><p>localhost:8080/webjars/jquery/3.3.1/jquery.js</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">&lt;!--引入jquery-webjar--&gt;</span><span style="color:#D4D4D4;">在访问的时候只需要写webjars下面资源的名称即可</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.webjars</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">jquery</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">3.3.1</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==2）、&quot;/**&quot; 访问当前项目的任何资源，都去（静态资源的文件夹）找映射==</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">&quot;classpath:/META-INF/resources/&quot;, </span></span>
<span class="line"><span style="color:#D4D4D4;">&quot;classpath:/resources/&quot;,</span></span>
<span class="line"><span style="color:#D4D4D4;">&quot;classpath:/static/&quot;, </span></span>
<span class="line"><span style="color:#D4D4D4;">&quot;classpath:/public/&quot; </span></span>
<span class="line"><span style="color:#D4D4D4;">&quot;/&quot;：当前项目的根路径</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>localhost:8080/abc === 去静态资源文件夹里面找abc</p><p>==3）、欢迎页； 静态资源文件夹下的所有index.html页面；被&quot;/**&quot;映射；==</p><p>​ localhost:8080/ 找index页面</p><p>==4）、所有的 **/favicon.ico 都是在静态资源文件下找；==</p><h2 id="_3、模板引擎" tabindex="-1"><a class="header-anchor" href="#_3、模板引擎" aria-hidden="true">#</a> 3、模板引擎</h2><p>JSP、Velocity、Freemarker、Thymeleaf</p><p><img src="/construct/springboot/template-engine.png" alt=""></p><p>SpringBoot推荐的Thymeleaf；</p><p>语法更简单，功能更强大；</p><h3 id="_1、引入thymeleaf" tabindex="-1"><a class="header-anchor" href="#_1、引入thymeleaf" aria-hidden="true">#</a> 1、引入thymeleaf；</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-thymeleaf</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">          	2.1.6</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">切换thymeleaf版本</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">properties</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">thymeleaf.version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">3.0.9.RELEASE</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">thymeleaf.version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">&lt;!-- 布局功能的支持程序  thymeleaf3主程序  layout2以上版本 --&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">&lt;!-- thymeleaf2   layout1--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">thymeleaf-layout-dialect.version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">2.2.2</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">thymeleaf-layout-dialect.version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">properties</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、thymeleaf使用" tabindex="-1"><a class="header-anchor" href="#_2、thymeleaf使用" aria-hidden="true">#</a> 2、Thymeleaf使用</h3><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;spring.thymeleaf&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ThymeleafProperties</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Charset</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">DEFAULT_ENCODING</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">Charset</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">forName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;UTF-8&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MimeType</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">DEFAULT_CONTENT_TYPE</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">MimeType</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">valueOf</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;text/html&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">DEFAULT_PREFIX</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;classpath:/templates/&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">DEFAULT_SUFFIX</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;.html&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">  	</span><span style="color:#6A9955;">//</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只要我们把HTML页面放在classpath:/templates/，thymeleaf就能自动渲染；</p><p>使用：</p><p>1、导入thymeleaf的名称空间</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">html</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">lang</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;en&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">xmlns:th</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.thymeleaf.org&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2、使用thymeleaf语法；</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;!</span><span style="color:#569CD6;">DOCTYPE</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">html</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">html</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">lang</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;en&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">xmlns:th</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.thymeleaf.org&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">head</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">meta</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">charset</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;UTF-8&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">title</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Title</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">title</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">head</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">body</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">h1</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">成功！</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">h1</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">&lt;!--th:text 将div里面的文本内容设置为 --&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${hello}&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">这是显示欢迎信息</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">body</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">html</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、语法规则" tabindex="-1"><a class="header-anchor" href="#_3、语法规则" aria-hidden="true">#</a> 3、语法规则</h3><p>1）、th:text；改变当前元素里面的文本内容；</p><p>​ th：任意html属性；来替换原生属性的值</p><p><img src="/construct/springboot/2018-02-04_123955.png" alt=""></p><p>2）、表达式？</p><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># properties</span></span>
<span class="line"><span style="color:#D4D4D4;">Simple expressions:（表达式语法）</span></span>
<span class="line"><span style="color:#D4D4D4;">    Variable Expressions: </span><span style="color:#4EC9B0;">$</span><span style="color:#4EC9B0;">{...}：获取变量值；OGNL；</span></span>
<span class="line"><span style="color:#4EC9B0;">    		</span><span style="color:#B5CEA8;">1</span><span style="color:#4EC9B0;">）、获取对象的属性、调用方法</span></span>
<span class="line"><span style="color:#4EC9B0;">    		</span><span style="color:#B5CEA8;">2</span><span style="color:#4EC9B0;">）、使用内置的基本对象：</span></span>
<span class="line"><span style="color:#4EC9B0;">    			#ctx : the context object.</span></span>
<span class="line"><span style="color:#4EC9B0;">    			#vars: the context variables.</span></span>
<span class="line"><span style="color:#4EC9B0;">                #locale : the context locale.</span></span>
<span class="line"><span style="color:#4EC9B0;">                #request : (only in Web Contexts) the HttpServletRequest object.</span></span>
<span class="line"><span style="color:#4EC9B0;">                #response : (only in Web Contexts) the HttpServletResponse object.</span></span>
<span class="line"><span style="color:#4EC9B0;">                #session : (only in Web Contexts) the HttpSession object.</span></span>
<span class="line"><span style="color:#4EC9B0;">                #servletContext : (only in Web Contexts) the ServletContext object.</span></span>
<span class="line"><span style="color:#4EC9B0;">                </span></span>
<span class="line"><span style="color:#4EC9B0;">                </span><span style="color:#4EC9B0;">$</span><span style="color:#D4D4D4;">{session.foo}</span></span>
<span class="line"><span style="color:#D4D4D4;">            3）、内置的一些工具对象：</span></span>
<span class="line"><span style="color:#D4D4D4;">#execInfo : information about the template being processed.</span></span>
<span class="line"><span style="color:#D4D4D4;">#messages : methods for obtaining externalized messages inside variables expressions, in the same way as they would be obtained using #{…} syntax.</span></span>
<span class="line"><span style="color:#D4D4D4;">#uris : methods for escaping parts of URLs/URIs</span></span>
<span class="line"><span style="color:#D4D4D4;">#conversions : methods for executing the configured conversion service (if any).</span></span>
<span class="line"><span style="color:#D4D4D4;">#dates : methods for java.util.Date objects: formatting, component extraction, etc.</span></span>
<span class="line"><span style="color:#D4D4D4;">#calendars : analogous to #dates , but for java.util.Calendar objects.</span></span>
<span class="line"><span style="color:#D4D4D4;">#numbers : methods for formatting numeric objects.</span></span>
<span class="line"><span style="color:#D4D4D4;">#strings : methods for String objects: contains, startsWith, prepending/appending, etc.</span></span>
<span class="line"><span style="color:#D4D4D4;">#objects : methods for objects in general.</span></span>
<span class="line"><span style="color:#D4D4D4;">#bools : methods for boolean evaluation.</span></span>
<span class="line"><span style="color:#D4D4D4;">#arrays : methods for arrays.</span></span>
<span class="line"><span style="color:#D4D4D4;">#lists : methods for lists.</span></span>
<span class="line"><span style="color:#D4D4D4;">#sets : methods for sets.</span></span>
<span class="line"><span style="color:#D4D4D4;">#maps : methods for maps.</span></span>
<span class="line"><span style="color:#D4D4D4;">#aggregates : methods for creating aggregates on arrays or collections.</span></span>
<span class="line"><span style="color:#D4D4D4;">#ids : methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    Selection Variable Expressions: *{...}：选择表达式：和</span><span style="color:#4EC9B0;">$</span><span style="color:#4EC9B0;">{}在功能上是一样；</span></span>
<span class="line"><span style="color:#4EC9B0;">    	补充：配合 th:object=&quot;</span><span style="color:#4EC9B0;">$</span><span style="color:#D4D4D4;">{session.user}：</span></span>
<span class="line"><span style="color:#D4D4D4;">   &lt;div th:object=&quot;</span><span style="color:#4EC9B0;">$</span><span style="color:#4EC9B0;">{session.user}&quot;&gt;</span></span>
<span class="line"><span style="color:#4EC9B0;">    &lt;p&gt;Name: &lt;span th:text=&quot;*{firstName}&quot;&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;</span></span>
<span class="line"><span style="color:#4EC9B0;">    &lt;p&gt;Surname: &lt;span th:text=&quot;*{lastName}&quot;&gt;Pepper&lt;/span&gt;.&lt;/p&gt;</span></span>
<span class="line"><span style="color:#4EC9B0;">    &lt;p&gt;Nationality: &lt;span th:text=&quot;*{nationality}&quot;&gt;Saturn&lt;/span&gt;.&lt;/p&gt;</span></span>
<span class="line"><span style="color:#4EC9B0;">    &lt;/div&gt;</span></span>
<span class="line"><span style="color:#4EC9B0;">    </span></span>
<span class="line"><span style="color:#4EC9B0;">    Message Expressions: #{...}：获取国际化内容</span></span>
<span class="line"><span style="color:#4EC9B0;">    Link URL Expressions: @{...}：定义URL；</span></span>
<span class="line"><span style="color:#4EC9B0;">    		@{/order/process(execId=</span><span style="color:#4EC9B0;">$</span><span style="color:#D4D4D4;">{execId},execType=&#39;FAST&#39;)}</span></span>
<span class="line"><span style="color:#D4D4D4;">    Fragment Expressions: ~{...}：片段引用表达式</span></span>
<span class="line"><span style="color:#D4D4D4;">    		&lt;div th:insert=&quot;~{commons :: main}&quot;&gt;...&lt;/div&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    		</span></span>
<span class="line"><span style="color:#D4D4D4;">Literals（字面量）</span></span>
<span class="line"><span style="color:#D4D4D4;">      Text literals: &#39;one text&#39; , &#39;Another one!&#39; ,…</span></span>
<span class="line"><span style="color:#D4D4D4;">      Number literals: 0 , 34 , 3.0 , 12.3 ,…</span></span>
<span class="line"><span style="color:#D4D4D4;">      Boolean literals: true , false</span></span>
<span class="line"><span style="color:#D4D4D4;">      Null literal: null</span></span>
<span class="line"><span style="color:#D4D4D4;">      Literal tokens: one , sometext , main ,…</span></span>
<span class="line"><span style="color:#D4D4D4;">Text operations:（文本操作）</span></span>
<span class="line"><span style="color:#D4D4D4;">    String concatenation: +</span></span>
<span class="line"><span style="color:#D4D4D4;">    Literal substitutions: |The name is </span><span style="color:#4EC9B0;">$</span><span style="color:#4EC9B0;">{name}|</span></span>
<span class="line"><span style="color:#4EC9B0;">Arithmetic operations:（数学运算）</span></span>
<span class="line"><span style="color:#4EC9B0;">    Binary operators: + , - , * , / , </span><span style="color:#6A9955;">%</span></span>
<span class="line"><span style="color:#4EC9B0;">    Minus sign (unary operator): -</span></span>
<span class="line"><span style="color:#4EC9B0;">Boolean operations:（布尔运算）</span></span>
<span class="line"><span style="color:#4EC9B0;">    Binary operators: and , or</span></span>
<span class="line"><span style="color:#4EC9B0;">    Boolean negation (unary operator): ! , not</span></span>
<span class="line"><span style="color:#4EC9B0;">Comparisons and equality:（比较运算）</span></span>
<span class="line"><span style="color:#4EC9B0;">    Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</span></span>
<span class="line"><span style="color:#4EC9B0;">    Equality operators: == , != ( eq , ne )</span></span>
<span class="line"><span style="color:#4EC9B0;">Conditional operators:条件运算（三元运算符）</span></span>
<span class="line"><span style="color:#4EC9B0;">    If-then: (if) ? (then)</span></span>
<span class="line"><span style="color:#4EC9B0;">    If-then-else: (if) ? (then) : (else)</span></span>
<span class="line"><span style="color:#4EC9B0;">    Default: (value) ?: (defaultvalue)</span></span>
<span class="line"><span style="color:#4EC9B0;">Special tokens:</span></span>
<span class="line"><span style="color:#4EC9B0;">    No-Operation: _ </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="LightCoral">**补充：#{} 与springboot进行整合的时候**</div><p>spring.messages.baseName-&gt;默认是messages MessageSourceProperties.Class</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;!</span><span style="color:#569CD6;">DOCTYPE</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">html</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">html</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">xmlns:th</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.thymeleaf.org&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">head</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">title</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Good Thymes Virtual Grocery</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">title</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">meta</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">http-equiv</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Content-Type&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">content</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;text/html; charset=UTF-8&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#808080;">/&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">head</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">body</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">p</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">data-th-text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#{home.welcome}&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Welcome to our grocery store!</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">p</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">body</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">html</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> com.soyatec.sample.controller;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> com.soyatec.sample.entity.Person;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.beans.factory.annotation.Autowired;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.stereotype.Controller;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.ui.Model;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.web.bind.annotation.RequestMapping;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.web.bind.annotation.ResponseBody;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Controller</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">TestController</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">Autowired</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#4EC9B0;">Person</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">person</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ResponseBody</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">RequestMapping</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;test&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">test</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(person);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">person</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getName</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">RequestMapping</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;test01&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">test01</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Model</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">model</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;home&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>图片：</p><p><img src="/construct/springboot/thymleaf_国际化.jpg" alt=""></p><h3 id="springmvc-没有配置默认的国际化-需要自己配置basename-使用resourcebundlemessagesource" tabindex="-1"><a class="header-anchor" href="#springmvc-没有配置默认的国际化-需要自己配置basename-使用resourcebundlemessagesource" aria-hidden="true">#</a> springmvc 没有配置默认的国际化，需要自己配置baseName,使用ResourceBundleMessageSource</h3><p><img src="/construct/springboot/1547693934235.png" alt="配置MessageResources"></p><p><img src="/construct/springboot/1547694189(1).jpg" alt=""></p><p><img src="/construct/springboot/1547694242(1).jpg" alt=""></p><h2 id="_4、springmvc自动配置" tabindex="-1"><a class="header-anchor" href="#_4、springmvc自动配置" aria-hidden="true">#</a> 4、SpringMVC自动配置</h2><p>https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications</p><h3 id="_1-spring-mvc-auto-configuration" tabindex="-1"><a class="header-anchor" href="#_1-spring-mvc-auto-configuration" aria-hidden="true">#</a> 1. Spring MVC auto-configuration</h3><p>Spring Boot 自动配置好了SpringMVC</p><p>以下是SpringBoot对SpringMVC的默认配置:<strong>==（WebMvcAutoConfiguration）==</strong></p><ul><li><p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</p><ul><li>自动配置了ViewResolver（视图解析器：根据方法的返回值得到视图对象（View），视图对象决定如何渲染（转发？重定向？））</li><li>ContentNegotiatingViewResolver：组合所有的视图解析器的；<div color="red">内容协商</div><ul><li>可以定制根据请求后缀返回不同的数据</li><li>可以通过accept头信息</li></ul></li><li>==如何定制：我们可以自己给容器中添加一个视图解析器；自动的将其组合进来；==</li></ul></li><li><p>Support for serving static resources, including support for WebJars (see below).静态资源文件夹路径,webjars</p></li><li><p>Static <code>index.html</code> support. 静态首页访问</p></li><li><p>Custom <code>Favicon</code> support (see below). favicon.ico</p></li><li><p>自动注册了 of <code>Converter</code>, <code>GenericConverter</code>, <code>Formatter</code> beans.</p><ul><li>Converter：转换器； public String hello(User user)：类型转换使用Converter</li><li><code>Formatter</code> 格式化器； 2017.12.17===Date；</li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">ConditionalOnProperty</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;spring.mvc&quot;</span><span style="color:#D4D4D4;">, name = </span><span style="color:#CE9178;">&quot;date-format&quot;</span><span style="color:#D4D4D4;">)</span><span style="color:#6A9955;">//在文件中配置日期格式化的规则</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Formatter</span><span style="color:#D4D4D4;">&lt;Date&gt; </span><span style="color:#DCDCAA;">dateFormatter</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">DateFormatter</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mvcProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getDateFormat</span><span style="color:#D4D4D4;">());</span><span style="color:#6A9955;">//日期格式化组件</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ ==自己添加的格式化器转换器，我们只需要放在容器中即可==</p><ul><li><p>Support for <code>HttpMessageConverters</code> (see below).</p><ul><li><p>HttpMessageConverter：SpringMVC用来转换Http请求和响应的；User---Json；</p></li><li><p><code>HttpMessageConverters</code> 是从容器中确定；获取所有的HttpMessageConverter；</p><p>==自己给容器中添加HttpMessageConverter，只需要将自己的组件注册容器中（@Bean,@Component）==</p></li></ul></li><li><p>Automatic registration of <code>MessageCodesResolver</code> (see below).定义错误代码生成规则</p></li><li><p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (see below).</p><p>==我们可以配置一个ConfigurableWebBindingInitializer来替换默认的；（添加到容器）==</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">初始化WebDataBinder；</span></span>
<span class="line"><span style="color:#D4D4D4;">请求数据=====JavaBean；</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>org.springframework.boot.autoconfigure.web：web的所有自动场景；</strong></p><p>If you want to keep Spring Boot MVC features, and you just want to add additional <a href="https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle#mvc" target="_blank" rel="noopener noreferrer">MVC configuration<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a> (interceptors, formatters, view controllers etc.) you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurerAdapter</code>, but <strong>without</strong> <code>@EnableWebMvc</code>. If you wish to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code> or <code>ExceptionHandlerExceptionResolver</code> you can declare a <code>WebMvcRegistrationsAdapter</code> instance providing such components.</p><p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>.</p><h3 id="_2、扩展springmvc" tabindex="-1"><a class="header-anchor" href="#_2、扩展springmvc" aria-hidden="true">#</a> 2、扩展SpringMVC</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">mvc:view-controller</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">path</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;/hello&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">view-name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;success&quot;</span><span style="color:#808080;">/&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">mvc:interceptors</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">mvc:interceptor</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">mvc:mapping</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">path</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;/hello&quot;</span><span style="color:#808080;">/&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">bean</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">bean</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">mvc:interceptor</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">mvc:interceptors</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>==编写一个配置类（@Configuration），是WebMvcConfigurerAdapter类型；不能标注@EnableWebMvc==</strong>;</p><p>既保留了所有的自动配置，也能用我们扩展的配置；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//使用WebMvcConfigurerAdapter可以来扩展SpringMVC的功能</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyMvcConfig</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">addViewControllers</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ViewControllerRegistry</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">// super.addViewControllers(registry);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//浏览器发送 /atguigu 请求来到 success</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addViewController</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/atguigu&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">setViewName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;success&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原理：</p><p>​ 1）、WebMvcAutoConfiguration是SpringMVC的自动配置类</p><p>​ 2）、在做其他自动配置时会导入；@Import(<strong>EnableWebMvcConfiguration</strong>.class)</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EnableWebMvcConfiguration</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DelegatingWebMvcConfiguration</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebMvcConfigurerComposite</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">configurers</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">WebMvcConfigurerComposite</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	 </span><span style="color:#6A9955;">//从容器中获取所有的WebMvcConfigurer</span></span>
<span class="line"><span style="color:#D4D4D4;">      @</span><span style="color:#4EC9B0;">Autowired</span><span style="color:#D4D4D4;">(required = </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">setConfigurers</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">List</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">WebMvcConfigurer</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">configurers</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#9CDCFE;">CollectionUtils</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">isEmpty</span><span style="color:#D4D4D4;">(configurers)) {</span></span>
<span class="line"><span style="color:#D4D4D4;">              </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">configurers</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addWebMvcConfigurers</span><span style="color:#D4D4D4;">(configurers);</span></span>
<span class="line"><span style="color:#D4D4D4;">            	</span><span style="color:#6A9955;">//一个参考实现；将所有的WebMvcConfigurer相关配置都来一起调用；  </span></span>
<span class="line"><span style="color:#D4D4D4;">            	@</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">             </span><span style="color:#6A9955;">// public void addViewControllers(ViewControllerRegistry registry) {</span></span>
<span class="line"><span style="color:#D4D4D4;">              </span><span style="color:#6A9955;">//    for (WebMvcConfigurer delegate : this.delegates) {</span></span>
<span class="line"><span style="color:#D4D4D4;">               </span><span style="color:#6A9955;">//       delegate.addViewControllers(registry);</span></span>
<span class="line"><span style="color:#D4D4D4;">               </span><span style="color:#6A9955;">//   }</span></span>
<span class="line"><span style="color:#D4D4D4;">              }</span></span>
<span class="line"><span style="color:#D4D4D4;">          }</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 3）、容器中所有的WebMvcConfigurer都会一起起作用；</p><p>​ 4）、我们的配置类也会被调用；</p><p>​ 效果：SpringMVC的自动配置和我们的扩展配置都会起作用；</p><h3 id="_3、全面接管springmvc" tabindex="-1"><a class="header-anchor" href="#_3、全面接管springmvc" aria-hidden="true">#</a> 3、全面接管SpringMVC；</h3><p>SpringBoot对SpringMVC的自动配置不需要了，所有都是我们自己配置；所有的SpringMVC的自动配置都失效了</p><p><strong>我们需要在配置类中添加@EnableWebMvc即可；</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//使用WebMvcConfigurerAdapter可以来扩展SpringMVC的功能</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">EnableWebMvc</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyMvcConfig</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">addViewControllers</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ViewControllerRegistry</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">// super.addViewControllers(registry);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//浏览器发送 /atguigu 请求来到 success</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addViewController</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/atguigu&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">setViewName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;success&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原理：</p><p>为什么@EnableWebMvc自动配置就失效了；</p><p>1）@EnableWebMvc的核心</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Import</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">DelegatingWebMvcConfiguration</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> @</span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EnableWebMvc</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2）、</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DelegatingWebMvcConfiguration</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebMvcConfigurationSupport</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3）、</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnWebApplication</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnClass</span><span style="color:#D4D4D4;">({ </span><span style="color:#9CDCFE;">Servlet</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">DispatcherServlet</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;"> })</span></span>
<span class="line"><span style="color:#6A9955;">//容器中没有这个组件的时候，这个自动配置类才生效</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnMissingBean</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">WebMvcConfigurationSupport</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">AutoConfigureOrder</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Ordered</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">HIGHEST_PRECEDENCE</span><span style="color:#D4D4D4;"> + </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">AutoConfigureAfter</span><span style="color:#D4D4D4;">({ </span><span style="color:#9CDCFE;">DispatcherServletAutoConfiguration</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">ValidationAutoConfiguration</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;"> })</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebMvcAutoConfiguration</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4）、@EnableWebMvc将WebMvcConfigurationSupport组件导入进来；</p><p>5）、导入的WebMvcConfigurationSupport只是SpringMVC最基本的功能；</p><h2 id="_5、如何修改springboot的默认配置" tabindex="-1"><a class="header-anchor" href="#_5、如何修改springboot的默认配置" aria-hidden="true">#</a> 5、如何修改SpringBoot的默认配置</h2><p>模式：</p><p>​ 1）、SpringBoot在自动配置很多组件的时候，先看容器中有没有用户自己配置的（@Bean、@Component）如果有就用用户配置的，如果没有，才自动配置；如果有些组件可以有多个（ViewResolver）将用户配置的和自己默认的组合起来；</p><p>​ 2）、在SpringBoot中会有非常多的xxxConfigurer帮助我们进行扩展配置</p><p>​ 3）、在SpringBoot中会有很多的xxxCustomizer帮助我们进行定制配置</p><h2 id="_6、restfulcrud" tabindex="-1"><a class="header-anchor" href="#_6、restfulcrud" aria-hidden="true">#</a> 6、RestfulCRUD</h2><h3 id="_1-、默认访问首页" tabindex="-1"><a class="header-anchor" href="#_1-、默认访问首页" aria-hidden="true">#</a> 1）、默认访问首页</h3><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"></span>
<span class="line"><span style="color:#6A9955;">//使用WebMvcConfigurerAdapter可以来扩展SpringMVC的功能</span></span>
<span class="line"><span style="color:#6A9955;">//@EnableWebMvc   不要接管SpringMVC</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyMvcConfig</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">addViewControllers</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ViewControllerRegistry</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">// super.addViewControllers(registry);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//浏览器发送 /atguigu 请求来到 success</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addViewController</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/atguigu&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">setViewName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;success&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//所有的WebMvcConfigurerAdapter组件都会一起起作用</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">//将组件注册在容器</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">webMvcConfigurerAdapter</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">adapter</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">            @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">addViewControllers</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ViewControllerRegistry</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addViewController</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">setViewName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;login&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addViewController</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/index.html&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">setViewName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;login&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">            }</span></span>
<span class="line"><span style="color:#D4D4D4;">        };</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> adapter;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-、国际化" tabindex="-1"><a class="header-anchor" href="#_2-、国际化" aria-hidden="true">#</a> 2）、国际化</h3><p><strong>1）、编写国际化配置文件；</strong></p><p>2）、使用ResourceBundleMessageSource管理国际化资源文件</p><p>3）、在页面使用fmt:message取出国际化内容</p><p>步骤：</p><p>1）、编写国际化配置文件，抽取页面需要显示的国际化消息</p><p><img src="/construct/springboot/搜狗截图20180211130721.png" alt=""></p><p>2）、SpringBoot自动配置好了管理国际化资源文件的组件；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;spring.messages&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MessageSourceAutoConfiguration</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;">	 * Comma-separated list of basenames (essentially a fully-qualified classpath</span></span>
<span class="line"><span style="color:#6A9955;">	 * location), each following the ResourceBundle convention with relaxed support for</span></span>
<span class="line"><span style="color:#6A9955;">	 * slash based locations. If it doesn&#39;t contain a package qualifier (such as</span></span>
<span class="line"><span style="color:#6A9955;">	 * &quot;org.mypackage&quot;), it will be resolved from the classpath root.</span></span>
<span class="line"><span style="color:#6A9955;">	 */</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">basename</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;messages&quot;</span><span style="color:#D4D4D4;">;  </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//我们的配置文件可以直接放在类路径下叫messages.properties；</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MessageSource</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">messageSource</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">ResourceBundleMessageSource</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">messageSource</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ResourceBundleMessageSource</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">StringUtils</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">hasText</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">basename</span><span style="color:#D4D4D4;">)) {</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;">//设置国际化资源文件的基础名（去掉语言国家代码的）</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#9CDCFE;">messageSource</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setBasenames</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">StringUtils</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">commaDelimitedListToStringArray</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">					</span><span style="color:#9CDCFE;">StringUtils</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">trimAllWhitespace</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">basename</span><span style="color:#D4D4D4;">)));</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">encoding</span><span style="color:#D4D4D4;"> != </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#9CDCFE;">messageSource</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setDefaultEncoding</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">encoding</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">name</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">messageSource</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setFallbackToSystemLocale</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">fallbackToSystemLocale</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">messageSource</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setCacheSeconds</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">cacheSeconds</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">messageSource</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setAlwaysUseMessageFormat</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">alwaysUseMessageFormat</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> messageSource;</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3）、去页面获取国际化的值；</p><p><img src="/construct/springboot/搜狗截图20180211134506.png" alt=""></p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;!</span><span style="color:#569CD6;">DOCTYPE</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">html</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">html</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">lang</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;en&quot;</span><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">xmlns:th</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.thymeleaf.org&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">head</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">meta</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">http-equiv</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Content-Type&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">content</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;text/html; charset=UTF-8&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">meta</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;viewport&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">content</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">meta</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;description&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">content</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">meta</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;author&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">content</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">title</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Signin Template for Bootstrap</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">title</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">&lt;!-- Bootstrap core CSS --&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">link</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;asserts/css/bootstrap.min.css&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;@{/webjars/bootstrap/4.0.0/css/bootstrap.css}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">rel</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;stylesheet&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">&lt;!-- Custom styles for this template --&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">link</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;asserts/css/signin.css&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;@{/asserts/css/signin.css}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">rel</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;stylesheet&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">head</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">body</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;text-center&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">form</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-signin&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">action</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;dashboard.html&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">img</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;mb-4&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;@{/asserts/img/bootstrap-solid.svg}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;asserts/img/bootstrap-solid.svg&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">alt</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">width</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;72&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">height</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;72&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">h1</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;h3 mb-3 font-weight-normal&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#{login.tip}&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Please sign in</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">h1</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;sr-only&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#{login.username}&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Username</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;text&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Username&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#{login.username}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">required</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">autofocus</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;sr-only&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#{login.password}&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Password</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;password&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;Password&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#{login.password}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">required</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;checkbox mb-3&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">          		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;checkbox&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;remember-me&quot;</span><span style="color:#808080;">/&gt;</span><span style="color:#D4D4D4;"> [[#{login.remember}]]</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">button</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;btn btn-lg btn-primary btn-block&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;submit&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#{login.btn}&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Sign in</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">button</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">p</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;mt-5 mb-3 text-muted&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">© 2017-2018</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">p</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">a</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;btn btn-sm&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">中文</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">a</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">a</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;btn btn-sm&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">English</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">a</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">form</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">body</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">html</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果：根据浏览器语言设置的信息切换了国际化；</p><p>原理：</p><p>​ 国际化Locale（区域信息对象）；LocaleResolver（获取区域信息对象）；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">ConditionalOnMissingBean</span></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">ConditionalOnProperty</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;spring.mvc&quot;</span><span style="color:#D4D4D4;">, name = </span><span style="color:#CE9178;">&quot;locale&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">LocaleResolver</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">localeResolver</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mvcProperties</span></span>
<span class="line"><span style="color:#D4D4D4;">					.</span><span style="color:#DCDCAA;">getLocaleResolver</span><span style="color:#D4D4D4;">() == </span><span style="color:#9CDCFE;">WebMvcProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">LocaleResolver</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">FIXED</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">FixedLocaleResolver</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mvcProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getLocale</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">			}</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#4EC9B0;">AcceptHeaderLocaleResolver</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">localeResolver</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">AcceptHeaderLocaleResolver</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#9CDCFE;">localeResolver</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setDefaultLocale</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mvcProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getLocale</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> localeResolver;</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"><span style="color:#D4D4D4;">默认的就是根据请求头带来的区域信息获取Locale进行国际化</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4）、点击链接切换国际化</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;"> * 可以在连接上携带区域信息</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyLocaleResolver</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">implements</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">LocaleResolver</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Locale</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">resolveLocale</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">l</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getParameter</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;l&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">Locale</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">locale</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">Locale</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getDefault</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;">(!</span><span style="color:#9CDCFE;">StringUtils</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">isEmpty</span><span style="color:#D4D4D4;">(l)){</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">[] </span><span style="color:#9CDCFE;">split</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">l</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">split</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;_&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">            locale = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">Locale</span><span style="color:#D4D4D4;">(split[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],split[</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">]);</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> locale;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">setLocale</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">HttpServletResponse</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">response</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Locale</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">locale</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;"> @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">LocaleResolver</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">localeResolver</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">MyLocaleResolver</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-、登陆" tabindex="-1"><a class="header-anchor" href="#_3-、登陆" aria-hidden="true">#</a> 3）、登陆</h3><p>开发期间模板引擎页面修改以后，要实时生效</p><p>1）、禁用模板引擎的缓存</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># 禁用缓存</span></span>
<span class="line"><span style="color:#D4D4D4;">spring.thymeleaf.cache=false </span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2）、页面修改完成以后ctrl+f9：重新编译；</p><p>登陆错误消息的显示</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">p</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">style</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;color: red&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${msg}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:if</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${not #strings.isEmpty(msg)}&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">p</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-、拦截器进行登陆检查" tabindex="-1"><a class="header-anchor" href="#_4-、拦截器进行登陆检查" aria-hidden="true">#</a> 4）、拦截器进行登陆检查</h3><p>拦截器</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"></span>
<span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;"> * 登陆检查，</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">LoginHandlerInterceptor</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">implements</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HandlerInterceptor</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//目标方法执行之前</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">boolean</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">preHandle</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">HttpServletResponse</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">response</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">handler</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">throws</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Exception</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">user</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSession</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">getAttribute</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;loginUser&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;">(user == </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">){</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;">//未登陆，返回登陆页面</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setAttribute</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;msg&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;没有权限请先登陆&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getRequestDispatcher</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/index.html&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">forward</span><span style="color:#D4D4D4;">(request,response);</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span><span style="color:#C586C0;">else</span><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;">//已登陆，放行请求</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">postHandle</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">HttpServletResponse</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">response</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">handler</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">ModelAndView</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">modelAndView</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">throws</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Exception</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">afterCompletion</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">HttpServletResponse</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">response</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">handler</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Exception</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">ex</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">throws</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Exception</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注册拦截器</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">//所有的WebMvcConfigurerAdapter组件都会一起起作用</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">//将组件注册在容器</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">webMvcConfigurerAdapter</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">adapter</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">WebMvcConfigurerAdapter</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">            @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">addViewControllers</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ViewControllerRegistry</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addViewController</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">setViewName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;login&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addViewController</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/index.html&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">setViewName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;login&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addViewController</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/main.html&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">setViewName</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;dashboard&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;">//注册拦截器</span></span>
<span class="line"><span style="color:#D4D4D4;">            @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">addInterceptors</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">InterceptorRegistry</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#6A9955;">//super.addInterceptors(registry);</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#6A9955;">//静态资源；  *.css , *.js</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#6A9955;">//SpringBoot已经做好了静态资源映射</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#9CDCFE;">registry</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addInterceptor</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">LoginHandlerInterceptor</span><span style="color:#D4D4D4;">()).</span><span style="color:#DCDCAA;">addPathPatterns</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/**&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">                        .</span><span style="color:#DCDCAA;">excludePathPatterns</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/index.html&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;/&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;/user/login&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">            }</span></span>
<span class="line"><span style="color:#D4D4D4;">        };</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> adapter;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-、crud-员工列表" tabindex="-1"><a class="header-anchor" href="#_5-、crud-员工列表" aria-hidden="true">#</a> 5）、CRUD-员工列表</h3><p>实验要求：</p><p>1）、RestfulCRUD：CRUD满足Rest风格；</p><p>URI： /资源名称/资源标识 HTTP请求方式区分对资源CRUD操作</p><table><thead><tr><th></th><th>普通CRUD（uri来区分操作）</th><th>RestfulCRUD</th></tr></thead><tbody><tr><td>查询</td><td>getEmp</td><td>emp---GET</td></tr><tr><td>添加</td><td>addEmp?xxx</td><td>emp---POST</td></tr><tr><td>修改</td><td>updateEmp?id=xxx&amp;xxx=xx</td><td>emp/{id}---PUT</td></tr><tr><td>删除</td><td>deleteEmp?id=1</td><td>emp/{id}---DELETE</td></tr></tbody></table><p>2）、实验的请求架构;</p><table><thead><tr><th>实验功能</th><th>请求URI</th><th>请求方式</th></tr></thead><tbody><tr><td>查询所有员工</td><td>emps</td><td>GET</td></tr><tr><td>查询某个员工(来到修改页面)</td><td>emp/1</td><td>GET</td></tr><tr><td>来到添加页面</td><td>emp</td><td>GET</td></tr><tr><td>添加员工</td><td>emp</td><td>POST</td></tr><tr><td>来到修改页面（查出员工进行信息回显）</td><td>emp/1</td><td>GET</td></tr><tr><td>修改员工</td><td>emp</td><td>PUT</td></tr><tr><td>删除员工</td><td>emp/1</td><td>DELETE</td></tr></tbody></table><p>3）、员工列表：</p><h4 id="thymeleaf公共页面元素抽取" tabindex="-1"><a class="header-anchor" href="#thymeleaf公共页面元素抽取" aria-hidden="true">#</a> thymeleaf公共页面元素抽取</h4><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">1、抽取公共片段</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:fragment</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;copy&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#569CD6;">&amp;copy;</span><span style="color:#D4D4D4;"> 2011 The Good Thymes Virtual Grocery</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">2、引入公共片段</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:insert</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;~{footer :: copy}&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">~{templatename::selector}：模板名::选择器</span></span>
<span class="line"><span style="color:#D4D4D4;">~{templatename::fragmentname}:模板名::片段名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">3、默认效果：</span></span>
<span class="line"><span style="color:#D4D4D4;">insert的公共片段在div标签中</span></span>
<span class="line"><span style="color:#D4D4D4;">如果使用th:insert等属性进行引入，可以不用写~{}：</span></span>
<span class="line"><span style="color:#D4D4D4;">行内写法可以加上：[[~{}]]--相当于th:text;[(~{})]---相当于th:utext；</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>三种引入公共片段的th属性：</p><p><strong>th:insert</strong>：将公共片段整个插入到声明引入的元素中</p><p><strong>th:replace</strong>：将声明引入的元素替换为公共片段</p><p><strong>th:include</strong>：将被引入的片段的内容包含进这个标签中</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">footer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:fragment</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;copy&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#569CD6;">&amp;copy;</span><span style="color:#D4D4D4;"> 2011 The Good Thymes Virtual Grocery</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">footer</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">引入方式</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:insert</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;footer :: copy&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:replace</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;footer :: copy&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:include</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;footer :: copy&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">效果</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">footer</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">&amp;copy;</span><span style="color:#D4D4D4;"> 2011 The Good Thymes Virtual Grocery</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">footer</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">footer</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#569CD6;">&amp;copy;</span><span style="color:#D4D4D4;"> 2011 The Good Thymes Virtual Grocery</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">footer</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#569CD6;">&amp;copy;</span><span style="color:#D4D4D4;"> 2011 The Good Thymes Virtual Grocery</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>引入片段的时候传入参数：</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">nav</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;col-md-2 d-none d-md-block bg-light sidebar&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;sidebar&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;sidebar-sticky&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">ul</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;nav flex-column&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">li</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;nav-item&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">a</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;nav-link active&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">                   </span><span style="color:#9CDCFE;">th:class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${activeUri==&#39;main.html&#39;?&#39;nav-link active&#39;:&#39;nav-link&#39;}&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">                   </span><span style="color:#9CDCFE;">href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;@{/main.html}&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">svg</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">xmlns</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.w3.org/2000/svg&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">width</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;24&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">height</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;24&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">viewBox</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;0 0 24 24&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">fill</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;none&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">stroke</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;currentColor&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">stroke-width</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;2&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">stroke-linecap</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;round&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">stroke-linejoin</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;round&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;feather feather-home&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">path</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">d</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">path</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">polyline</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">points</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;9 22 9 12 15 12 15 22&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">polyline</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">svg</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                    Dashboard </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">span</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;sr-only&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">(current)</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">span</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">a</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">li</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">&lt;!--引入侧边栏;传入参数--&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:replace</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;commons/bar::#sidebar(activeUri=&#39;emps&#39;)&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-、crud-员工添加" tabindex="-1"><a class="header-anchor" href="#_6-、crud-员工添加" aria-hidden="true">#</a> 6）、CRUD-员工添加</h3><p>添加页面</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">form</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">LastName</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;text&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;zhangsan&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Email</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;email&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;zhangsan@atguigu.com&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Gender</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;&lt;</span><span style="color:#569CD6;">br</span><span style="color:#808080;">/&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check form-check-inline&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check-input&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;radio&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;gender&quot;</span><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;1&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check-label&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">男</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check form-check-inline&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check-input&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;radio&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;gender&quot;</span><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check-label&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">女</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">department</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">select</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">2</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">3</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">4</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">5</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">select</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Birth</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;text&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;zhangsan&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">button</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;submit&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;btn btn-primary&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">添加</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">button</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">form</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>提交的数据格式不对：生日：日期；</p><p>2017-12-12；2017/12/12；2017.12.12；</p><p>日期的格式化；SpringMVC将页面提交的值需要转换为指定的类型;</p><p>2017-12-12---Date； 类型转换，格式化;</p><p>默认日期是按照/的方式；</p><h3 id="_7-、crud-员工修改" tabindex="-1"><a class="header-anchor" href="#_7-、crud-员工修改" aria-hidden="true">#</a> 7）、CRUD-员工修改</h3><p>修改添加二合一表单</p><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">&lt;!--需要区分是员工修改还是添加；--&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">form</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:action</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;@{/emp}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">method</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;post&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">&lt;!--发送put请求修改员工数据--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">&lt;!--</span></span>
<span class="line"><span style="color:#6A9955;">1、SpringMVC中配置HiddenHttpMethodFilter;（SpringBoot自动配置好的）</span></span>
<span class="line"><span style="color:#6A9955;">2、页面创建一个post表单</span></span>
<span class="line"><span style="color:#6A9955;">3、创建一个input项，name=&quot;_method&quot;;值就是我们指定的请求方式</span></span>
<span class="line"><span style="color:#6A9955;">--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;hidden&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;_method&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;put&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:if</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}&quot;</span><span style="color:#808080;">/&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;hidden&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;id&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:if</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp.id}&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">LastName</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;lastName&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;text&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;zhangsan&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}?${emp.lastName}&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Email</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;email&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;email&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;zhangsan@atguigu.com&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}?${emp.email}&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Gender</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;&lt;</span><span style="color:#569CD6;">br</span><span style="color:#808080;">/&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check form-check-inline&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check-input&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;radio&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;gender&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;1&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:checked</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}?${emp.gender==1}&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check-label&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">男</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check form-check-inline&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check-input&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;radio&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;gender&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:checked</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}?${emp.gender==0}&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-check-label&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">女</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">department</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">&lt;!--提交的是部门的id--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">select</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;department.id&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">option</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:selected</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}?${dept.id == emp.department.id}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${dept.id}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:each</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;dept:${depts}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${dept.departmentName}&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">option</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">select</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-group&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Birth</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">label</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">input</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;birth&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;text&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;form-control&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">placeholder</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;zhangsan&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:value</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}?${#dates.format(emp.birth, &#39;yyyy-MM-dd HH:mm&#39;)}&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">button</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;submit&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;btn btn-primary&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp!=null}?&#39;修改&#39;:&#39;添加&#39;&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">添加</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">button</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">form</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-、crud-员工删除" tabindex="-1"><a class="header-anchor" href="#_8-、crud-员工删除" aria-hidden="true">#</a> 8）、CRUD-员工删除</h3><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">tr</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:each</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;emp:${emps}&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">td</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp.id}&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">[[${emp.lastName}]]</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">td</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp.email}&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">td</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp.gender}==0?&#39;女&#39;:&#39;男&#39;&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">td</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${emp.department.departmentName}&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">td</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;${#dates.format(emp.birth, &#39;yyyy-MM-dd HH:mm&#39;)}&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">a</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;btn btn-sm btn-primary&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;@{/emp/}+${emp.id}&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">编辑</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">a</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">button</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">th:attr</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;del_uri=@{/emp/}+${emp.id}&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;btn btn-sm btn-danger deleteBtn&quot;</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">删除</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">button</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">td</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">tr</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">script</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#DCDCAA;">$</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;.deleteBtn&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">click</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//删除当前员工的</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#DCDCAA;">$</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;#deleteEmpForm&quot;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;action&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#DCDCAA;">$</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;del_uri&quot;</span><span style="color:#D4D4D4;">)).</span><span style="color:#DCDCAA;">submit</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    });</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">script</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7、错误处理机制" tabindex="-1"><a class="header-anchor" href="#_7、错误处理机制" aria-hidden="true">#</a> 7、<strong>错误处理机制</strong></h2><p><strong>补充：</strong> search = <strong>SearchStrategy</strong>.CURRENT</p><hr><p>ALL：搜索整个层次结构，@ConditionOnBean中默认是ALL。</p><p>ANCESTORS：搜索所有祖先，但不搜索当前上下文。</p><p>CURRENT：仅搜索当前上下文。</p><p>PARENTS：搜索所有父母和祖先，但不是当前的上下文（在SpringBoot 2.0中，这个常量将被移除）</p><h3 id="_1-、springboot默认的错误处理机制" tabindex="-1"><a class="header-anchor" href="#_1-、springboot默认的错误处理机制" aria-hidden="true">#</a> 1）、SpringBoot默认的错误处理机制</h3><p>默认效果：</p><p>​ 1）、浏览器，返回一个默认的错误页面</p><p><img src="/construct/springboot/搜狗截图20180226173408.png" alt=""></p><p>浏览器发送请求的请求头：</p><p><img src="/construct/springboot/搜狗截图20180226180347.png" alt=""></p><p>​ 2）、如果是其他客户端，默认响应一个json数据</p><p><img src="/construct/springboot/搜狗截图20180226173527.png" alt=""></p><p>​ <img src="/construct/springboot/搜狗截图20180226180504.png" alt=""></p><p>原理：</p><p>​ 可以参照ErrorMvcAutoConfiguration；错误处理的自动配置；</p><pre><code>给容器中添加了以下组件
</code></pre><p>​ 1、DefaultErrorAttributes：</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">帮我们在页面共享信息；</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;String, Object&gt; </span><span style="color:#DCDCAA;">getErrorAttributes</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">RequestAttributes</span><span style="color:#D4D4D4;"> requestAttributes,</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#4EC9B0;">boolean</span><span style="color:#D4D4D4;"> includeStackTrace) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">errorAttributes</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">LinkedHashMap</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt;();</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">errorAttributes</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;timestamp&quot;</span><span style="color:#D4D4D4;">, </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">Date</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#DCDCAA;">addStatus</span><span style="color:#D4D4D4;">(errorAttributes, requestAttributes);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#DCDCAA;">addErrorDetails</span><span style="color:#D4D4D4;">(errorAttributes, requestAttributes, includeStackTrace);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#DCDCAA;">addPath</span><span style="color:#D4D4D4;">(errorAttributes, requestAttributes);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> errorAttributes;</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 2、BasicErrorController：处理默认/error请求</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Controller</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">RequestMapping</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;${server.error.path:${error.path:/error}}&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">BasicErrorController</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">AbstractErrorController</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">RequestMapping</span><span style="color:#D4D4D4;">(produces = </span><span style="color:#CE9178;">&quot;text/html&quot;</span><span style="color:#D4D4D4;">)</span><span style="color:#6A9955;">//产生html类型的数据；浏览器发送的请求来到这个方法处理</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ModelAndView</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">errorHtml</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#4EC9B0;">HttpServletResponse</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">response</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">HttpStatus</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">status</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">getStatus</span><span style="color:#D4D4D4;">(request);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">model</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">Collections</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">unmodifiableMap</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">getErrorAttributes</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">				request, </span><span style="color:#DCDCAA;">isIncludeStackTrace</span><span style="color:#D4D4D4;">(request, </span><span style="color:#9CDCFE;">MediaType</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">TEXT_HTML</span><span style="color:#D4D4D4;">)));</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">response</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setStatus</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">status</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">value</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//去哪个页面作为错误页面；包含页面地址和页面内容</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">ModelAndView</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">modelAndView</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">resolveErrorView</span><span style="color:#D4D4D4;">(request, response, status, model);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> (modelAndView == </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">?</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ModelAndView</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;error&quot;</span><span style="color:#D4D4D4;">, model) </span><span style="color:#C586C0;">:</span><span style="color:#D4D4D4;"> modelAndView);</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">RequestMapping</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ResponseBody</span><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//产生json数据，其他客户端来到这个方法处理；</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ResponseEntity</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt;&gt; </span><span style="color:#DCDCAA;">error</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">body</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">getErrorAttributes</span><span style="color:#D4D4D4;">(request,</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#DCDCAA;">isIncludeStackTrace</span><span style="color:#D4D4D4;">(request, </span><span style="color:#9CDCFE;">MediaType</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">ALL</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">HttpStatus</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">status</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">getStatus</span><span style="color:#D4D4D4;">(request);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ResponseEntity</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt;&gt;(body, status);</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 3、ErrorPageCustomizer：</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">Value</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;${error.path:/error}&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">path</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;/error&quot;</span><span style="color:#D4D4D4;">;  系统出现错误以后来到error请求进行处理；（</span><span style="color:#9CDCFE;">web</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">xml注册的错误页面规则</span><span style="color:#D4D4D4;">）</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 4、DefaultErrorViewResolver：</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ModelAndView</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">resolveErrorView</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> request, </span><span style="color:#4EC9B0;">HttpStatus</span><span style="color:#D4D4D4;"> status,</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;String, Object&gt; model) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">ModelAndView</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">modelAndView</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">resolve</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">String</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">valueOf</span><span style="color:#D4D4D4;">(status), model);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (modelAndView == </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#9CDCFE;">SERIES_VIEWS</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">containsKey</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">status</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">series</span><span style="color:#D4D4D4;">())) {</span></span>
<span class="line"><span style="color:#D4D4D4;">			modelAndView = </span><span style="color:#DCDCAA;">resolve</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">SERIES_VIEWS</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">status</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">series</span><span style="color:#D4D4D4;">()), model);</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> modelAndView;</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ModelAndView</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">resolve</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> viewName, </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;String, Object&gt; model) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//默认SpringBoot可以去找到一个页面？  error/404</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">errorViewName</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;error/&quot;</span><span style="color:#D4D4D4;"> + viewName;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//模板引擎可以解析这个页面地址就用模板引擎解析</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#4EC9B0;">TemplateAvailabilityProvider</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">provider</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">templateAvailabilityProviders</span></span>
<span class="line"><span style="color:#D4D4D4;">				.</span><span style="color:#DCDCAA;">getProvider</span><span style="color:#D4D4D4;">(errorViewName, </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">applicationContext</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (provider != </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;">//模板引擎可用的情况下返回到errorViewName指定的视图地址</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ModelAndView</span><span style="color:#D4D4D4;">(errorViewName, model);</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//模板引擎不可用，就在静态资源文件夹下找errorViewName对应的页面   error/404.html</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">resolveResource</span><span style="color:#D4D4D4;">(errorViewName, model);</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 步骤：</p><p>​ 一但系统出现4xx或者5xx之类的错误；ErrorPageCustomizer就会生效（定制错误的响应规则）；就会来到/error请求；就会被<strong>BasicErrorController</strong>处理；</p><p>​ 1）响应页面；去哪个页面是由<strong>DefaultErrorViewResolver</strong>解析得到的；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">protected</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ModelAndView</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">resolveErrorView</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> request,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">HttpServletResponse</span><span style="color:#D4D4D4;"> response, </span><span style="color:#4EC9B0;">HttpStatus</span><span style="color:#D4D4D4;"> status, </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;String, Object&gt; model) {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//所有的ErrorViewResolver得到ModelAndView</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">ErrorViewResolver</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">resolver</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">:</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">errorViewResolvers</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">ModelAndView</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">modelAndView</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">resolver</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">resolveErrorView</span><span style="color:#D4D4D4;">(request, status, model);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (modelAndView != </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> modelAndView;</span></span>
<span class="line"><span style="color:#D4D4D4;">      }</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-、如果定制错误响应" tabindex="-1"><a class="header-anchor" href="#_2-、如果定制错误响应" aria-hidden="true">#</a> 2）、如果定制错误响应：</h3><h4 id="_1-、如何定制错误的页面" tabindex="-1"><a class="header-anchor" href="#_1-、如何定制错误的页面" aria-hidden="true">#</a> <strong>1）、如何定制错误的页面；</strong></h4><p>​ <strong>1）、有模板引擎的情况下；error/状态码;</strong> 【将错误页面命名为 错误状态码.html 放在模板引擎文件夹里面的 error文件夹下】，发生此状态码的错误就会来到 对应的页面；</p><p>​ 我们可以使用4xx和5xx作为错误页面的文件名来匹配这种类型的所有错误，精确优先（优先寻找精确的状态码.html）；</p><p>​ 页面能获取的信息；</p><p>​ timestamp：时间戳</p><p>​ status：状态码</p><p>​ error：错误提示</p><p>​ exception：异常对象</p><p>​ message：异常消息</p><p>​ errors：JSR303数据校验的错误都在这里</p><p>​ 2）、没有模板引擎（模板引擎找不到这个错误页面），静态资源文件夹下找；</p><p>​ 3）、以上都没有错误页面，就是默认来到SpringBoot默认的错误提示页面；</p><h4 id="_2-、如何定制错误的json数据-自定义的异常信息可以在页面上显示-但是自定义的错误信息没有-移动端用户访问的时候没有添加自定义的其它信息" tabindex="-1"><a class="header-anchor" href="#_2-、如何定制错误的json数据-自定义的异常信息可以在页面上显示-但是自定义的错误信息没有-移动端用户访问的时候没有添加自定义的其它信息" aria-hidden="true">#</a> 2）、如何定制错误的json数据；//自定义的异常信息可以在页面上显示，但是自定义的错误信息没有（移动端用户访问的时候没有添加自定义的其它信息）</h4><p>​ 1）、自定义异常处理&amp;返回定制json数据；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ControllerAdvice</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyExceptionHandler</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">ResponseBody</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">ExceptionHandler</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">UserNotExistException</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">,</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#DCDCAA;">handleException</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Exception</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">,</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">map</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HashMap</span><span style="color:#D4D4D4;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">map</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;code&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;user.notexist&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">map</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;message&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getMessage</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> map;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"><span style="color:#6A9955;">//没有自适应效果...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 2）、转发到/error进行自适应响应效果处理</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"> @</span><span style="color:#4EC9B0;">ExceptionHandler</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">UserNotExistException</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">handleException</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Exception</span><span style="color:#D4D4D4;"> e, </span><span style="color:#4EC9B0;">HttpServletRequest</span><span style="color:#D4D4D4;"> request){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">,</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">map</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HashMap</span><span style="color:#D4D4D4;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//传入我们自己的错误状态码  4xx 5xx，否则就不会进入定制错误页面的解析流程</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;">         * Integer statusCode = (Integer) request</span></span>
<span class="line"><span style="color:#6A9955;">         .getAttribute(&quot;javax.servlet.error.status_code&quot;);</span></span>
<span class="line"><span style="color:#6A9955;">         */</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">request</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setAttribute</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;javax.servlet.error.status_code&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#B5CEA8;">500</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">map</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;code&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;user.notexist&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">map</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;message&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getMessage</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//转发到/error</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;forward:/error&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-、将我们的定制数据携带出去" tabindex="-1"><a class="header-anchor" href="#_3-、将我们的定制数据携带出去" aria-hidden="true">#</a> 3）、将我们的定制数据携带出去；</h4><p>出现错误以后，会来到/error请求，会被BasicErrorController处理，响应出去可以获取的数据是由getErrorAttributes得到的（是AbstractErrorController（ErrorController）规定的方法）；</p><p>​ 1、完全来编写一个ErrorController的实现类【或者是编写AbstractErrorController的子类】，放在容器中；</p><p>​ 2、页面上能用的数据，或者是json返回能用的数据都是通过errorAttributes.getErrorAttributes得到；</p><p>​ 容器中DefaultErrorAttributes.getErrorAttributes()；默认进行数据处理的；</p><p>​ **原因：**使用了springboot的一个注解</p><p>​ @<strong>ConditionalOnMissingBean</strong>(value = <strong>ErrorAttributes</strong>.class, search = SearchStrategy.CURRENT)</p><p><img src="/construct/springboot/1547980245961.png" alt=""></p><p>自定义ErrorAttributes</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//给容器中加入我们自己定义的ErrorAttributes</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Component</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyErrorAttributes</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DefaultErrorAttributes</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#DCDCAA;">getErrorAttributes</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">RequestAttributes</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">requestAttributes</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">boolean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">includeStackTrace</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">map</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">super</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getErrorAttributes</span><span style="color:#D4D4D4;">(requestAttributes, includeStackTrace);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">map</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;company&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;atguigu&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> map;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最终的效果：响应是自适应的，可以通过定制ErrorAttributes改变需要返回的内容，</p><p><img src="/construct/springboot/搜狗截图20180228135513.png" alt=""></p><h2 id="_8、配置嵌入式servlet容器" tabindex="-1"><a class="header-anchor" href="#_8、配置嵌入式servlet容器" aria-hidden="true">#</a> 8、配置嵌入式Servlet容器</h2><p>SpringBoot默认使用Tomcat作为嵌入式的Servlet容器；</p><p><img src="/construct/springboot/搜狗截图20180301142915.png" alt=""></p><p>问题？</p><h3 id="_1-、如何定制和修改servlet容器的相关配置" tabindex="-1"><a class="header-anchor" href="#_1-、如何定制和修改servlet容器的相关配置" aria-hidden="true">#</a> 1）、如何定制和修改Servlet容器的相关配置；</h3><p>1、修改和server有关的配置（ServerProperties【也是EmbeddedServletContainerCustomizer】）；</p><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># properties</span></span>
<span class="line"><span style="color:#D4D4D4;">server.port=8081</span></span>
<span class="line"><span style="color:#D4D4D4;">server.context-path=/crud</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">server.tomcat.uri-encoding=UTF-8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">//通用的Servlet容器设置</span></span>
<span class="line"><span style="color:#D4D4D4;">server.xxx</span></span>
<span class="line"><span style="color:#D4D4D4;">//Tomcat的设置</span></span>
<span class="line"><span style="color:#D4D4D4;">server.tomcat.xxx</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、编写一个<strong>EmbeddedServletContainerCustomizer</strong>：嵌入式的Servlet容器的定制器；来修改Servlet容器的配置</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Bean</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">//一定要将这个定制器加入到容器中</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EmbeddedServletContainerCustomizer</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">embeddedServletContainerCustomizer</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">EmbeddedServletContainerCustomizer</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">//定制嵌入式的Servlet容器相关的规则</span></span>
<span class="line"><span style="color:#D4D4D4;">        @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">customize</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ConfigurableEmbeddedServletContainer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">container</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#9CDCFE;">container</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setPort</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">8083</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">    };</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-、注册servlet三大组件【servlet、filter、listener】" tabindex="-1"><a class="header-anchor" href="#_2-、注册servlet三大组件【servlet、filter、listener】" aria-hidden="true">#</a> 2）、注册Servlet三大组件【Servlet、Filter、Listener】</h3><p>由于SpringBoot默认是以jar包的方式启动嵌入式的Servlet容器来启动SpringBoot的web应用，没有web.xml文件。</p><p>注册三大组件用以下方式</p><p>ServletRegistrationBean</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//注册三大组件</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ServletRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">myServlet</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#4EC9B0;">ServletRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registrationBean</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ServletRegistrationBean</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">MyServlet</span><span style="color:#D4D4D4;">(),</span><span style="color:#CE9178;">&quot;/myServlet&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> registrationBean;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>FilterRegistrationBean</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">FilterRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">myFilter</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#4EC9B0;">FilterRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registrationBean</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">FilterRegistrationBean</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">registrationBean</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setFilter</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">MyFilter</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">registrationBean</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setUrlPatterns</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Arrays</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">asList</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/hello&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;/myServlet&quot;</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> registrationBean;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ServletListenerRegistrationBean</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ServletListenerRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">myListener</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#4EC9B0;">ServletListenerRegistrationBean</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">MyListener</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">registrationBean</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ServletListenerRegistrationBean</span><span style="color:#D4D4D4;">&lt;&gt;(</span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">MyListener</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> registrationBean;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot帮我们自动SpringMVC的时候，自动的注册SpringMVC的前端控制器；DIspatcherServlet；</p><p>DispatcherServletAutoConfiguration中：</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Bean</span><span style="color:#D4D4D4;">(name = DEFAULT_DISPATCHER_SERVLET_REGISTRATION_BEAN_NAME)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnBean</span><span style="color:#D4D4D4;">(value = </span><span style="color:#9CDCFE;">DispatcherServlet</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, name = DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ServletRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">dispatcherServletRegistration</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">DispatcherServlet</span><span style="color:#D4D4D4;"> dispatcherServlet) {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">ServletRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ServletRegistrationBean</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">         dispatcherServlet, </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">serverProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getServletMapping</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//默认拦截： /  所有请求；包静态资源，但是不拦截jsp请求；   /*会拦截jsp</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//可以通过server.servletPath来修改SpringMVC前端控制器默认拦截的请求路径</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setName</span><span style="color:#D4D4D4;">(DEFAULT_DISPATCHER_SERVLET_BEAN_NAME);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setLoadOnStartup</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">webMvcProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getServlet</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">getLoadOnStartup</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">multipartConfig</span><span style="color:#D4D4D4;"> != </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setMultipartConfig</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">multipartConfig</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> registration;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）、SpringBoot能不能支持其他的Servlet容器；</p><h3 id="_3-、替换为其他嵌入式servlet容器" tabindex="-1"><a class="header-anchor" href="#_3-、替换为其他嵌入式servlet容器" aria-hidden="true">#</a> 3）、替换为其他嵌入式Servlet容器</h3><p><img src="/construct/springboot/搜狗截图20180302114401.png" alt=""></p><p>默认支持：</p><p>Tomcat（默认使用）</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-web</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   引入web模块默认就是使用嵌入式的Tomcat作为Servlet容器；</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Jetty</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">&lt;!-- 引入web模块 --&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-web</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-tomcat</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">&lt;!--引入其他的Servlet容器--&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-jetty</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Undertow</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">&lt;!-- 引入web模块 --&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-web</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-tomcat</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">exclusions</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">&lt;!--引入其他的Servlet容器--&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-undertow</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-、嵌入式servlet容器自动配置原理" tabindex="-1"><a class="header-anchor" href="#_4-、嵌入式servlet容器自动配置原理" aria-hidden="true">#</a> 4）、嵌入式Servlet容器自动配置原理；</h3><p>EmbeddedServletContainerAutoConfiguration：嵌入式的Servlet容器自动配置？</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">AutoConfigureOrder</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Ordered</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">HIGHEST_PRECEDENCE</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnWebApplication</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Import</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">BeanPostProcessorsRegistrar</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#6A9955;">//导入BeanPostProcessorsRegistrar：Spring注解版；给容器中导入一些组件</span></span>
<span class="line"><span style="color:#6A9955;">//导入了EmbeddedServletContainerCustomizerBeanPostProcessor：</span></span>
<span class="line"><span style="color:#6A9955;">//后置处理器：bean初始化前后（创建完对象，还没赋值赋值）执行初始化工作</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EmbeddedServletContainerAutoConfiguration</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ConditionalOnClass</span><span style="color:#D4D4D4;">({ </span><span style="color:#9CDCFE;">Servlet</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Tomcat</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;"> })</span><span style="color:#6A9955;">//判断当前是否引入了Tomcat依赖；</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ConditionalOnMissingBean</span><span style="color:#D4D4D4;">(value = </span><span style="color:#9CDCFE;">EmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, search = </span><span style="color:#9CDCFE;">SearchStrategy</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">CURRENT</span><span style="color:#D4D4D4;">)</span><span style="color:#6A9955;">//判断当前容器没有用户自己定义EmbeddedServletContainerFactory：嵌入式的Servlet容器工厂；作用：创建嵌入式的Servlet容器</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EmbeddedTomcat</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">TomcatEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">tomcatEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">TomcatEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;">	 * Nested configuration if Jetty is being used.</span></span>
<span class="line"><span style="color:#6A9955;">	 */</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ConditionalOnClass</span><span style="color:#D4D4D4;">({ </span><span style="color:#9CDCFE;">Servlet</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Server</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Loader</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#9CDCFE;">WebAppContext</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;"> })</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ConditionalOnMissingBean</span><span style="color:#D4D4D4;">(value = </span><span style="color:#9CDCFE;">EmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, search = </span><span style="color:#9CDCFE;">SearchStrategy</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">CURRENT</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EmbeddedJetty</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">JettyEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">jettyEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">JettyEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">	/**</span></span>
<span class="line"><span style="color:#6A9955;">	 * Nested configuration if Undertow is being used.</span></span>
<span class="line"><span style="color:#6A9955;">	 */</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ConditionalOnClass</span><span style="color:#D4D4D4;">({ </span><span style="color:#9CDCFE;">Servlet</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Undertow</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">SslClientAuthMode</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;"> })</span></span>
<span class="line"><span style="color:#D4D4D4;">	@</span><span style="color:#4EC9B0;">ConditionalOnMissingBean</span><span style="color:#D4D4D4;">(value = </span><span style="color:#9CDCFE;">EmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, search = </span><span style="color:#9CDCFE;">SearchStrategy</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">CURRENT</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EmbeddedUndertow</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">UndertowEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">undertowEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">UndertowEmbeddedServletContainerFactory</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1）、EmbeddedServletContainerFactory（嵌入式Servlet容器工厂）</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EmbeddedServletContainerFactory</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">//获取嵌入式的Servlet容器</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">EmbeddedServletContainer</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getEmbeddedServletContainer</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#4EC9B0;">ServletContextInitializer</span><span style="color:#D4D4D4;">... </span><span style="color:#9CDCFE;">initializers</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/construct/springboot/搜狗截图20180302144835.png" alt=""></p><p>2）、EmbeddedServletContainer：（嵌入式的Servlet容器）</p><p><img src="/construct/springboot/搜狗截图20180302144910.png" alt=""></p><p>3）、以<strong>TomcatEmbeddedServletContainerFactory</strong>为例</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">EmbeddedServletContainer</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getEmbeddedServletContainer</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">ServletContextInitializer</span><span style="color:#D4D4D4;">... </span><span style="color:#9CDCFE;">initializers</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//创建一个Tomcat</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">Tomcat</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">tomcat</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">Tomcat</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//配置Tomcat的基本环节</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">File</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">baseDir</span><span style="color:#D4D4D4;"> = (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">baseDirectory</span><span style="color:#D4D4D4;"> != </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">?</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">baseDirectory</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#C586C0;">:</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">createTempDir</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;tomcat&quot;</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">tomcat</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setBaseDir</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">baseDir</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getAbsolutePath</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">Connector</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">connector</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">Connector</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">protocol</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">tomcat</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getService</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">addConnector</span><span style="color:#D4D4D4;">(connector);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#DCDCAA;">customizeConnector</span><span style="color:#D4D4D4;">(connector);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">tomcat</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setConnector</span><span style="color:#D4D4D4;">(connector);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">tomcat</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getHost</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">setAutoDeploy</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#DCDCAA;">configureEngine</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">tomcat</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getEngine</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">Connector</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">additionalConnector</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">:</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">additionalTomcatConnectors</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">tomcat</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getService</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">addConnector</span><span style="color:#D4D4D4;">(additionalConnector);</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#DCDCAA;">prepareContext</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">tomcat</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getHost</span><span style="color:#D4D4D4;">(), initializers);</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//将配置好的Tomcat传入进去，返回一个EmbeddedServletContainer；并且启动Tomcat服务器</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getTomcatEmbeddedServletContainer</span><span style="color:#D4D4D4;">(tomcat);</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4）、我们对嵌入式容器的配置修改是怎么生效？</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">ServerProperties、EmbeddedServletContainerCustomizer</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>EmbeddedServletContainerCustomizer</strong>：定制器帮我们修改了Servlet容器的配置？</p><p>怎么修改的原理？</p><p>5）、容器中导入了<strong>EmbeddedServletContainerCustomizerBeanPostProcessor</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//初始化之前</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">postProcessBeforeInitialization</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> bean, </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> beanName)</span></span>
<span class="line"><span style="color:#D4D4D4;">      throws BeansException {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//如果当前初始化的是一个ConfigurableEmbeddedServletContainer类型的组件</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (bean </span><span style="color:#569CD6;">instanceof</span><span style="color:#D4D4D4;"> ConfigurableEmbeddedServletContainer) {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">postProcessBeforeInitialization</span><span style="color:#D4D4D4;">((ConfigurableEmbeddedServletContainer) bean);</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> bean;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">postProcessBeforeInitialization</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#4EC9B0;">ConfigurableEmbeddedServletContainer</span><span style="color:#D4D4D4;"> bean) {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//获取所有的定制器，调用每一个定制器的customize方法来给Servlet容器进行属性赋值；</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">EmbeddedServletContainerCustomizer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">customizer</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">:</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getCustomizers</span><span style="color:#D4D4D4;">()) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">customizer</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">customize</span><span style="color:#D4D4D4;">(bean);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Collection</span><span style="color:#D4D4D4;">&lt;EmbeddedServletContainerCustomizer&gt; </span><span style="color:#DCDCAA;">getCustomizers</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">customizers</span><span style="color:#D4D4D4;"> == </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">// Look up does not include the parent context</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">customizers</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ArrayList</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">EmbeddedServletContainerCustomizer</span><span style="color:#D4D4D4;">&gt;(</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">beanFactory</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;">//从容器中获取所有这葛类型的组件：EmbeddedServletContainerCustomizer</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;">//定制Servlet容器，给容器中可以添加一个EmbeddedServletContainerCustomizer类型的组件</span></span>
<span class="line"><span style="color:#D4D4D4;">            .</span><span style="color:#DCDCAA;">getBeansOfType</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">EmbeddedServletContainerCustomizer</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">                            </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">            .</span><span style="color:#DCDCAA;">values</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">Collections</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">sort</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">customizers</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">AnnotationAwareOrderComparator</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">INSTANCE</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">customizers</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">Collections</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">unmodifiableList</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">customizers</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">customizers</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4EC9B0;">ServerProperties也是定制器</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>步骤：</p><p>1）、SpringBoot根据导入的依赖情况，给容器中添加相应的EmbeddedServletContainerFactory【TomcatEmbeddedServletContainerFactory】</p><p>2）、容器中某个组件要创建对象就会惊动后置处理器；EmbeddedServletContainerCustomizerBeanPostProcessor；</p><p>只要是嵌入式的Servlet容器工厂，后置处理器就工作；</p><p>3）、后置处理器，从容器中获取所有的<strong>EmbeddedServletContainerCustomizer</strong>，调用定制器的定制方法</p><p>###5）、嵌入式Servlet容器启动原理；</p><p>什么时候创建嵌入式的Servlet容器工厂？什么时候获取嵌入式的Servlet容器并启动Tomcat；</p><p>获取嵌入式的Servlet容器工厂：</p><p>1）、SpringBoot应用启动运行run方法</p><p>2）、refreshContext(context);SpringBoot刷新IOC容器【创建IOC容器对象，并初始化容器，创建容器中的每一个组件】；如果是web应用创建<strong>AnnotationConfigEmbeddedWebApplicationContext</strong>，否则：<strong>AnnotationConfigApplicationContext</strong></p><p>3）、refresh(context);<strong>刷新刚才创建好的ioc容器；</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">refresh</span><span style="color:#D4D4D4;">() throws BeansException, IllegalStateException {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;">synchronized</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">startupShutdownMonitor</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">// Prepare this context for refreshing.</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">prepareRefresh</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">// Tell the subclass to refresh the internal bean factory.</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">ConfigurableListableBeanFactory</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">beanFactory</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">obtainFreshBeanFactory</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">// Prepare the bean factory for use in this context.</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">prepareBeanFactory</span><span style="color:#D4D4D4;">(beanFactory);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">try</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Allows post-processing of the bean factory in context subclasses.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">postProcessBeanFactory</span><span style="color:#D4D4D4;">(beanFactory);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Invoke factory processors registered as beans in the context.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">invokeBeanFactoryPostProcessors</span><span style="color:#D4D4D4;">(beanFactory);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Register bean processors that intercept bean creation.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">registerBeanPostProcessors</span><span style="color:#D4D4D4;">(beanFactory);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Initialize message source for this context.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">initMessageSource</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Initialize event multicaster for this context.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">initApplicationEventMulticaster</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Initialize other special beans in specific context subclasses.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">onRefresh</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Check for listener beans and register them.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">registerListeners</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Instantiate all remaining (non-lazy-init) singletons.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">finishBeanFactoryInitialization</span><span style="color:#D4D4D4;">(beanFactory);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Last step: publish corresponding event.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">finishRefresh</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">catch</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">BeansException</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">ex</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">isWarnEnabled</span><span style="color:#D4D4D4;">()) {</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">warn</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Exception encountered during context initialization - &quot;</span><span style="color:#D4D4D4;"> +</span></span>
<span class="line"><span style="color:#D4D4D4;">                  </span><span style="color:#CE9178;">&quot;cancelling refresh attempt: &quot;</span><span style="color:#D4D4D4;"> + ex);</span></span>
<span class="line"><span style="color:#D4D4D4;">         }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Destroy already created singletons to avoid dangling resources.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">destroyBeans</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Reset &#39;active&#39; flag.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">cancelRefresh</span><span style="color:#D4D4D4;">(ex);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Propagate exception to caller.</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#C586C0;">throw</span><span style="color:#D4D4D4;"> ex;</span></span>
<span class="line"><span style="color:#D4D4D4;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">finally</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// Reset common introspection caches in Spring&#39;s core, since we</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#6A9955;">// might not ever need metadata for singleton beans anymore...</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#DCDCAA;">resetCommonCaches</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">      }</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4）、 onRefresh(); web的ioc容器重写了onRefresh方法</p><p>5）、webioc容器会创建嵌入式的Servlet容器；<strong>createEmbeddedServletContainer</strong>();</p><p><strong>6）、获取嵌入式的Servlet容器工厂：</strong></p><p>EmbeddedServletContainerFactory containerFactory = getEmbeddedServletContainerFactory();</p><p>​ 从ioc容器中获取EmbeddedServletContainerFactory 组件；<strong>TomcatEmbeddedServletContainerFactory</strong>创建对象，后置处理器一看是这个对象，就获取所有的定制器来先定制Servlet容器的相关配置；</p><p>7）、<strong>使用容器工厂获取嵌入式的Servlet容器</strong>：this.embeddedServletContainer = containerFactory .getEmbeddedServletContainer(getSelfInitializer());</p><p>8）、嵌入式的Servlet容器创建对象并启动Servlet容器；</p><p><strong>先启动嵌入式的Servlet容器，再将ioc容器中剩下没有创建出的对象获取出来；</strong></p><p><strong>==IOC容器启动创建嵌入式的Servlet容器==</strong></p><h2 id="_9、使用外置的servlet容器" tabindex="-1"><a class="header-anchor" href="#_9、使用外置的servlet容器" aria-hidden="true">#</a> 9、使用外置的Servlet容器</h2><p>嵌入式Servlet容器：应用打成可执行的jar</p><p>​ 优点：简单、便携；</p><p>​ 缺点：默认不支持JSP、优化定制比较复杂（使用定制器【ServerProperties、自定义EmbeddedServletContainerCustomizer】，自己编写嵌入式Servlet容器的创建工厂【EmbeddedServletContainerFactory】）；</p><p>外置的Servlet容器：外面安装Tomcat---应用war包的方式打包；</p><h3 id="步骤" tabindex="-1"><a class="header-anchor" href="#步骤" aria-hidden="true">#</a> 步骤</h3><p>1）、必须创建一个war项目；（利用idea创建好目录结构）</p><p>2）、将嵌入式的Tomcat指定为provided；</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-tomcat</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">scope</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">provided</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">scope</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3）、必须编写一个<strong>SpringBootServletInitializer</strong>的子类，并调用configure方法</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ServletInitializer</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">SpringBootServletInitializer</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;">protected</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">SpringApplicationBuilder</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">configure</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">SpringApplicationBuilder</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">application</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//传入SpringBoot应用的主程序</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">application</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">sources</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">SpringBoot04WebJspApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4）、启动服务器就可以使用；</p><h3 id="原理" tabindex="-1"><a class="header-anchor" href="#原理" aria-hidden="true">#</a> 原理</h3><p>jar包：执行SpringBoot主类的main方法，启动ioc容器，创建嵌入式的Servlet容器；</p><p>war包：启动服务器，<strong>服务器启动SpringBoot应用</strong>【SpringBootServletInitializer】，启动ioc容器；</p><p>servlet3.0（Spring注解版）：</p><p>8.2.4 Shared libraries / runtimes pluggability：</p><p>规则：</p><p>​ 1）、服务器启动（web应用启动）会创建当前web应用里面每一个jar包里面ServletContainerInitializer实例：</p><p>​ 2）、ServletContainerInitializer的实现放在jar包的META-INF/services文件夹下，有一个名为javax.servlet.ServletContainerInitializer的文件，内容就是ServletContainerInitializer的实现类的全类名</p><p>​ 3）、还可以使用@HandlesTypes，在应用启动的时候加载我们感兴趣的类；</p><p>流程：</p><p>1）、启动Tomcat</p><p>2）、org\springframework\spring-web\4.3.14.RELEASE\spring-web-4.3.14.RELEASE.jar!\META-INF\services\javax.servlet.ServletContainerInitializer：</p><p>Spring的web模块里面有这个文件：<strong>org.springframework.web.SpringServletContainerInitializer</strong></p><p>3）、SpringServletContainerInitializer将@HandlesTypes(WebApplicationInitializer.class)标注的所有这个类型的类都传入到onStartup方法的Set&lt;Class&lt;?&gt;&gt;；为这些WebApplicationInitializer类型的类创建实例；</p><p>4）、每一个WebApplicationInitializer都调用自己的onStartup；</p><p><img src="/construct/springboot/搜狗截图20180302221835.png" alt=""></p><p>5）、相当于我们的SpringBootServletInitializer的类会被创建对象，并执行onStartup方法</p><p>6）、SpringBootServletInitializer实例执行onStartup的时候会createRootApplicationContext；创建容器</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">protected</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">WebApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">createRootApplicationContext</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">ServletContext</span><span style="color:#D4D4D4;"> servletContext) {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//1、创建SpringApplicationBuilder</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">SpringApplicationBuilder</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">builder</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">createSpringApplicationBuilder</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">StandardServletEnvironment</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">environment</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">StandardServletEnvironment</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">environment</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">initPropertySources</span><span style="color:#D4D4D4;">(servletContext, </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">builder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">environment</span><span style="color:#D4D4D4;">(environment);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">builder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">main</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">getClass</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">ApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">parent</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">getExistingRootWebApplicationContext</span><span style="color:#D4D4D4;">(servletContext);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (parent != </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">logger</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">info</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Root context already created (using as parent).&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">servletContext</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setAttribute</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#9CDCFE;">WebApplicationContext</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">builder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">initializers</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ParentContextApplicationContextInitializer</span><span style="color:#D4D4D4;">(parent));</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">builder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">initializers</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ServletContextApplicationContextInitializer</span><span style="color:#D4D4D4;">(servletContext));</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">builder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">contextClass</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">AnnotationConfigEmbeddedWebApplicationContext</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//调用configure方法，子类重写了这个方法，将SpringBoot的主程序类传入了进来</span></span>
<span class="line"><span style="color:#D4D4D4;">   builder = </span><span style="color:#DCDCAA;">configure</span><span style="color:#D4D4D4;">(builder);</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//使用builder创建一个Spring应用</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">SpringApplication</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">application</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">builder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">build</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">application</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSources</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">isEmpty</span><span style="color:#D4D4D4;">() &amp;&amp; </span><span style="color:#4EC9B0;">AnnotationUtils</span></span>
<span class="line"><span style="color:#D4D4D4;">         .</span><span style="color:#DCDCAA;">findAnnotation</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">getClass</span><span style="color:#D4D4D4;">(), </span><span style="color:#9CDCFE;">Configuration</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">) != </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">application</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSources</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">add</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">getClass</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">Assert</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">state</span><span style="color:#D4D4D4;">(!</span><span style="color:#9CDCFE;">application</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSources</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">isEmpty</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#CE9178;">&quot;No SpringApplication sources have been defined. Either override the &quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">               + </span><span style="color:#CE9178;">&quot;configure method or add an @Configuration annotation&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">// Ensure error pages are registered</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">registerErrorPageFilter</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">application</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSources</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">add</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">ErrorPageFilterConfiguration</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//启动Spring应用</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(application);</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7）、Spring的应用就启动并且创建IOC容器</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">... </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">StopWatch</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">stopWatch</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">StopWatch</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">stopWatch</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">start</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">context</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">FailureAnalyzers</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">analyzers</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#DCDCAA;">configureHeadlessProperty</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">SpringApplicationRunListeners</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">listeners</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">getRunListeners</span><span style="color:#D4D4D4;">(args);</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">listeners</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">starting</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">try</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">ApplicationArguments</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">applicationArguments</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">DefaultApplicationArguments</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">            args);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">ConfigurableEnvironment</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">environment</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">prepareEnvironment</span><span style="color:#D4D4D4;">(listeners,</span></span>
<span class="line"><span style="color:#D4D4D4;">            applicationArguments);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">Banner</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">printedBanner</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">printBanner</span><span style="color:#D4D4D4;">(environment);</span></span>
<span class="line"><span style="color:#D4D4D4;">      context = </span><span style="color:#DCDCAA;">createApplicationContext</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">      analyzers = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">FailureAnalyzers</span><span style="color:#D4D4D4;">(context);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">prepareContext</span><span style="color:#D4D4D4;">(context, environment, listeners, applicationArguments,</span></span>
<span class="line"><span style="color:#D4D4D4;">            printedBanner);</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//刷新IOC容器</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">refreshContext</span><span style="color:#D4D4D4;">(context);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">afterRefresh</span><span style="color:#D4D4D4;">(context, applicationArguments);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">listeners</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">finished</span><span style="color:#D4D4D4;">(context, </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">stopWatch</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">stop</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">logStartupInfo</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">StartupInfoLogger</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mainApplicationClass</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">               .</span><span style="color:#DCDCAA;">logStarted</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">getApplicationLog</span><span style="color:#D4D4D4;">(), stopWatch);</span></span>
<span class="line"><span style="color:#D4D4D4;">      }</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> context;</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">catch</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">Throwable</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">ex</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">handleRunFailure</span><span style="color:#D4D4D4;">(context, listeners, analyzers, ex);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">throw</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">IllegalStateException</span><span style="color:#D4D4D4;">(ex);</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>==启动Servlet容器，再启动SpringBoot应用==</strong></p><h1 id="_10-注解的使用" tabindex="-1"><a class="header-anchor" href="#_10-注解的使用" aria-hidden="true">#</a> <strong>10.注解的使用：</strong></h1><h3 id="validated" tabindex="-1"><a class="header-anchor" href="#validated" aria-hidden="true">#</a> @Validated</h3><p>​ spring 对 @valid的一次封装。默认使用的是hibernate的validation.</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> com.soyatec.sample.entity;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> lombok.Data;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> javax.validation.constraints.NotNull;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Data</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Student</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">NotNull</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">//controller 的部分代码</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">RequestMapping</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;test01&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">test01</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Model</span><span style="color:#D4D4D4;"> model, @</span><span style="color:#4EC9B0;">Validated</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Student</span><span style="color:#D4D4D4;"> student, </span><span style="color:#4EC9B0;">BindingResult</span><span style="color:#D4D4D4;"> bindingResult) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">bindingResult</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">hasErrors</span><span style="color:#D4D4D4;">()){</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(bindingResult);</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"><span style="color:#6A9955;">//		System.out.println(&quot;code&quot;+person.getCode());</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;home&quot;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原理：org.springframework.context.support.ReloadableResourceBundleMessageSource</p><p>​ 可以定制错误消息文件的地址和名称。</p><p><img src="/construct/springboot/1548055587(1).jpg" alt=""></p><h3 id="initbuilder-对请求的参数可以进行转换。" tabindex="-1"><a class="header-anchor" href="#initbuilder-对请求的参数可以进行转换。" aria-hidden="true">#</a> @InitBuilder: 对请求的参数可以进行转换。</h3><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">InitBinder</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">initBind</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">WebDataBinder</span><span style="color:#D4D4D4;"> dataBinder){</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#6A9955;">//可以进行请求参数的转换</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(dataBinder);</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例：</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">BaseController</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">InitBinder</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">protected</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">initBinder</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">WebDataBinder</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">binder</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">binder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerCustomEditor</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Date</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">MyDateEditor</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">binder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerCustomEditor</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Double</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">DoubleEditor</span><span style="color:#D4D4D4;">()); </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">binder</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerCustomEditor</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Integer</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">IntegerEditor</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyDateEditor</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">PropertyEditorSupport</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">        @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">setAsText</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">throws</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">IllegalArgumentException</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#4EC9B0;">SimpleDateFormat</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">format</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">SimpleDateFormat</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#4EC9B0;">Date</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">date</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">try</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">                date = </span><span style="color:#9CDCFE;">format</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">parse</span><span style="color:#D4D4D4;">(text);</span></span>
<span class="line"><span style="color:#D4D4D4;">            } </span><span style="color:#C586C0;">catch</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">ParseException</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">                format = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">SimpleDateFormat</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;yyyy-MM-dd&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#C586C0;">try</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">                    date = </span><span style="color:#9CDCFE;">format</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">parse</span><span style="color:#D4D4D4;">(text);</span></span>
<span class="line"><span style="color:#D4D4D4;">                } </span><span style="color:#C586C0;">catch</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">ParseException</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">e1</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">                }</span></span>
<span class="line"><span style="color:#D4D4D4;">            }</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#DCDCAA;">setValue</span><span style="color:#D4D4D4;">(date);</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DoubleEditor</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">PropertiesEditor</span><span style="color:#D4D4D4;">  {    </span></span>
<span class="line"><span style="color:#D4D4D4;">        @</span><span style="color:#4EC9B0;">Override</span><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">setAsText</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">throws</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">IllegalArgumentException</span><span style="color:#D4D4D4;"> {    </span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (text == </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;"> || </span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">equals</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;">)) {    </span></span>
<span class="line"><span style="color:#D4D4D4;">                text = </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">;    </span></span>
<span class="line"><span style="color:#D4D4D4;">            }    </span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#DCDCAA;">setValue</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Double</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">parseDouble</span><span style="color:#D4D4D4;">(text));    </span></span>
<span class="line"><span style="color:#D4D4D4;">        }    </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span></span>
<span class="line"><span style="color:#D4D4D4;">        @</span><span style="color:#4EC9B0;">Override</span><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getAsText</span><span style="color:#D4D4D4;">() {    </span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getValue</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">toString</span><span style="color:#D4D4D4;">();    </span></span>
<span class="line"><span style="color:#D4D4D4;">        }    </span></span>
<span class="line"><span style="color:#D4D4D4;">    }  </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">IntegerEditor</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">PropertiesEditor</span><span style="color:#D4D4D4;"> {    </span></span>
<span class="line"><span style="color:#D4D4D4;">        @</span><span style="color:#4EC9B0;">Override</span><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">setAsText</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">throws</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">IllegalArgumentException</span><span style="color:#D4D4D4;"> {    </span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (text == </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;"> || </span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">equals</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;">)) {    </span></span>
<span class="line"><span style="color:#D4D4D4;">                text = </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">;    </span></span>
<span class="line"><span style="color:#D4D4D4;">            }    </span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#DCDCAA;">setValue</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Integer</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">parseInt</span><span style="color:#D4D4D4;">(text));    </span></span>
<span class="line"><span style="color:#D4D4D4;">        }    </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span></span>
<span class="line"><span style="color:#D4D4D4;">        @</span><span style="color:#4EC9B0;">Override</span><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getAsText</span><span style="color:#D4D4D4;">() {    </span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getValue</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">toString</span><span style="color:#D4D4D4;">();    </span></span>
<span class="line"><span style="color:#D4D4D4;">        }    </span></span>
<span class="line"><span style="color:#D4D4D4;">    }  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="五、docker" tabindex="-1"><a class="header-anchor" href="#五、docker" aria-hidden="true">#</a> 五、Docker</h1><h2 id="_1、简介-1" tabindex="-1"><a class="header-anchor" href="#_1、简介-1" aria-hidden="true">#</a> 1、简介</h2><p><strong>Docker</strong>是一个开源的应用容器引擎；是一个轻量级容器技术；</p><p>Docker支持将软件编译成一个镜像；然后在镜像中各种软件做好配置，将镜像发布出去，其他使用者可以直接使用这个镜像；</p><p>运行中的这个镜像称为容器，容器启动是非常快速的。</p><p><img src="/construct/springboot/搜狗截图20180303145450.png" alt=""></p><p><img src="/construct/springboot/搜狗截图20180303145531.png" alt=""></p><h2 id="_2、核心概念" tabindex="-1"><a class="header-anchor" href="#_2、核心概念" aria-hidden="true">#</a> 2、核心概念</h2><p>docker主机(Host)：安装了Docker程序的机器（Docker直接安装在操作系统之上）；</p><p>docker客户端(Client)：连接docker主机进行操作；</p><p>docker仓库(Registry)：用来保存各种打包好的软件镜像；</p><p>docker镜像(Images)：软件打包好的镜像；放在docker仓库中；</p><p>docker容器(Container)：镜像启动后的实例称为一个容器；容器是独立运行的一个或一组应用</p><p><img src="/construct/springboot/搜狗截图20180303165113.png" alt=""></p><p>使用Docker的步骤：</p><p>1）、安装Docker</p><p>2）、去Docker仓库找到这个软件对应的镜像；</p><p>3）、使用Docker运行这个镜像，这个镜像就会生成一个Docker容器；</p><p>4）、对容器的启动停止就是对软件的启动停止；</p><h2 id="_3、安装docker" tabindex="-1"><a class="header-anchor" href="#_3、安装docker" aria-hidden="true">#</a> 3、安装Docker</h2><h4 id="_1-、安装linux虚拟机" tabindex="-1"><a class="header-anchor" href="#_1-、安装linux虚拟机" aria-hidden="true">#</a> 1）、安装linux虚拟机</h4><p>​ 1）、VMWare、VirtualBox（安装）；</p><p>​ 2）、导入虚拟机文件centos7-atguigu.ova；</p><p>​ 3）、双击启动linux虚拟机;使用 root/ 123456登陆</p><p>​ 4）、使用客户端连接linux服务器进行命令操作；</p><p>​ 5）、设置虚拟机网络；</p><p>​ 桥接网络===选好网卡====接入网线；</p><p>​ 6）、设置好网络以后使用命令重启虚拟机的网络</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">service network restart</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>​ 7）、查看linux的ip地址</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">ip addr</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>​ 8）、使用客户端连接linux；</p><h4 id="_2-、在linux虚拟机上安装docker" tabindex="-1"><a class="header-anchor" href="#_2-、在linux虚拟机上安装docker" aria-hidden="true">#</a> 2）、在linux虚拟机上安装docker</h4><p><a href="https://www.jianshu.com/p/45d158a45582" target="_blank" rel="noopener noreferrer"><strong>出现问题的解决方法</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>步骤：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">1、检查内核版本，必须是3.10及以上</span></span>
<span class="line"><span style="color:#D4D4D4;">uname -r</span></span>
<span class="line"><span style="color:#D4D4D4;">2、安装docker</span></span>
<span class="line"><span style="color:#D4D4D4;">yum install docker</span></span>
<span class="line"><span style="color:#D4D4D4;">3、输入y确认安装</span></span>
<span class="line"><span style="color:#D4D4D4;">4、启动docker</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># systemctl start docker</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker -v</span></span>
<span class="line"><span style="color:#D4D4D4;">Docker version 1.12.6, build 3e8e77d/1.12.6</span></span>
<span class="line"><span style="color:#D4D4D4;">5、开机启动docker</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># systemctl enable docker    #enable/disable</span></span>
<span class="line"><span style="color:#D4D4D4;">Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.</span></span>
<span class="line"><span style="color:#D4D4D4;">6、停止docker</span></span>
<span class="line"><span style="color:#D4D4D4;">systemctl stop docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4、docker常用命令-操作" tabindex="-1"><a class="header-anchor" href="#_4、docker常用命令-操作" aria-hidden="true">#</a> 4、Docker常用命令&amp;操作</h2><h3 id="_1-、镜像操作" tabindex="-1"><a class="header-anchor" href="#_1-、镜像操作" aria-hidden="true">#</a> 1）、镜像操作</h3><table><thead><tr><th>操作</th><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>检索</td><td>docker search 关键字 eg：docker search redis</td><td>我们经常去docker hub上检索镜像的详细信息，如镜像的TAG。</td></tr><tr><td>拉取</td><td>docker pull 镜像名:tag</td><td>:tag是可选的，tag表示标签，多为软件的版本，默认是latest</td></tr><tr><td>列表</td><td>docker images</td><td>查看所有本地镜像</td></tr><tr><td>删除</td><td>docker rmi image-id</td><td>删除指定的本地镜像</td></tr></tbody></table><p>https://hub.docker.com/</p><h3 id="_2-、容器操作" tabindex="-1"><a class="header-anchor" href="#_2-、容器操作" aria-hidden="true">#</a> 2）、容器操作</h3><p>软件镜像（QQ安装程序）----运行镜像----产生一个容器（正在运行的软件，运行的QQ）；</p><p>步骤：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">1、搜索镜像</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker search tomcat</span></span>
<span class="line"><span style="color:#D4D4D4;">2、拉取镜像</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker pull tomcat</span></span>
<span class="line"><span style="color:#D4D4D4;">3、根据镜像启动容器</span></span>
<span class="line"><span style="color:#D4D4D4;">docker run --name mytomcat -d tomcat:latest</span></span>
<span class="line"><span style="color:#D4D4D4;">4、docker ps  </span></span>
<span class="line"><span style="color:#D4D4D4;">查看运行中的容器</span></span>
<span class="line"><span style="color:#D4D4D4;">5、 停止运行中的容器</span></span>
<span class="line"><span style="color:#D4D4D4;">docker stop  容器的id</span></span>
<span class="line"><span style="color:#D4D4D4;">6、查看所有的容器</span></span>
<span class="line"><span style="color:#D4D4D4;">docker ps -a</span></span>
<span class="line"><span style="color:#D4D4D4;">7、启动容器</span></span>
<span class="line"><span style="color:#D4D4D4;">docker start 容器id</span></span>
<span class="line"><span style="color:#D4D4D4;">8、删除一个容器</span></span>
<span class="line"><span style="color:#D4D4D4;"> docker rm 容器id</span></span>
<span class="line"><span style="color:#D4D4D4;">9、启动一个做了端口映射的tomcat</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker run -d -p 8888:8080 tomcat</span></span>
<span class="line"><span style="color:#D4D4D4;">-d：后台运行</span></span>
<span class="line"><span style="color:#D4D4D4;">-p: 将主机的端口映射到容器的一个端口    主机端口:容器内部的端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">10、为了演示简单关闭了linux的防火墙</span></span>
<span class="line"><span style="color:#D4D4D4;">service firewalld status ；查看防火墙状态</span></span>
<span class="line"><span style="color:#D4D4D4;">service firewalld stop：关闭防火墙</span></span>
<span class="line"><span style="color:#D4D4D4;">11、查看容器的日志</span></span>
<span class="line"><span style="color:#D4D4D4;">docker logs container-name/container-id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">更多命令参看</span></span>
<span class="line"><span style="color:#D4D4D4;">https://docs.docker.com/engine/reference/commandline/docker/</span></span>
<span class="line"><span style="color:#D4D4D4;">可以参考每一个镜像的文档</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">exg:</span></span>
<span class="line"><span style="color:#D4D4D4;">docker run -it --rm --name lllnode -v </span><span style="color:#CE9178;">&quot;</span><span style="color:#9CDCFE;">$PWD</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">:/usr/src/myapp -w /usr/src/myapp node:0.10.40 npm install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">主命令是docker run node:0.10.40，这会创建一个容器并运行node:0.10.40这个镜像。</span></span>
<span class="line"><span style="color:#D4D4D4;">-it选项让Docker分配一个伪终端（可选的参数为-d，该参数要求Docker在后台运行容器）。</span></span>
<span class="line"><span style="color:#D4D4D4;">-rm参数表示清除，意味着只要你退出容器，Docker就会删除容器。如果不指定这个参数，容器会以停止状态一直存在磁盘上，你能从停止状态重新运行它。尽管，重启容器对于那些忘了删除容器的用户来说是一件挺繁琐切容易遗忘的事。如果你不用--rm选项，你可以通过docker ps -a这条命令在任何时候查看有多少停止状态的容器。</span></span>
<span class="line"><span style="color:#D4D4D4;">--name lllnode选项指明了容器的名字，命令在其他Docker命令里应用容器的时候非常有用。如果不给容器命名，Docker会给容器分配一个名字-这个名字通常没有说明意义。可以通过容器的ID（一个长的，可读性很差的十六进制数）来引用容器。</span></span>
<span class="line"><span style="color:#D4D4D4;">-v </span><span style="color:#CE9178;">&quot;</span><span style="color:#9CDCFE;">$PWD</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">:/usr/src/myapp选项创建了一个卷挂载点，将当前宿主机的工作目录(</span><span style="color:#9CDCFE;">$PWD</span><span style="color:#D4D4D4;">)映射为容器内的/usr/src/myapp。应用的Node.js的源代码（或者其他放在当前工作目录的Node.js代码）就能在容器内被访问了。</span></span>
<span class="line"><span style="color:#D4D4D4;">-w /usr/src/myapp选项设定了目前正在运行的命令的工作目录。本例中，工作目录改成了挂载点。</span></span>
<span class="line"><span style="color:#D4D4D4;">末尾的npm install命令会在容器的工作目录运行。这样的效果就是，你不用安装Node.js或任何的前置条件，就可以在容器的工作目录运行npm install命令。</span></span>
<span class="line"><span style="color:#D4D4D4;">-p 将容器的端口跟主机端口进行映射</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tomcat: 容器启动</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">docker run -it --name tomcat8.5 --rm -p 8088:8080 tomcat:8.5.37-alpine</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-、安装mysql示例" tabindex="-1"><a class="header-anchor" href="#_3-、安装mysql示例" aria-hidden="true">#</a> 3）、安装MySQL示例</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">docker pull mysql</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>错误的启动</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker run --name mysql01 -d mysql</span></span>
<span class="line"><span style="color:#D4D4D4;">42f09819908bb72dd99ae19e792e0a5d03c48638421fa64cce5f8ba0f40f5846</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">mysql退出了</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker ps -a</span></span>
<span class="line"><span style="color:#D4D4D4;">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                           PORTS               NAMES</span></span>
<span class="line"><span style="color:#D4D4D4;">42f09819908b        mysql               </span><span style="color:#CE9178;">&quot;docker-entrypoint.sh&quot;</span><span style="color:#D4D4D4;">   34 seconds ago      Exited (1) 33 seconds ago                            mysql01</span></span>
<span class="line"><span style="color:#D4D4D4;">538bde63e500        tomcat              </span><span style="color:#CE9178;">&quot;catalina.sh run&quot;</span><span style="color:#D4D4D4;">        About an hour ago   Exited (143) About an hour ago                       compassionate_</span></span>
<span class="line"><span style="color:#D4D4D4;">goldstine</span></span>
<span class="line"><span style="color:#D4D4D4;">c4f1ac60b3fc        tomcat              </span><span style="color:#CE9178;">&quot;catalina.sh run&quot;</span><span style="color:#D4D4D4;">        About an hour ago   Exited (143) About an hour ago                       lonely_fermi</span></span>
<span class="line"><span style="color:#D4D4D4;">81ec743a5271        tomcat              </span><span style="color:#CE9178;">&quot;catalina.sh run&quot;</span><span style="color:#D4D4D4;">        About an hour ago   Exited (143) About an hour ago                       sick_ramanujan</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">//错误日志</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker logs 42f09819908b</span></span>
<span class="line"><span style="color:#D4D4D4;">error: database is uninitialized and password option is not specified </span></span>
<span class="line"><span style="color:#D4D4D4;">  You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and MYSQL_RANDOM_ROOT_PASSWORD；这个三个参数必须指定一个</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>正确的启动</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span></span>
<span class="line"><span style="color:#D4D4D4;">b874c56bec49fb43024b3805ab51e9097da779f2f572c22c695305dedd684c5f</span></span>
<span class="line"><span style="color:#D4D4D4;">---------</span></span>
<span class="line"><span style="color:#D4D4D4;">-e </span><span style="color:#DCDCAA;">:</span><span style="color:#D4D4D4;"> 指定参数名称</span></span>
<span class="line"><span style="color:#D4D4D4;">---------</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker ps</span></span>
<span class="line"><span style="color:#D4D4D4;">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</span></span>
<span class="line"><span style="color:#D4D4D4;">b874c56bec49        mysql               </span><span style="color:#CE9178;">&quot;docker-entrypoint.sh&quot;</span><span style="color:#D4D4D4;">   4 seconds ago       Up 3 seconds        3306/tcp            mysql01</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>做了端口映射</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span></span>
<span class="line"><span style="color:#D4D4D4;">ad10e4bc5c6a0f61cbad43898de71d366117d120e39db651844c0e73863b9434</span></span>
<span class="line"><span style="color:#D4D4D4;">[root@localhost ~]</span><span style="color:#6A9955;"># docker ps</span></span>
<span class="line"><span style="color:#D4D4D4;">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span></span>
<span class="line"><span style="color:#D4D4D4;">ad10e4bc5c6a        mysql               </span><span style="color:#CE9178;">&quot;docker-entrypoint.sh&quot;</span><span style="color:#D4D4D4;">   4 seconds ago       Up 2 seconds        0.0.0.0:3306-&gt;3306/tcp   mysql02</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>几个其他的高级操作</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">docker run --name mysql03 -v /conf/mysql:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span></span>
<span class="line"><span style="color:#D4D4D4;">把主机的/conf/mysql文件夹挂载到 mysqldocker容器的/etc/mysql/conf.d文件夹里面</span></span>
<span class="line"><span style="color:#D4D4D4;">改mysql的配置文件就只需要把mysql配置文件放在自定义的文件夹下（/conf/mysql）</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span>
<span class="line"><span style="color:#D4D4D4;">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span></span>
<span class="line"><span style="color:#D4D4D4;">指定mysql的一些配置参数</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="六、springboot与数据访问" tabindex="-1"><a class="header-anchor" href="#六、springboot与数据访问" aria-hidden="true">#</a> 六、SpringBoot与数据访问</h1><h2 id="_1、jdbc" tabindex="-1"><a class="header-anchor" href="#_1、jdbc" aria-hidden="true">#</a> 1、JDBC</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-jdbc</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">mysql</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">mysql-connector-java</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">scope</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">runtime</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">scope</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">spring</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">datasource</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">username</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">root</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">password</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">123456</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">url</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">jdbc:mysql://192.168.15.22:3306/jdbc</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">driver-class-name</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">com.mysql.jdbc.Driver</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果：</p><p>​ 默认是用org.apache.tomcat.jdbc.pool.DataSource作为数据源；</p><p>​ 数据源的相关配置都在DataSourceProperties里面；</p><p>自动配置原理：</p><p>org.springframework.boot.autoconfigure.jdbc：</p><p>1、参考DataSourceConfiguration，根据配置创建数据源，默认使用Tomcat连接池；可以使用spring.datasource.type指定自定义的数据源类型；</p><p>2、SpringBoot默认可以支持；</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">org.apache.tomcat.jdbc.pool.DataSource、HikariDataSource、BasicDataSource、</span></span>
<span class="line"><span style="color:#D4D4D4;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3、自定义数据源类型</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;"> * Generic DataSource configuration.</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnMissingBean</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">DataSource</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnProperty</span><span style="color:#D4D4D4;">(name = </span><span style="color:#CE9178;">&quot;spring.datasource.type&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Generic</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DataSource</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">dataSource</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">DataSourceProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//使用DataSourceBuilder创建数据源，利用反射创建响应type的数据源，并且绑定相关属性</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">initializeDataSourceBuilder</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">build</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4、<strong>DataSourceInitializer：ApplicationListener</strong>；</p><p>​ 作用：</p><p>​ 1）、runSchemaScripts();运行建表语句；</p><p>​ 2）、runDataScripts();运行插入数据的sql语句；</p><p>默认只需要将文件命名为：</p><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># properties</span></span>
<span class="line"><span style="color:#D4D4D4;">schema-*.sql、data-*.sql</span></span>
<span class="line"><span style="color:#D4D4D4;">默认规则：schema.sql，schema-all.sql；</span></span>
<span class="line"><span style="color:#D4D4D4;">可以使用   </span></span>
<span class="line"><span style="color:#D4D4D4;">	schema:</span></span>
<span class="line"><span style="color:#D4D4D4;">      - classpath:department.sql</span></span>
<span class="line"><span style="color:#D4D4D4;">      指定位置</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5、操作数据库：自动配置了JdbcTemplate操作数据库</p><h2 id="_2、整合druid数据源" tabindex="-1"><a class="header-anchor" href="#_2、整合druid数据源" aria-hidden="true">#</a> 2、整合Druid数据源</h2><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">导入druid数据源</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DruidConfig</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;spring.datasource&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DataSource</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">druid</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">DruidDataSource</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//配置Druid的监控</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//1、配置一个管理后台的Servlet</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ServletRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">statViewServlet</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">ServletRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">bean</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ServletRegistrationBean</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">StatViewServlet</span><span style="color:#D4D4D4;">(), </span><span style="color:#CE9178;">&quot;/druid/*&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">,</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">initParams</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HashMap</span><span style="color:#D4D4D4;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">initParams</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;loginUsername&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;admin&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">initParams</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;loginPassword&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;123456&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">initParams</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;allow&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;">);</span><span style="color:#6A9955;">//默认就是允许所有访问</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">initParams</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;deny&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;192.168.15.21&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">bean</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setInitParameters</span><span style="color:#D4D4D4;">(initParams);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> bean;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//2、配置一个web监控的filter</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">FilterRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">webStatFilter</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">FilterRegistrationBean</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">bean</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">FilterRegistrationBean</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">bean</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setFilter</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">WebStatFilter</span><span style="color:#D4D4D4;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">Map</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">,</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;">initParams</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HashMap</span><span style="color:#D4D4D4;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">initParams</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">put</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;exclusions&quot;</span><span style="color:#D4D4D4;">,</span><span style="color:#CE9178;">&quot;*.js,*.css,/druid/*&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">bean</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setInitParameters</span><span style="color:#D4D4D4;">(initParams);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">bean</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setUrlPatterns</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Arrays</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">asList</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/*&quot;</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;">  bean;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3、整合mybatis" tabindex="-1"><a class="header-anchor" href="#_3、整合mybatis" aria-hidden="true">#</a> 3、整合MyBatis</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.mybatis.spring.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">mybatis-spring-boot-starter</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.3.1</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/construct/springboot/搜狗截图20180305194443.png" alt=""></p><p>步骤：</p><p>​ 1）、配置数据源相关属性（见上一节Druid）</p><p>​ 2）、给数据库建表</p><p>​ 3）、创建JavaBean</p><h3 id="_4-、注解版" tabindex="-1"><a class="header-anchor" href="#_4-、注解版" aria-hidden="true">#</a> 4）、注解版</h3><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//指定这是一个操作数据库的mapper</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Mapper</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DepartmentMapper</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Select</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;select * from department where id=#{id}&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Department</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getDeptById</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Integer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Delete</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;delete from department where id=#{id}&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">deleteDeptById</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Integer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Options</span><span style="color:#D4D4D4;">(useGeneratedKeys = </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">,keyProperty = </span><span style="color:#CE9178;">&quot;id&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Insert</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;insert into department(departmentName) values(#{departmentName})&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">insertDept</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Department</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">department</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Update</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;update department set departmentName=#{departmentName} where id=#{id}&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">int</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">updateDept</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Department</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">department</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>问题：</p><p>自定义MyBatis的配置规则；给容器中添加一个ConfigurationCustomizer；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">org</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">springframework</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">context</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">annotation</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">Configuration</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MyBatisConfig</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ConfigurationCustomizer</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">configurationCustomizer</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">ConfigurationCustomizer</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">            @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">customize</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Configuration</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">configuration</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">                </span><span style="color:#9CDCFE;">configuration</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setMapUnderscoreToCamelCase</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">            }</span></span>
<span class="line"><span style="color:#D4D4D4;">        };</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">使用MapperScan批量扫描所有的Mapper接口；</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">MapperScan</span><span style="color:#D4D4D4;">(value = </span><span style="color:#CE9178;">&quot;com.atguigu.springboot.mapper&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">SpringBootApplication</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">SpringBoot06DataMybatisApplication</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">main</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">[] </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">SpringApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">SpringBoot06DataMybatisApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, args);</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-、配置文件版" tabindex="-1"><a class="header-anchor" href="#_5-、配置文件版" aria-hidden="true">#</a> 5）、配置文件版</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">mybatis</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">config-location</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">classpath:mybatis/mybatis-config.xml 指定全局配置文件的位置</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">mapper-locations</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">classpath:mybatis/mapper/*.xml  指定sql映射文件的位置</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更多使用参照</p><p>http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</p><h2 id="_4、整合springdata-jpa" tabindex="-1"><a class="header-anchor" href="#_4、整合springdata-jpa" aria-hidden="true">#</a> 4、整合SpringData JPA</h2><h3 id="_1-、springdata简介" tabindex="-1"><a class="header-anchor" href="#_1-、springdata简介" aria-hidden="true">#</a> 1）、SpringData简介</h3><p><img src="/construct/springboot/搜狗截图20180306105412.png" alt=""></p><h3 id="_2-、整合springdata-jpa" tabindex="-1"><a class="header-anchor" href="#_2-、整合springdata-jpa" aria-hidden="true">#</a> 2）、整合SpringData JPA</h3><p>JPA:ORM（Object Relational Mapping）；</p><p>1）、编写一个实体类（bean）和数据表进行映射，并且配置好映射关系；</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//使用JPA注解配置映射关系</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Entity</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">//告诉JPA这是一个实体类（和数据表映射的类）</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Table</span><span style="color:#D4D4D4;">(name = </span><span style="color:#CE9178;">&quot;tbl_user&quot;</span><span style="color:#D4D4D4;">) </span><span style="color:#6A9955;">//@Table来指定和哪个数据表对应;如果省略默认表名就是user；</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">User</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Id</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">//这是一个主键</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">GeneratedValue</span><span style="color:#D4D4D4;">(strategy = </span><span style="color:#9CDCFE;">GenerationType</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">IDENTITY</span><span style="color:#D4D4D4;">)</span><span style="color:#6A9955;">//自增主键</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Integer</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Column</span><span style="color:#D4D4D4;">(name = </span><span style="color:#CE9178;">&quot;last_name&quot;</span><span style="color:#D4D4D4;">,length = </span><span style="color:#B5CEA8;">50</span><span style="color:#D4D4D4;">) </span><span style="color:#6A9955;">//这是和数据表对应的一个列</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">lastName</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Column</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">//省略默认列名就是属性名</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">email</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）、编写一个Dao接口来操作实体类对应的数据表（Repository）</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">//继承JpaRepository来完成对数据库的操作</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">UserRepository</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">extends</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">JpaRepository</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">User</span><span style="color:#D4D4D4;">,</span><span style="color:#4EC9B0;">Integer</span><span style="color:#D4D4D4;">&gt; {</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3）、基本的配置JpaProperties</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">spring</span><span style="color:#D4D4D4;">:  </span></span>
<span class="line"><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">jpa</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">hibernate</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#6A9955;">#     更新或者创建数据表结构</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">ddl-auto</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">update</span></span>
<span class="line"><span style="color:#6A9955;">#    控制台显示SQL</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">show-sql</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="七、启动配置原理" tabindex="-1"><a class="header-anchor" href="#七、启动配置原理" aria-hidden="true">#</a> 七、启动配置原理</h1><p>几个重要的事件回调机制</p><p>配置在META-INF/spring.factories</p><p><strong>ApplicationContextInitializer</strong></p><p><strong>SpringApplicationRunListener</strong></p><p>只需要放在ioc容器中</p><p><strong>ApplicationRunner</strong></p><p><strong>CommandLineRunner</strong></p><p>启动流程：</p><h2 id="_1、创建springapplication对象" tabindex="-1"><a class="header-anchor" href="#_1、创建springapplication对象" aria-hidden="true">#</a> <strong>1、创建SpringApplication对象</strong></h2><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#DCDCAA;">initialize</span><span style="color:#D4D4D4;">(sources);</span></span>
<span class="line"><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">initialize</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">[] sources) {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//保存主配置类</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (sources != </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#9CDCFE;">sources</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;"> &gt; </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">sources</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addAll</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Arrays</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">asList</span><span style="color:#D4D4D4;">(sources));</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//判断当前是否一个web应用</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">webEnvironment</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">deduceWebEnvironment</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//从类路径下找到META-INF/spring.factories配置的所有ApplicationContextInitializer；然后保存起来</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#DCDCAA;">setInitializers</span><span style="color:#D4D4D4;">((Collection) </span><span style="color:#DCDCAA;">getSpringFactoriesInstances</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">ApplicationContextInitializer</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//从类路径下找到ETA-INF/spring.factories配置的所有ApplicationListener</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#DCDCAA;">setListeners</span><span style="color:#D4D4D4;">((Collection) </span><span style="color:#DCDCAA;">getSpringFactoriesInstances</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">ApplicationListener</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//从多个配置类中找到有main方法的主配置类</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mainApplicationClass</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">deduceMainApplicationClass</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/construct/springboot/搜狗截图20180306145727.png" alt=""></p><p><img src="/construct/springboot/搜狗截图20180306145855.png" alt=""></p><h2 id="_2、运行run方法" tabindex="-1"><a class="header-anchor" href="#_2、运行run方法" aria-hidden="true">#</a> 2、运行run方法</h2><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">... </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">StopWatch</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">stopWatch</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">StopWatch</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">stopWatch</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">start</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">context</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">FailureAnalyzers</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">analyzers</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#DCDCAA;">configureHeadlessProperty</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;">//获取SpringApplicationRunListeners；从类路径下META-INF/spring.factories</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#4EC9B0;">SpringApplicationRunListeners</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">listeners</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">getRunListeners</span><span style="color:#D4D4D4;">(args);</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//回调所有的获取SpringApplicationRunListener.starting()方法</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">listeners</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">starting</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">try</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//封装命令行参数</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">ApplicationArguments</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">applicationArguments</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">DefaultApplicationArguments</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">            args);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">//准备环境</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">ConfigurableEnvironment</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">environment</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">prepareEnvironment</span><span style="color:#D4D4D4;">(listeners,</span></span>
<span class="line"><span style="color:#D4D4D4;">            applicationArguments);</span></span>
<span class="line"><span style="color:#D4D4D4;">       		</span><span style="color:#6A9955;">//创建环境完成后回调SpringApplicationRunListener.environmentPrepared()；表示环境准备完成</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#4EC9B0;">Banner</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">printedBanner</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">printBanner</span><span style="color:#D4D4D4;">(environment);</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//创建ApplicationContext；决定创建web的ioc还是普通的ioc</span></span>
<span class="line"><span style="color:#D4D4D4;">      context = </span><span style="color:#DCDCAA;">createApplicationContext</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span></span>
<span class="line"><span style="color:#D4D4D4;">      analyzers = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">FailureAnalyzers</span><span style="color:#D4D4D4;">(context);</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//准备上下文环境;将environment保存到ioc中；而且applyInitializers()；</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//applyInitializers()：回调之前保存的所有的ApplicationContextInitializer的initialize方法</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//回调所有的SpringApplicationRunListener的contextPrepared()；</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">prepareContext</span><span style="color:#D4D4D4;">(context, environment, listeners, applicationArguments,</span></span>
<span class="line"><span style="color:#D4D4D4;">            printedBanner);</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//prepareContext运行完成以后回调所有的SpringApplicationRunListener的contextLoaded（）；</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//s刷新容器；ioc容器初始化（如果是web应用还会创建嵌入式的Tomcat）；Spring注解版</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//扫描，创建，加载所有组件的地方；（配置类，组件，自动配置）</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">refreshContext</span><span style="color:#D4D4D4;">(context);</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//从ioc容器中获取所有的ApplicationRunner和CommandLineRunner进行回调</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//ApplicationRunner先回调，CommandLineRunner再回调</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">afterRefresh</span><span style="color:#D4D4D4;">(context, applicationArguments);</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//所有的SpringApplicationRunListener回调finished方法</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">listeners</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">finished</span><span style="color:#D4D4D4;">(context, </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">stopWatch</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">stop</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">logStartupInfo</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">StartupInfoLogger</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">mainApplicationClass</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">               .</span><span style="color:#DCDCAA;">logStarted</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">getApplicationLog</span><span style="color:#D4D4D4;">(), stopWatch);</span></span>
<span class="line"><span style="color:#D4D4D4;">      }</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#6A9955;">//整个SpringBoot应用启动完成以后返回启动的ioc容器；</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> context;</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#C586C0;">catch</span><span style="color:#D4D4D4;"> (</span><span style="color:#4EC9B0;">Throwable</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">ex</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">handleRunFailure</span><span style="color:#D4D4D4;">(context, listeners, analyzers, ex);</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">throw</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">IllegalStateException</span><span style="color:#D4D4D4;">(ex);</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3、事件监听机制" tabindex="-1"><a class="header-anchor" href="#_3、事件监听机制" aria-hidden="true">#</a> 3、事件监听机制</h2><p>配置在META-INF/spring.factories</p><p><strong>ApplicationContextInitializer</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloApplicationContextInitializer</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">implements</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ApplicationContextInitializer</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;">&gt; {</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">initialize</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">applicationContext</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;ApplicationContextInitializer...initialize...&quot;</span><span style="color:#D4D4D4;">+applicationContext);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>SpringApplicationRunListener</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloSpringApplicationRunListener</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">implements</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">SpringApplicationRunListener</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">//必须有的构造器</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">HelloSpringApplicationRunListener</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">SpringApplication</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">application</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">[] </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">){</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">starting</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;SpringApplicationRunListener...starting...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">environmentPrepared</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ConfigurableEnvironment</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">environment</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">o</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">environment</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSystemProperties</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;os.name&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;SpringApplicationRunListener...environmentPrepared..&quot;</span><span style="color:#D4D4D4;">+o);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">contextPrepared</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">context</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;SpringApplicationRunListener...contextPrepared...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">contextLoaded</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">context</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;SpringApplicationRunListener...contextLoaded...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">finished</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ConfigurableApplicationContext</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">context</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Throwable</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">exception</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;SpringApplicationRunListener...finished...&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置（META-INF/spring.factories）</p><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;"># properties</span></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.context.ApplicationContextInitializer=</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">com.atguigu.springboot.listener.HelloApplicationContextInitializer</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">org.springframework.boot.SpringApplicationRunListener=</span><span style="color:#D7BA7D;">\</span></span>
<span class="line"><span style="color:#D4D4D4;">com.atguigu.springboot.listener.HelloSpringApplicationRunListener</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只需要放在ioc容器中</p><p><strong>ApplicationRunner</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Component</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloApplicationRunner</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">implements</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ApplicationRunner</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">ApplicationArguments</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">throws</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Exception</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;ApplicationRunner...run....&quot;</span><span style="color:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>CommandLineRunner</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Component</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloCommandLineRunner</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">implements</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">CommandLineRunner</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">... </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">throws</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Exception</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">System</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">out</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">println</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;CommandLineRunner...run...&quot;</span><span style="color:#D4D4D4;">+ </span><span style="color:#9CDCFE;">Arrays</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">asList</span><span style="color:#D4D4D4;">(args));</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="八、自定义starter" tabindex="-1"><a class="header-anchor" href="#八、自定义starter" aria-hidden="true">#</a> 八、自定义starter</h1><p>starter：</p><p>​ 1、这个场景需要使用到的依赖是什么？</p><p>​ 2、如何编写自动配置</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">//指定这个类是一个配置类</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnXXX</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">//在指定条件成立的情况下自动配置类生效</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">AutoConfigureAfter</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">//指定自动配置类的顺序</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Bean</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">//给容器中添加组件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationPropertie结合相关xxxProperties类来绑定相关的配置</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">EnableConfigurationProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">//让xxxProperties生效加入到容器中</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">自动配置类要能加载</span></span>
<span class="line"><span style="color:#D4D4D4;">将需要启动就加载的自动配置类，配置在META-INF/</span><span style="color:#9CDCFE;">spring</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">factories</span></span>
<span class="line"><span style="color:#9CDCFE;">org</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">springframework</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">boot</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">autoconfigure</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">EnableAutoConfiguration</span><span style="color:#D4D4D4;">=\</span></span>
<span class="line"><span style="color:#9CDCFE;">org</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">springframework</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">boot</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">autoconfigure</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">admin</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">SpringApplicationAdminJmxAutoConfiguration</span><span style="color:#D4D4D4;">,\</span></span>
<span class="line"><span style="color:#9CDCFE;">org</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">springframework</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">boot</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">autoconfigure</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">aop</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">AopAutoConfiguration</span><span style="color:#D4D4D4;">,\</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 3、模式：</p><p>启动器只用来做依赖导入；</p><p>专门来写一个自动配置模块；</p><p>启动器依赖自动配置；别人只需要引入启动器（starter）</p><p>mybatis-spring-boot-starter；自定义启动器名-spring-boot-starter</p><p>步骤：</p><p>1）、启动器模块</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;?</span><span style="color:#569CD6;">xml</span><span style="color:#9CDCFE;"> version</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;1.0&quot;</span><span style="color:#9CDCFE;"> encoding</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;UTF-8&quot;</span><span style="color:#808080;">?&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">project</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">xmlns</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#9CDCFE;">xmlns:xsi</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#9CDCFE;">xsi:schemaLocation</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">modelVersion</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">4.0.0</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">modelVersion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">com.atguigu.starter</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">atguigu-spring-boot-starter</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.0-SNAPSHOT</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">&lt;!--启动器--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependencies</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">&lt;!--引入自动配置模块--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">com.atguigu.starter</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">atguigu-spring-boot-starter-autoconfigurer</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">0.0.1-SNAPSHOT</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependencies</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">project</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）、自动配置模块</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;?</span><span style="color:#569CD6;">xml</span><span style="color:#9CDCFE;"> version</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;1.0&quot;</span><span style="color:#9CDCFE;"> encoding</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;UTF-8&quot;</span><span style="color:#808080;">?&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">project</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">xmlns</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">xmlns:xsi</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#9CDCFE;">xsi:schemaLocation</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">modelVersion</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">4.0.0</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">modelVersion</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">com.atguigu.starter</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">atguigu-spring-boot-starter-autoconfigurer</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">0.0.1-SNAPSHOT</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">packaging</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">jar</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">packaging</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">name</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">atguigu-spring-boot-starter-autoconfigurer</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">name</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">description</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">Demo project for Spring Boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">description</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">parent</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-parent</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.5.10.RELEASE</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">relativePath</span><span style="color:#808080;">/&gt;</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">&lt;!-- lookup parent from repository --&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">parent</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">properties</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">project.build.sourceEncoding</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">UTF-8</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">project.build.sourceEncoding</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">project.reporting.outputEncoding</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">UTF-8</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">project.reporting.outputEncoding</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">java.version</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">1.8</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">java.version</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">properties</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependencies</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">&lt;!--引入spring-boot-starter；所有starter的基本配置--&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">         </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependencies</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">project</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> com.atguigu.starter;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.boot.context.properties.ConfigurationProperties;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConfigurationProperties</span><span style="color:#D4D4D4;">(prefix = </span><span style="color:#CE9178;">&quot;atguigu.hello&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloProperties</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">prefix</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">suffix</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getPrefix</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> prefix;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">setPrefix</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">prefix</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">prefix</span><span style="color:#D4D4D4;"> = prefix;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getSuffix</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> suffix;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">setSuffix</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">suffix</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">suffix</span><span style="color:#D4D4D4;"> = suffix;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> com.atguigu.starter;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloService</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#4EC9B0;">HelloProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">helloProperties</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getHelloProperties</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> helloProperties;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">setHelloProperties</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">HelloProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">helloProperties</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">helloProperties</span><span style="color:#D4D4D4;"> = helloProperties;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">sayHellAtguigu</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">helloProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getPrefix</span><span style="color:#D4D4D4;">()+</span><span style="color:#CE9178;">&quot;-&quot;</span><span style="color:#D4D4D4;"> +name + </span><span style="color:#9CDCFE;">helloProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getSuffix</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> com.atguigu.starter;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.beans.factory.annotation.Autowired;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.boot.context.properties.EnableConfigurationProperties;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.context.annotation.Bean;</span></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> org.springframework.context.annotation.Configuration;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">ConditionalOnWebApplication</span><span style="color:#D4D4D4;"> </span><span style="color:#6A9955;">//web应用才生效</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">EnableConfigurationProperties</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">HelloProperties</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloServiceAutoConfiguration</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Autowired</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#4EC9B0;">HelloProperties</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">helloProperties</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloService</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">helloService</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">HelloService</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">service</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">HelloService</span><span style="color:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">service</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setHelloProperties</span><span style="color:#D4D4D4;">(helloProperties);</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> service;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="更多springboot整合示例" tabindex="-1"><a class="header-anchor" href="#更多springboot整合示例" aria-hidden="true">#</a> 更多SpringBoot整合示例</h1><p>https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples</p><h1 id="附录" tabindex="-1"><a class="header-anchor" href="#附录" aria-hidden="true">#</a> 附录：</h1><h3 id="spring在容器中注册组建" tabindex="-1"><a class="header-anchor" href="#spring在容器中注册组建" aria-hidden="true">#</a> Spring在容器中注册组建</h3><ul><li><p>1:包扫描：带用注解的组建(@Controller、@Service、@Repotitory...)</p></li><li><p>2:bean注解导入组建【导入第三方包里的组建】</p></li><li><p>3:@Import快速向容器中导入组建</p><ul><li>1.@Import(需要导入的组建)；容器中会自动注册组建，默认id是全类名</li><li>2.ImportSelector返回需要导入的组建全类名数组，不可以自定义组建id，全类名</li><li>3.ImportBeanDefinitionRegistrar：手动注册bean到容器中，可以自定义组建的id</li></ul></li><li><p>4:自己定义一个类实现FactoryBean接口，实现其方法，指定要注册到容器中的bean</p></li></ul><h1 id="spring-构造方法注入-如果只有一个有参构造方法-则可以省略-autowired" tabindex="-1"><a class="header-anchor" href="#spring-构造方法注入-如果只有一个有参构造方法-则可以省略-autowired" aria-hidden="true">#</a> spring 构造方法注入，如果只有一个有参构造方法，则可以省略@Autowired</h1><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Service</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">DatabaseCacheService</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">implements</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">CacheService</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;"> </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">final</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">CacheManager</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">cacheManager</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;"> </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">DatabaseCacheService</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">CacheManager</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">cacheManager</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">cacheManager</span><span style="color:#D4D4D4;"> = cacheManager;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;"> </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// ...</span></span>
<span class="line"><span style="color:#D4D4D4;"> </span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"><span style="color:#6A9955;">//注意，使用构造注入允许cacheManager标记为final，这也表示以后不能再被更改了。</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="九、缓存" tabindex="-1"><a class="header-anchor" href="#九、缓存" aria-hidden="true">#</a> 九、缓存</h1><h2 id="缓存注解" tabindex="-1"><a class="header-anchor" href="#缓存注解" aria-hidden="true">#</a> 缓存注解：</h2><p><img src="/construct/springboot/1548720562931.png" alt="1548720562931"></p><p><img src="/construct/springboot/TIM截图20190129082810.png" alt=""></p><p><img src="/construct/springboot/TIM截图20190129083000.png" alt=""></p><h3 id="步骤-1" tabindex="-1"><a class="header-anchor" href="#步骤-1" aria-hidden="true">#</a> 步骤：</h3><ol><li><p>引入依赖</p><div class="language-xml ext-xml line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">org.springframework.boot</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">groupId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">spring-boot-starter-cache</span><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">artifactId</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">dependency</span><span style="color:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>开启缓存的注解</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">EnableCaching</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">//开启缓存</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">SpringBootApplication</span></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">EnableCaching</span></span>
<span class="line"><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Springboot07CacheApplication</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">static</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">void</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">main</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">String</span><span style="color:#D4D4D4;">[] </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">SpringApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">run</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Springboot07CacheApplication</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">class</span><span style="color:#D4D4D4;">, args);</span></span>
<span class="line"><span style="color:#D4D4D4;">   }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>缓存注解的解释</p><p><img src="/construct/springboot/TIM截图20190129090100.png" alt=""></p><p>​</p></li><li><p>缓存的运行原理</p><p><strong>CacheAutoConfiguration</strong></p><p><img src="/construct/springboot/TIM截图20190129092504.png" alt=""></p><p><img src="/construct/springboot/TIM截图20190129092806.png" alt=""></p><p>@CachePut: 方法执行完成之后将结果放入缓存，每次都会执行方法（想要更新Cacheable设置的缓存，需要跟Cacheable缓存设置的key保持一致）</p><p>@Cacheable: 方法执行之前就查询缓存，如果有就不执行方法。没有方法完成后设置缓存</p><p>@CacheEvict:清除缓存。 beforeInvocation 默认是false ,方法执行之后再清除缓存。</p><p>@Caching: 配置多个缓存注解。</p><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">如何自定义keyGenerator:   @Cacheable(value=&quot;&quot;,keyGenerator=&quot;定义bean的id&quot;)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">keyGeneratorConfig</span><span style="color:#D4D4D4;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">		@</span><span style="color:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">KeyGenerator</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">keyGenerator</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#D4D4D4;">			</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">KeyGenerator</span><span style="color:#D4D4D4;">(){</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">				@</span><span style="color:#4EC9B0;">Override</span></span>
<span class="line"><span style="color:#D4D4D4;">				</span><span style="color:#569CD6;">public</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">generate</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">target</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Method</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">method</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">... </span><span style="color:#9CDCFE;">params</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">					</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">; </span><span style="color:#6A9955;">//自定义的生成策略</span></span>
<span class="line"><span style="color:#D4D4D4;">				}</span></span>
<span class="line"><span style="color:#D4D4D4;">			};</span></span>
<span class="line"><span style="color:#D4D4D4;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">实际案例：</span></span>
<span class="line"><span style="color:#D4D4D4;">	使用Cacheable设置缓存会在缓存中存放两个key-value.</span></span>
<span class="line"><span style="color:#D4D4D4;">	原因：</span></span>
<span class="line"><span style="color:#D4D4D4;">		Cacheable: </span></span>
<span class="line"><span style="color:#D4D4D4;">		第一次没有缓存的情况。详情可参考SimpleCacheConfig.ConcurrentMapCacheManage</span></span>
<span class="line"><span style="color:#D4D4D4;">		name属性设置缓存的名称，会以缓存的名称为key,以设置的默认key为Value存入缓存中。</span></span>
<span class="line"><span style="color:#D4D4D4;">        然后等待方法执行完成，将方法的结果存到缓存中。以设置的默认key为key,结果值为Value.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="整合redis" tabindex="-1"><a class="header-anchor" href="#整合redis" aria-hidden="true">#</a> 整合redis：</h2><p>只需要配置redis的host,再springboot的配置文件中。</p><p>redisTemplate(k-v都是对象)/stringRedisTemplate(k-v都是字符串)</p><p>redis默认的序列化机制是使用<strong>jdk的序列化</strong>。可以自定义redis的序列化。</p><p><img src="/construct/springboot/TIM截图20190130104103.png" alt=""></p></li></ol><p><img src="/construct/springboot/TIM截图20190201112008.png" alt=""></p><h2 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意：</h2><div class="language-tex ext-tex line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">自定义cacheManage必须指定RedisTemplate，如果自定义多个CacheManage，必须指定一个为默认的，使用@Primary 注解（复制RedisAutoConfiguration中定义的RedisTemplate）。</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="十、整合rabbitmq" tabindex="-1"><a class="header-anchor" href="#十、整合rabbitmq" aria-hidden="true">#</a> 十、整合RabbitMQ</h1><h4 id="docker-images中带-management-的是包含rabbitmq的web管理。管理端的默认用户密码是guest-guest。" tabindex="-1"><a class="header-anchor" href="#docker-images中带-management-的是包含rabbitmq的web管理。管理端的默认用户密码是guest-guest。" aria-hidden="true">#</a> docker images中带-management-的是包含rabbitmq的web管理。管理端的默认用户密码是guest/guest。</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">1.使用docker指定rabbitmq web管理的默认用户名和密码 </span></span>
<span class="line"><span style="color:#D4D4D4;">	-e RABBITMQ_DEFAULT_USER=user -e RABBITMQ_DEFAULT_PASS=password</span></span>
<span class="line"><span style="color:#D4D4D4;">2.docker pull rabbitmq:3.7-management-alpine</span></span>
<span class="line"><span style="color:#D4D4D4;">3.docker run -d -p 5672:5672 -p 15672:15672 --name rabbitmq rabbitmq:3.7-management-alpine</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="十一、整合elasticsearch" tabindex="-1"><a class="header-anchor" href="#十一、整合elasticsearch" aria-hidden="true">#</a> 十一、整合ElasticSearch</h1><h4 id="elasticsearch是java编写的-默认占用堆内存空间2g。测试的时候内存不满足条件会启动报错。因此需要指定使用的内存空间大小。" tabindex="-1"><a class="header-anchor" href="#elasticsearch是java编写的-默认占用堆内存空间2g。测试的时候内存不满足条件会启动报错。因此需要指定使用的内存空间大小。" aria-hidden="true">#</a> elasticsearch是java编写的，默认占用堆内存空间2G。测试的时候内存不满足条件会启动报错。因此需要指定使用的内存空间大小。</h4><p><a href="https://blog.csdn.net/qq_23250633/article/details/81327001" target="_blank" rel="noopener noreferrer">docker安装地址<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p><a href="https://blog.csdn.net/belonghuang157405/article/details/83301937" target="_blank" rel="noopener noreferrer">docker集群安装地址<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/docker.html" target="_blank" rel="noopener noreferrer">elasticsearch官网安装教程<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">1.docker pull registry.docker-cn.com/library/elasticsearch</span></span>
<span class="line"><span style="color:#D4D4D4;">2.docker run -e ES_JAVA_OPTIONS=</span><span style="color:#CE9178;">&quot;-Xms256m -Xmx256m&quot;</span><span style="color:#D4D4D4;"> -d -p 9200:9200 -p 9300:9300 --name es registry.docker-cn.com/library/elasticsearch</span></span>
<span class="line"><span style="color:#6A9955;"># 指定配置文件  yml</span></span>
<span class="line"><span style="color:#D4D4D4;">3.</span></span>
<span class="line"><span style="color:#D4D4D4;">docker run -e ES_JAVA_OPTS=</span><span style="color:#CE9178;">&quot;-Xms256m -Xmx256m&quot;</span><span style="color:#D4D4D4;"> -d -p 9200:9200 -p 9300:9300 -v /docker/es/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /docker/es/data:/usr/share/elasticsearch/data -v /docker/es/logs:/usr/share/elasticsearch/logs --name es 5acf0e8da90b</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解释：</p><p>​ registry.docker-cn.com/library/: docker国内镜像加速地址</p><p>​ -Xms: 初始堆内存大小</p><p>​ -Xmx: 最大堆内存大小</p><p>​ 9200: web通信的端口</p><p>​ 9300: 分布式节点通信的端口</p><h1 id="十二、-整合activity" tabindex="-1"><a class="header-anchor" href="#十二、-整合activity" aria-hidden="true">#</a> 十二、 整合activity</h1><p><a href="https://blog.csdn.net/ssyujay/article/details/83896809" target="_blank" rel="noopener noreferrer">activity 5.22<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><h1 id="十三、-整合jwt-shiro" tabindex="-1"><a class="header-anchor" href="#十三、-整合jwt-shiro" aria-hidden="true">#</a> 十三、 整合jwt+shiro</h1><p><a href="https://www.cnblogs.com/shihaiming/p/9565835.html" target="_blank" rel="noopener noreferrer">拦截器实现<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p><a href="https://blog.csdn.net/iamlake/article/details/86357114" target="_blank" rel="noopener noreferrer">完成实现<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>​ <a href="https://github.com/chilexun/springboot-demo" target="_blank" rel="noopener noreferrer">github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><h1 id="十四、整合solr" tabindex="-1"><a class="header-anchor" href="#十四、整合solr" aria-hidden="true">#</a> 十四、整合solr</h1><ol><li><a href="https://blog.csdn.net/mingshen3/article/details/71703660" target="_blank" rel="noopener noreferrer">solr检索word文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="https://blog.csdn.net/zml19910925/article/details/51155265" target="_blank" rel="noopener noreferrer">Solr索引pdf.txt.word等文件<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li></ol></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/lonlyz/blog/edit/main/docs/construct/springboot.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 786321279@qq.com">lz</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/construct/spring_analyse.html" class="" aria-label="Spring IOC源码分析"><!--[--><!--]--> Spring IOC源码分析 <!--[--><!--]--></a></span><span class="next"><a href="/construct/springcloud.html" class="" aria-label="Spring Cloud 入门"><!--[--><!--]--> Spring Cloud 入门 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.2d179ac6.js" defer></script>
  </body>
</html>
